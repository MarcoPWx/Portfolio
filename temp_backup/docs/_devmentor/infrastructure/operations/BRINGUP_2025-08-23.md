---
layout: product
title: BRINGUP 2025-08-23
product: DevMentor
source: infrastructure/operations/BRINGUP_2025-08-23.md
---

{% raw %}
# Cluster Bring-up Session Log — 2025-08-23 13:13:06Z

Scope: Verify cluster state and ensure gateway routing to AI/Auth works via Istio, aligning with docs/status.

Summary
- Context: kind-devmentor; kind cluster present and healthy
- Namespaces: devmentor, devmentor-app, devmentor-data, istio-system, monitoring active
- Core pods Running: auth-service (2/2), ai-gateway (2/2), postgres, redis, ollama (1 running + 1 pending intentionally)
- Istio: ingressgateway + istiod Running; Gateway and VirtualService present
- Observability: kube-prometheus-stack up; Kiali up
- Ingress: LoadBalancer EXTERNAL-IP pending (kind); use port-forward

Actions performed
1) Assessed cluster
   - kubectl config current-context → kind-devmentor
   - kind get clusters → devmentor
   - kubectl cluster-info → control plane reachable
   - kubectl get ns / pods / deploy / svc → services healthy
2) Verified Istio routing
   - Port-forwarded istio-ingressgateway: 8080:80
   - Confirmed /api/auth/health reachable (placeholder service responded)
3) Fixed PBML route path
   - VirtualService spec routes to ai-gateway on /api/ai/*, and ai-gateway serves /api/pbml/*
   - Added HTTP[2] rewrite on VirtualService to align path: /api/ai/pbml/* → /api/pbml/* at service
   - curl http://localhost:8080/api/ai/pbml/status → { ready: true, stream: 'ai:events' }

Next
- If we want API Gateway at 8080 consolidating routes, deploy api-gateway and switch VS to point to api-gateway instead of service pods directly.
- Confirm Redis URLs (env) for ai-gateway (REDIS_URL, REDIS_LEARNING_URL) match in-cluster DNS.
- Optional: scale down extra Ollama replica: kubectl -n devmentor scale deploy/ollama --replicas=1

Verification commands
- kubectl get pods -A | grep -E "istio|ai-gateway|auth-service|postgres|redis|ollama"
- curl -s http://localhost:8080/api/auth/health
- curl -s http://localhost:8080/api/ai/pbml/status | jq
- kubectl -n monitoring get svc,pods | grep kube-prometheus-stack

Notes
- Do not commit secrets; port-forwards used for local access.
- This log is operational; append-only updates in DEVLOG.md/EPIC_MANAGEMENT.md/SYSTEM_STATUS.md to follow.
{% endraw %}
