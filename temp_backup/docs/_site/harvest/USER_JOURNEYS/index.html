<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>USER JOURNEYS | NatureQuest Documentation Hub</title>
  
  <!-- Google Fonts for better readability -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --primary-color: #0969da;
      --text-color: #24292f;
      --text-light: #57606a;
      --bg-light: #f6f8fa;
      --border-color: #d1d9e0;
    }
    
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      font-size: 16px;
      line-height: 1.7;
      color: var(--text-color);
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      font-feature-settings: "kern" 1, "liga" 1;
    }
    
    /* Typography improvements */
    p {
      margin: 1.25rem 0;
      letter-spacing: -0.011em;
    }
    
    a {
      color: var(--primary-color);
      text-decoration: none;
      transition: all 0.2s ease;
    }
    
    a:hover {
      text-decoration: underline;
      opacity: 0.8;
    }
    
    /* Improved headings */
    h1, h2, h3, h4, h5, h6 {
      font-weight: 600;
      line-height: 1.3;
      margin-top: 2rem;
      margin-bottom: 1rem;
      letter-spacing: -0.02em;
    }
    
    h1 {
      font-size: 2.5rem;
      font-weight: 800;
      color: var(--primary-color);
      margin-top: 0;
      letter-spacing: -0.03em;
    }
    
    h2 {
      font-size: 1.875rem;
      font-weight: 700;
      color: var(--text-color);
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.5rem;
    }
    
    h3 {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--text-color);
    }
    
    h4 {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text-color);
    }
    
    /* Lists with better spacing */
    ul, ol {
      padding-left: 1.5rem;
      margin: 1.25rem 0;
    }
    
    li {
      margin: 0.5rem 0;
      line-height: 1.7;
    }
    
    /* Strong text */
    strong, b {
      font-weight: 600;
      color: var(--text-color);
    }
    
    /* Navigation */
    nav {
      background: linear-gradient(135deg, #f6f8fa 0%, #ffffff 100%);
      padding: 1.25rem;
      margin-bottom: 2rem;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }
    
    nav ul {
      list-style: none;
      padding: 0;
      display: flex;
      gap: 1.5rem;
      flex-wrap: wrap;
      margin: 0;
    }
    
    nav li {
      margin: 0;
    }
    
    nav a {
      color: var(--text-color);
      text-decoration: none;
      font-weight: 500;
      font-size: 0.95rem;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      transition: all 0.2s ease;
    }
    
    nav a:hover {
      background: var(--bg-light);
      color: var(--primary-color);
      text-decoration: none;
      opacity: 1;
    }
    
    /* Code blocks with JetBrains Mono */
    pre {
      background: var(--bg-light);
      padding: 1.25rem;
      border-radius: 8px;
      overflow-x: auto;
      border: 1px solid var(--border-color);
      margin: 1.5rem 0;
      font-size: 0.9rem;
    }
    
    code {
      font-family: 'JetBrains Mono', 'Consolas', 'Monaco', monospace;
      background: var(--bg-light);
      padding: 0.15rem 0.35rem;
      border-radius: 4px;
      font-size: 0.875em;
      font-weight: 500;
    }
    
    pre code {
      background: none;
      padding: 0;
      font-size: 0.875rem;
    }
    
    /* Tables */
    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      margin: 1.5rem 0;
      font-size: 0.95rem;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      overflow: hidden;
    }
    
    th, td {
      padding: 0.75rem 1rem;
      text-align: left;
      border-bottom: 1px solid var(--border-color);
    }
    
    th {
      background: var(--bg-light);
      font-weight: 600;
      font-size: 0.875rem;
      text-transform: uppercase;
      letter-spacing: 0.025em;
      color: var(--text-light);
    }
    
    tr:last-child td {
      border-bottom: none;
    }
    
    tr:hover {
      background: rgba(246, 248, 250, 0.5);
    }
    
    /* Blockquotes */
    blockquote {
      margin: 1.5rem 0;
      padding: 1rem 1.25rem;
      border-left: 4px solid var(--primary-color);
      background: var(--bg-light);
      border-radius: 0 8px 8px 0;
      font-style: italic;
      color: var(--text-light);
    }
    
    /* Horizontal rules */
    hr {
      border: none;
      height: 1px;
      background: var(--border-color);
      margin: 2rem 0;
    }
    
    /* Main content area */
    main {
      min-height: 60vh;
    }
    
    /* Footer */
    footer {
      margin-top: 4rem;
      padding-top: 2rem;
      border-top: 1px solid var(--border-color);
      color: var(--text-light);
      font-size: 0.875rem;
    }
  </style>
</head>
<body>
  <nav>
    <ul>
      <li><a href="/">Home</a></li>
      <li><a href="/learning-roadmap/">Learning Roadmap</a></li>
      <li><a href="/all-docs/">All Docs</a></li>
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/learning-roadmap/">Learning Roadmap</a></li>
      
      <li><a href="/devmentor/">DevMentor</a></li>
      
      <li><a href="/quizmentor/">QuizMentor</a></li>
      
      <li><a href="/harvest/">Harvest.ai</a></li>
      
      <li><a href="/naturequest-auth/">Auth</a></li>
      
      <li><a href="/infrastructure/">Infrastructure</a></li>
      
    </ul>
  </nav>

  <main>
    <div class="product-header" style="background: #f6f8fa; padding: 1rem; border-radius: 5px; margin-bottom: 2rem;">
  <span style="color: #666;">Harvest.ai</span> / 
  <span style="color: #999;">USER_JOURNEYS.md</span>
</div>

<h1>USER JOURNEYS</h1>


<h1 id="harvestai-user-journeys-documentation">Harvest.ai User Journeys Documentation</h1>

<h2 id="executive-summary">Executive Summary</h2>
<p>This document outlines comprehensive user journeys for Harvest.ai, covering all key personas, their goals, pain points, and interactions with the system. Each journey includes detailed state transitions, UI flows, and backend orchestration.</p>

<h2 id="table-of-contents">Table of Contents</h2>
<ol>
  <li><a href="#user-personas">User Personas</a></li>
  <li><a href="#journey-maps">Journey Maps</a></li>
  <li><a href="#state-transitions">State Transitions</a></li>
  <li><a href="#backend-orchestration">Backend Orchestration</a></li>
  <li><a href="#error-handling">Error Handling</a></li>
  <li><a href="#success-metrics">Success Metrics</a></li>
</ol>

<h2 id="user-personas">User Personas</h2>

<h3 id="1-content-creator-primary">1. Content Creator (Primary)</h3>
<p><strong>Profile</strong>: Bloggers, educators, course creators
<strong>Goals</strong>: Generate high-quality content quickly
<strong>Pain Points</strong>: Writer’s block, research time, consistency
<strong>Technical Level</strong>: Low to medium</p>

<h3 id="2-developer-secondary">2. Developer (Secondary)</h3>
<p><strong>Profile</strong>: Software engineers building content apps
<strong>Goals</strong>: Integrate content generation via API
<strong>Pain Points</strong>: Complex APIs, poor documentation, rate limits
<strong>Technical Level</strong>: High</p>

<h3 id="3-enterprise-user-growth">3. Enterprise User (Growth)</h3>
<p><strong>Profile</strong>: Marketing teams, training departments
<strong>Goals</strong>: Scale content production with compliance
<strong>Pain Points</strong>: Brand consistency, legal compliance, ROI tracking
<strong>Technical Level</strong>: Medium</p>

<h3 id="4-educational-institution-expansion">4. Educational Institution (Expansion)</h3>
<p><strong>Profile</strong>: Schools, universities, training centers
<strong>Goals</strong>: Generate assessments and learning materials
<strong>Pain Points</strong>: Curriculum alignment, accessibility, bulk generation
<strong>Technical Level</strong>: Low to medium</p>

<h2 id="journey-maps">Journey Maps</h2>

<h3 id="journey-1-first-time-user-registration-and-onboarding">Journey 1: First-Time User Registration and Onboarding</h3>

<pre><code class="language-mermaid">graph LR
    A[Landing Page] --&gt; B{Sign Up}
    B --&gt; C[Email Verification]
    C --&gt; D[Onboarding Survey]
    D --&gt; E[API Key Setup]
    E --&gt; F[First Generation]
    F --&gt; G{Success?}
    G --&gt;|Yes| H[Dashboard]
    G --&gt;|No| I[Support]
</code></pre>

<p><strong>Detailed Steps:</strong></p>

<ol>
  <li><strong>Discovery Phase</strong> (0-2 minutes)
    <ul>
      <li>User lands on homepage via search/referral</li>
      <li>Views hero section with value proposition</li>
      <li>Watches 30-second demo video</li>
      <li>Reads testimonials and use cases</li>
      <li><strong>Backend State</strong>: Session created, source tracked</li>
      <li><strong>Metrics</strong>: Time on page, scroll depth, video engagement</li>
    </ul>
  </li>
  <li><strong>Registration Phase</strong> (2-5 minutes)
    <ul>
      <li>Clicks “Start Free Trial” CTA</li>
      <li>Enters email and password</li>
      <li>Selects account type (Personal/Team/Enterprise)</li>
      <li>Agrees to terms and privacy policy</li>
      <li><strong>Backend State</strong>: User record created (PENDING_VERIFICATION)</li>
      <li><strong>API Calls</strong>:
        <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">POST</span> <span class="o">/</span><span class="nx">api</span><span class="o">/</span><span class="nx">auth</span><span class="o">/</span><span class="nx">register</span>
<span class="p">{</span>
  <span class="nl">email</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
  <span class="nx">password</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
  <span class="nx">accountType</span><span class="p">:</span> <span class="dl">'</span><span class="s1">personal</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">team</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">enterprise</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">source</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
  <span class="nx">referrer</span><span class="p">?:</span> <span class="kr">string</span>
<span class="p">}</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li><strong>Verification Phase</strong> (1-3 minutes)
    <ul>
      <li>Receives verification email</li>
      <li>Clicks verification link</li>
      <li>Returns to platform</li>
      <li><strong>Backend State</strong>: User updated (VERIFIED)</li>
      <li><strong>Cache</strong>: User session cached for 24 hours</li>
    </ul>
  </li>
  <li><strong>Onboarding Phase</strong> (3-5 minutes)
    <ul>
      <li>Completes profile survey:
        <ul>
          <li>Primary use case</li>
          <li>Content types needed</li>
          <li>Volume expectations</li>
          <li>Technical expertise</li>
        </ul>
      </li>
      <li><strong>Backend State</strong>: User profile enriched</li>
      <li><strong>Personalization</strong>: ML model trained on preferences</li>
    </ul>
  </li>
  <li><strong>API Key Configuration</strong> (2-3 minutes)
    <ul>
      <li>Option 1: Use Harvest.ai credits (free tier)</li>
      <li>Option 2: BYOK (Bring Your Own Keys)
        <ul>
          <li>OpenAI API key</li>
          <li>Anthropic API key</li>
          <li>Google AI key</li>
        </ul>
      </li>
      <li>Key validation and testing</li>
      <li><strong>Backend State</strong>: Keys encrypted and stored</li>
      <li><strong>Security</strong>: Keys validated against provider APIs</li>
    </ul>
  </li>
  <li><strong>First Content Generation</strong> (3-5 minutes)
    <ul>
      <li>Guided tutorial overlay</li>
      <li>Template selection</li>
      <li>Input source content (URL/text/file)</li>
      <li>Configure parameters</li>
      <li>Generate content</li>
      <li><strong>Backend State</strong>: Job created (QUEUED → PROCESSING → COMPLETE)</li>
      <li><strong>Monitoring</strong>: Latency, success rate, token usage</li>
    </ul>
  </li>
</ol>

<h3 id="journey-2-content-generation-workflow">Journey 2: Content Generation Workflow</h3>

<pre><code class="language-mermaid">stateDiagram-v2
    [*] --&gt; Input
    Input --&gt; Validation
    Validation --&gt; Processing
    Processing --&gt; Generation
    Generation --&gt; Review
    Review --&gt; Export
    Review --&gt; Regenerate
    Regenerate --&gt; Processing
    Export --&gt; [*]
    
    Validation --&gt; Error: Invalid Input
    Processing --&gt; Error: API Failure
    Generation --&gt; Error: Quality Issues
    Error --&gt; Support
    Support --&gt; Input: Retry
</code></pre>

<p><strong>Detailed Flow:</strong></p>

<ol>
  <li><strong>Content Input Stage</strong>
    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">interface</span> <span class="nx">ContentInput</span> <span class="p">{</span>
  <span class="nl">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">url</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">text</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">file</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">api</span><span class="dl">'</span><span class="p">;</span>
  <span class="nl">source</span><span class="p">:</span> <span class="kr">string</span> <span class="o">|</span> <span class="nx">File</span> <span class="o">|</span> <span class="nx">URL</span><span class="p">;</span>
  <span class="nl">metadata</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">title</span><span class="p">?:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">category</span><span class="p">?:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">tags</span><span class="p">?:</span> <span class="kr">string</span><span class="p">[];</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <ul>
      <li>User selects input method</li>
      <li>Provides source content</li>
      <li>Sets generation parameters</li>
      <li><strong>Validation</strong>: URL accessibility, file format, text length</li>
    </ul>
  </li>
  <li><strong>Processing Stage</strong>
    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">interface</span> <span class="nx">ProcessingState</span> <span class="p">{</span>
  <span class="nl">jobId</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">status</span><span class="p">:</span> <span class="dl">'</span><span class="s1">queued</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">processing</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">generating</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">complete</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">failed</span><span class="dl">'</span><span class="p">;</span>
  <span class="nl">progress</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span> <span class="c1">// 0-100</span>
  <span class="nl">estimatedTime</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span> <span class="c1">// seconds</span>
  <span class="nl">steps</span><span class="p">:</span> <span class="nx">ProcessingStep</span><span class="p">[];</span>
<span class="p">}</span>
   
<span class="kr">interface</span> <span class="nx">ProcessingStep</span> <span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">status</span><span class="p">:</span> <span class="dl">'</span><span class="s1">pending</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">running</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">complete</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">failed</span><span class="dl">'</span><span class="p">;</span>
  <span class="nl">duration</span><span class="p">?:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">output</span><span class="p">?:</span> <span class="kr">any</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <ul>
      <li>Content extraction</li>
      <li>Legal compliance check</li>
      <li>Chunking and preprocessing</li>
      <li><strong>Real-time updates</strong>: WebSocket connection for progress</li>
    </ul>
  </li>
  <li><strong>Generation Stage</strong>
    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">interface</span> <span class="nx">GenerationConfig</span> <span class="p">{</span>
  <span class="nl">model</span><span class="p">:</span> <span class="dl">'</span><span class="s1">gpt-4</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">claude-3</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">gemini-pro</span><span class="dl">'</span><span class="p">;</span>
  <span class="nl">temperature</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">maxTokens</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">outputFormat</span><span class="p">:</span> <span class="dl">'</span><span class="s1">quiz</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">blog</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">summary</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">script</span><span class="dl">'</span><span class="p">;</span>
  <span class="nl">style</span><span class="p">:</span> <span class="dl">'</span><span class="s1">formal</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">casual</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">academic</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">creative</span><span class="dl">'</span><span class="p">;</span>
  <span class="nl">language</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">customPrompt</span><span class="p">?:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <ul>
      <li>AI model selection</li>
      <li>Prompt engineering</li>
      <li>Multi-pass generation</li>
      <li>Quality scoring</li>
      <li><strong>Caching</strong>: Results cached for 7 days</li>
    </ul>
  </li>
  <li><strong>Review and Edit Stage</strong>
    <ul>
      <li>Preview generated content</li>
      <li>AI-powered suggestions</li>
      <li>Manual editing capability</li>
      <li>Version history</li>
      <li>Collaboration features (teams)</li>
      <li><strong>Auto-save</strong>: Every 30 seconds</li>
    </ul>
  </li>
  <li><strong>Export Stage</strong>
    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">interface</span> <span class="nx">ExportOptions</span> <span class="p">{</span>
  <span class="nl">format</span><span class="p">:</span> <span class="dl">'</span><span class="s1">json</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">markdown</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">html</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">pdf</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">docx</span><span class="dl">'</span><span class="p">;</span>
  <span class="nl">includes</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">metadata</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
    <span class="nl">sources</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
    <span class="nl">analytics</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nl">destination</span><span class="p">:</span> <span class="dl">'</span><span class="s1">download</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">email</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">api</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">integration</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>    </div>
    <ul>
      <li>Format selection</li>
      <li>Bulk export options</li>
      <li>Integration push (Zapier, Make, etc.)</li>
      <li><strong>Rate limiting</strong>: Max 100 exports per hour</li>
    </ul>
  </li>
</ol>

<h3 id="journey-3-developer-api-integration">Journey 3: Developer API Integration</h3>

<pre><code class="language-mermaid">sequenceDiagram
    participant Dev as Developer
    participant Docs as Documentation
    participant API as Harvest API
    participant SDK as TypeScript SDK
    participant App as Dev's Application
    
    Dev-&gt;&gt;Docs: Read API docs
    Dev-&gt;&gt;API: GET /api/keys/create
    API--&gt;&gt;Dev: API Key + Secret
    Dev-&gt;&gt;SDK: Install SDK
    Dev-&gt;&gt;SDK: Initialize client
    SDK-&gt;&gt;API: Validate credentials
    API--&gt;&gt;SDK: Token + Rate limits
    Dev-&gt;&gt;App: Integrate SDK
    App-&gt;&gt;SDK: Generate content
    SDK-&gt;&gt;API: POST /api/generate
    API--&gt;&gt;SDK: Job ID
    SDK-&gt;&gt;API: GET /api/jobs/{id}
    API--&gt;&gt;SDK: Content + Metadata
    SDK--&gt;&gt;App: Formatted response
</code></pre>

<p><strong>Implementation Steps:</strong></p>

<ol>
  <li><strong>Discovery and Documentation</strong>
    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// SDK Installation</span>
<span class="nx">npm</span> <span class="nx">install</span> <span class="p">@</span><span class="nd">harvestai</span><span class="sr">/sd</span><span class="err">k
</span>   
<span class="c1">// Quick Start</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">HarvestClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@harvestai/sdk</span><span class="dl">'</span><span class="p">;</span>
   
<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">HarvestClient</span><span class="p">({</span>
  <span class="na">apiKey</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">HARVEST_API_KEY</span><span class="p">,</span>
  <span class="na">apiSecret</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">HARVEST_API_SECRET</span><span class="p">,</span>
  <span class="na">environment</span><span class="p">:</span> <span class="dl">'</span><span class="s1">production</span><span class="dl">'</span> <span class="c1">// or 'sandbox'</span>
<span class="p">});</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Authentication Setup</strong>
    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">interface</span> <span class="nx">AuthConfig</span> <span class="p">{</span>
  <span class="nl">apiKey</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">apiSecret</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">options</span><span class="p">?:</span> <span class="p">{</span>
    <span class="na">timeout</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">retries</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">rateLimitHandling</span><span class="p">:</span> <span class="dl">'</span><span class="s1">queue</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">error</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">backoff</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Content Generation via API</strong>
    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Simple generation</span>
<span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">generate</span><span class="p">({</span>
  <span class="na">source</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://example.com/article</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">outputType</span><span class="p">:</span> <span class="dl">'</span><span class="s1">quiz</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">questions</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="na">difficulty</span><span class="p">:</span> <span class="dl">'</span><span class="s1">medium</span><span class="dl">'</span>
<span class="p">});</span>
   
<span class="c1">// Advanced with webhooks</span>
<span class="kd">const</span> <span class="nx">job</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">generateAsync</span><span class="p">({</span>
  <span class="na">source</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">text</span><span class="dl">'</span><span class="p">,</span> <span class="na">content</span><span class="p">:</span> <span class="dl">'</span><span class="s1">...</span><span class="dl">'</span> <span class="p">},</span>
  <span class="na">outputType</span><span class="p">:</span> <span class="dl">'</span><span class="s1">blog</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">config</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">tone</span><span class="p">:</span> <span class="dl">'</span><span class="s1">professional</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">length</span><span class="p">:</span> <span class="mi">1500</span><span class="p">,</span>
    <span class="na">keywords</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">AI</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">automation</span><span class="dl">'</span><span class="p">],</span>
    <span class="na">webhook</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">url</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://myapp.com/webhook</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">events</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">completed</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">failed</span><span class="dl">'</span><span class="p">],</span>
      <span class="na">secret</span><span class="p">:</span> <span class="dl">'</span><span class="s1">webhook_secret</span><span class="dl">'</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Webhook Integration</strong>
    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">interface</span> <span class="nx">WebhookPayload</span> <span class="p">{</span>
  <span class="nl">event</span><span class="p">:</span> <span class="dl">'</span><span class="s1">job.completed</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">job.failed</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">job.progress</span><span class="dl">'</span><span class="p">;</span>
  <span class="nl">jobId</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">timestamp</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">status</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">result</span><span class="p">?:</span> <span class="kr">any</span><span class="p">;</span>
    <span class="nl">error</span><span class="p">?:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">metadata</span><span class="p">:</span> <span class="nb">Record</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">,</span> <span class="kr">any</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nl">signature</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span> <span class="c1">// HMAC-SHA256</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Rate Limiting and Quotas</strong>
    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">interface</span> <span class="nx">RateLimits</span> <span class="p">{</span>
  <span class="nl">requests</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">limit</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">remaining</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">reset</span><span class="p">:</span> <span class="nb">Date</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nl">tokens</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">limit</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">used</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">reset</span><span class="p">:</span> <span class="nb">Date</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nl">concurrent</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">limit</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">active</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="journey-4-enterprise-bulk-operations">Journey 4: Enterprise Bulk Operations</h3>

<p><strong>Workflow for generating 1000+ pieces of content:</strong></p>

<ol>
  <li><strong>Bulk Upload Preparation</strong>
    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">interface</span> <span class="nx">BulkJob</span> <span class="p">{</span>
  <span class="nl">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">items</span><span class="p">:</span> <span class="nx">BulkItem</span><span class="p">[];</span>
  <span class="nl">config</span><span class="p">:</span> <span class="nx">BulkConfig</span><span class="p">;</span>
  <span class="nl">status</span><span class="p">:</span> <span class="nx">BulkStatus</span><span class="p">;</span>
  <span class="nl">results</span><span class="p">:</span> <span class="nx">BulkResults</span><span class="p">;</span>
<span class="p">}</span>
   
<span class="kr">interface</span> <span class="nx">BulkItem</span> <span class="p">{</span>
  <span class="nl">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">source</span><span class="p">:</span> <span class="nx">ContentInput</span><span class="p">;</span>
  <span class="nl">config</span><span class="p">?:</span> <span class="nb">Partial</span><span class="o">&lt;</span><span class="nx">GenerationConfig</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="nl">priority</span><span class="p">:</span> <span class="dl">'</span><span class="s1">high</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">normal</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">low</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Processing Pipeline</strong>
    <ul>
      <li>CSV/Excel import with validation</li>
      <li>Batch size optimization (50-100 items)</li>
      <li>Parallel processing with rate limiting</li>
      <li>Progress tracking and partial results</li>
      <li>Error recovery and retry logic</li>
    </ul>
  </li>
  <li><strong>Quality Assurance</strong>
    <ul>
      <li>Automated quality scoring</li>
      <li>Sampling for manual review</li>
      <li>Brand voice consistency check</li>
      <li>Plagiarism detection</li>
      <li>Compliance validation</li>
    </ul>
  </li>
  <li><strong>Delivery and Reporting</strong>
    <ul>
      <li>Bulk download in multiple formats</li>
      <li>Email delivery with zip archives</li>
      <li>API webhook notifications</li>
      <li>Analytics dashboard</li>
      <li>Cost breakdown report</li>
    </ul>
  </li>
</ol>

<h2 id="state-transitions">State Transitions</h2>

<h3 id="user-account-states">User Account States</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">enum</span> <span class="nx">UserState</span> <span class="p">{</span>
  <span class="nx">PENDING_VERIFICATION</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">pending_verification</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">VERIFIED</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">verified</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">ACTIVE</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">active</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">SUSPENDED</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">suspended</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">DELETED</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">deleted</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">StateTransition</span> <span class="p">{</span>
  <span class="nl">from</span><span class="p">:</span> <span class="nx">UserState</span><span class="p">;</span>
  <span class="nl">to</span><span class="p">:</span> <span class="nx">UserState</span><span class="p">;</span>
  <span class="nl">trigger</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">conditions</span><span class="p">?:</span> <span class="kr">string</span><span class="p">[];</span>
  <span class="nl">sideEffects</span><span class="p">?:</span> <span class="kr">string</span><span class="p">[];</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">transitions</span><span class="p">:</span> <span class="nx">StateTransition</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="na">from</span><span class="p">:</span> <span class="nx">UserState</span><span class="p">.</span><span class="nx">PENDING_VERIFICATION</span><span class="p">,</span>
    <span class="na">to</span><span class="p">:</span> <span class="nx">UserState</span><span class="p">.</span><span class="nx">VERIFIED</span><span class="p">,</span>
    <span class="na">trigger</span><span class="p">:</span> <span class="dl">'</span><span class="s1">email_verified</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">sideEffects</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">send_welcome_email</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">create_default_workspace</span><span class="dl">'</span><span class="p">]</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">from</span><span class="p">:</span> <span class="nx">UserState</span><span class="p">.</span><span class="nx">VERIFIED</span><span class="p">,</span>
    <span class="na">to</span><span class="p">:</span> <span class="nx">UserState</span><span class="p">.</span><span class="nx">ACTIVE</span><span class="p">,</span>
    <span class="na">trigger</span><span class="p">:</span> <span class="dl">'</span><span class="s1">first_generation_complete</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">sideEffects</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">track_activation</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">unlock_features</span><span class="dl">'</span><span class="p">]</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">from</span><span class="p">:</span> <span class="nx">UserState</span><span class="p">.</span><span class="nx">ACTIVE</span><span class="p">,</span>
    <span class="na">to</span><span class="p">:</span> <span class="nx">UserState</span><span class="p">.</span><span class="nx">SUSPENDED</span><span class="p">,</span>
    <span class="na">trigger</span><span class="p">:</span> <span class="dl">'</span><span class="s1">violation_detected</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">conditions</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">severity_high</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">multiple_violations</span><span class="dl">'</span><span class="p">],</span>
    <span class="na">sideEffects</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">notify_user</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">pause_jobs</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">alert_support</span><span class="dl">'</span><span class="p">]</span>
  <span class="p">}</span>
<span class="p">];</span>
</code></pre></div></div>

<h3 id="job-processing-states">Job Processing States</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">enum</span> <span class="nx">JobState</span> <span class="p">{</span>
  <span class="nx">CREATED</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">created</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">VALIDATED</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">validated</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">QUEUED</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">queued</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">PROCESSING</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">processing</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">GENERATING</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">generating</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">POST_PROCESSING</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">post_processing</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">COMPLETE</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">complete</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">FAILED</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">failed</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">CANCELLED</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">cancelled</span><span class="dl">'</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">JobStateMachine</span> <span class="p">{</span>
  <span class="nl">currentState</span><span class="p">:</span> <span class="nx">JobState</span><span class="p">;</span>
  <span class="nl">history</span><span class="p">:</span> <span class="nx">StateChange</span><span class="p">[];</span>
  <span class="nl">context</span><span class="p">:</span> <span class="nx">JobContext</span><span class="p">;</span>
  
  <span class="nx">transition</span><span class="p">(</span><span class="nx">event</span><span class="p">:</span> <span class="nx">JobEvent</span><span class="p">):</span> <span class="k">void</span><span class="p">;</span>
  <span class="nx">canTransition</span><span class="p">(</span><span class="nx">to</span><span class="p">:</span> <span class="nx">JobState</span><span class="p">):</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nx">rollback</span><span class="p">():</span> <span class="k">void</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="backend-orchestration">Backend Orchestration</h2>

<h3 id="request-flow-architecture">Request Flow Architecture</h3>
<pre><code class="language-mermaid">graph TB
    Client[Client App] --&gt; CDN[CDN/Cache]
    CDN --&gt; Gateway[API Gateway]
    Gateway --&gt; Auth[Auth Service]
    Gateway --&gt; RateLimit[Rate Limiter]
    
    RateLimit --&gt; Queue[Job Queue]
    Queue --&gt; Orchestrator[Job Orchestrator]
    
    Orchestrator --&gt; Extractor[Content Extractor]
    Orchestrator --&gt; Validator[Legal Validator]
    Orchestrator --&gt; Generator[AI Generator]
    Orchestrator --&gt; PostProc[Post Processor]
    
    Generator --&gt; OpenAI[OpenAI API]
    Generator --&gt; Claude[Claude API]
    Generator --&gt; Gemini[Gemini API]
    
    PostProc --&gt; Storage[Object Storage]
    PostProc --&gt; Database[(PostgreSQL)]
    PostProc --&gt; Cache[(Redis)]
    
    Storage --&gt; Webhook[Webhook Service]
    Webhook --&gt; Client
</code></pre>

<h3 id="service-components">Service Components</h3>

<ol>
  <li><strong>API Gateway (Kong/Express Gateway)</strong>
    <ul>
      <li>Request routing</li>
      <li>Authentication</li>
      <li>Rate limiting</li>
      <li>Request/response transformation</li>
      <li>Logging and analytics</li>
    </ul>
  </li>
  <li><strong>Job Orchestrator (BullMQ/Temporal)</strong>
    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">JobOrchestrator</span> <span class="p">{</span>
  <span class="k">async</span> <span class="nx">processJob</span><span class="p">(</span><span class="nx">job</span><span class="p">:</span> <span class="nx">Job</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">JobResult</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">pipeline</span> <span class="o">=</span> <span class="p">[</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">validate</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">extractContent</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">checkCompliance</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">generateContent</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">postProcess</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">deliverResults</span>
    <span class="p">];</span>
       
    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">step</span> <span class="k">of</span> <span class="nx">pipeline</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="nx">job</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">step</span><span class="p">(</span><span class="nx">job</span><span class="p">);</span>
        <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">updateProgress</span><span class="p">(</span><span class="nx">job</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleError</span><span class="p">(</span><span class="nx">job</span><span class="p">,</span> <span class="nx">error</span><span class="p">,</span> <span class="nx">step</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
        <span class="k">throw</span> <span class="nx">error</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
       
    <span class="k">return</span> <span class="nx">job</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Content Extractor Service</strong>
    <ul>
      <li>Web scraping (Puppeteer/Playwright)</li>
      <li>PDF parsing (pdf-parse)</li>
      <li>Video transcription (Whisper API)</li>
      <li>Image OCR (Tesseract)</li>
      <li>Markdown/HTML parsing</li>
    </ul>
  </li>
  <li><strong>AI Generator Service</strong>
    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">AIGeneratorService</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">strategies</span><span class="p">:</span> <span class="nb">Map</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">,</span> <span class="nx">GenerationStrategy</span><span class="o">&gt;</span><span class="p">;</span>
     
  <span class="k">async</span> <span class="nx">generate</span><span class="p">(</span><span class="nx">config</span><span class="p">:</span> <span class="nx">GenerationConfig</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Content</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">strategy</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">selectStrategy</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">provider</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">selectProvider</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>
       
    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">strategy</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">provider</span><span class="p">,</span> <span class="nx">config</span><span class="p">);</span>
      <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">cacheResult</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">shouldRetry</span><span class="p">(</span><span class="nx">error</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">retryWithFallback</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">throw</span> <span class="nx">error</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
     
  <span class="k">private</span> <span class="nx">selectProvider</span><span class="p">(</span><span class="nx">config</span><span class="p">:</span> <span class="nx">GenerationConfig</span><span class="p">):</span> <span class="nx">AIProvider</span> <span class="p">{</span>
    <span class="c1">// Load balancing and failover logic</span>
    <span class="kd">const</span> <span class="nx">providers</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getHealthyProviders</span><span class="p">();</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">leastLoaded</span><span class="p">(</span><span class="nx">providers</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li><strong>Caching Layer</strong>
    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">CacheManager</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">l1Cache</span><span class="p">:</span> <span class="nb">Map</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">,</span> <span class="kr">any</span><span class="o">&gt;</span><span class="p">;</span> <span class="c1">// In-memory</span>
  <span class="k">private</span> <span class="nx">l2Cache</span><span class="p">:</span> <span class="nx">Redis</span><span class="p">;</span> <span class="c1">// Redis</span>
  <span class="k">private</span> <span class="nx">l3Cache</span><span class="p">:</span> <span class="nx">CDN</span><span class="p">;</span> <span class="c1">// CloudFlare</span>
     
  <span class="k">async</span> <span class="kd">get</span><span class="p">(</span><span class="nx">key</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="kr">any</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="c1">// L1 Check</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">l1Cache</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">key</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">l1Cache</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
    <span class="p">}</span>
       
    <span class="c1">// L2 Check</span>
    <span class="kd">const</span> <span class="nx">l2Result</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">l2Cache</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">l2Result</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">l1Cache</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">l2Result</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">l2Result</span><span class="p">;</span>
    <span class="p">}</span>
       
    <span class="c1">// L3 Check</span>
    <span class="kd">const</span> <span class="nx">l3Result</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">l3Cache</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">l3Result</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">promote</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">l3Result</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">l3Result</span><span class="p">;</span>
    <span class="p">}</span>
       
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="error-handling">Error Handling</h2>

<h3 id="error-categories-and-recovery">Error Categories and Recovery</h3>

<ol>
  <li><strong>Input Errors</strong>
    <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">InputError</span> <span class="kd">extends</span> <span class="nx">BaseError</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">details</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="dl">'</span><span class="s1">INPUT_ERROR</span><span class="dl">'</span><span class="p">,</span> <span class="mi">400</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">details</span> <span class="o">=</span> <span class="nx">details</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">recoverable</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">userMessage</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getUserFriendlyMessage</span><span class="p">();</span>
  <span class="p">}</span>
     
  <span class="nx">getUserFriendlyMessage</span><span class="p">():</span> <span class="kr">string</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">messages</span> <span class="o">=</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">INVALID_URL</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">The URL provided cannot be accessed. Please check and try again.</span><span class="dl">'</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">FILE_TOO_LARGE</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">File exceeds 10MB limit. Please use a smaller file.</span><span class="dl">'</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">UNSUPPORTED_FORMAT</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">This file format is not supported. Try PDF, DOCX, or TXT.</span><span class="dl">'</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">messages</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">details</span><span class="p">.</span><span class="nx">code</span><span class="p">]</span> <span class="o">||</span> <span class="dl">'</span><span class="s1">Invalid input provided.</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li><strong>API Errors</strong>
    <ul>
      <li>Rate limiting → Queue and retry</li>
      <li>Token limits → Split and batch</li>
      <li>Service down → Fallback provider</li>
      <li>Timeout → Increase timeout and retry</li>
    </ul>
  </li>
  <li><strong>System Errors</strong>
    <ul>
      <li>Database connection → Circuit breaker</li>
      <li>Memory overflow → Restart worker</li>
      <li>Disk full → Alert and cleanup</li>
      <li>Network issues → Exponential backoff</li>
    </ul>
  </li>
</ol>

<h3 id="error-recovery-flow">Error Recovery Flow</h3>
<pre><code class="language-mermaid">graph LR
    Error[Error Detected] --&gt; Classify[Classify Error]
    Classify --&gt; Recoverable{Recoverable?}
    Recoverable --&gt;|Yes| Strategy[Select Recovery]
    Recoverable --&gt;|No| Alert[Alert Team]
    Strategy --&gt; Retry[Retry Logic]
    Retry --&gt; Success{Success?}
    Success --&gt;|Yes| Continue[Continue Flow]
    Success --&gt;|No| Fallback[Fallback Option]
    Fallback --&gt; Manual[Manual Intervention]
    Alert --&gt; Manual
</code></pre>

<h2 id="success-metrics">Success Metrics</h2>

<h3 id="key-performance-indicators-kpis">Key Performance Indicators (KPIs)</h3>

<ol>
  <li><strong>Activation Metrics</strong>
    <ul>
      <li>Time to first generation: &lt; 5 minutes</li>
      <li>Onboarding completion rate: &gt; 80%</li>
      <li>Day 1 retention: &gt; 70%</li>
      <li>Week 1 retention: &gt; 50%</li>
    </ul>
  </li>
  <li><strong>Usage Metrics</strong>
    <ul>
      <li>Daily active users (DAU)</li>
      <li>Generations per user per day</li>
      <li>API calls per developer</li>
      <li>Content quality score (user rated)</li>
    </ul>
  </li>
  <li><strong>Performance Metrics</strong>
    <ul>
      <li>P50 generation time: &lt; 5 seconds</li>
      <li>P95 generation time: &lt; 15 seconds</li>
      <li>P99 generation time: &lt; 30 seconds</li>
      <li>API uptime: &gt; 99.9%</li>
      <li>Error rate: &lt; 0.1%</li>
    </ul>
  </li>
  <li><strong>Business Metrics</strong>
    <ul>
      <li>Free to paid conversion: &gt; 10%</li>
      <li>Monthly recurring revenue (MRR)</li>
      <li>Customer lifetime value (CLV)</li>
      <li>Customer acquisition cost (CAC)</li>
      <li>Net promoter score (NPS): &gt; 50</li>
    </ul>
  </li>
</ol>

<h3 id="monitoring-dashboard">Monitoring Dashboard</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">interface</span> <span class="nx">MetricsDashboard</span> <span class="p">{</span>
  <span class="nl">realtime</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">activeUsers</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">activeJobs</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">apiRequests</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">errorRate</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">avgLatency</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="p">};</span>
  
  <span class="nl">hourly</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">generations</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">newUsers</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">revenue</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">tokenUsage</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">cacheHitRate</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="p">};</span>
  
  <span class="nl">daily</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">dau</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">conversions</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">churn</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">supportTickets</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
    <span class="nl">systemHealth</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="implementation-checklist">Implementation Checklist</h2>

<h3 id="phase-1-foundation-week-1">Phase 1: Foundation (Week 1)</h3>
<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />User authentication system</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Basic job queue setup</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Single AI provider integration</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Simple web scraping</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Basic error handling</li>
</ul>

<h3 id="phase-2-core-features-week-2">Phase 2: Core Features (Week 2)</h3>
<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Multiple AI providers</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />BYOK support</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Content extraction pipeline</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Job progress tracking</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Basic caching layer</li>
</ul>

<h3 id="phase-3-enhancement-week-3">Phase 3: Enhancement (Week 3)</h3>
<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Advanced error recovery</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Rate limiting</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Webhook system</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Quality scoring</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Analytics tracking</li>
</ul>

<h3 id="phase-4-scale-week-4">Phase 4: Scale (Week 4)</h3>
<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Load balancing</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Multi-tier caching</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Bulk operations</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />API SDK</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Performance optimization</li>
</ul>

<h3 id="phase-5-polish-week-5-6">Phase 5: Polish (Week 5-6)</h3>
<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />A/B testing framework</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Advanced analytics</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Enterprise features</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Documentation</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Launch preparation</li>
</ul>

<h2 id="conclusion">Conclusion</h2>

<p>This comprehensive user journey documentation provides the foundation for building a robust, scalable, and user-friendly content generation platform. Each journey has been designed with clear state transitions, error handling, and success metrics to ensure a smooth user experience and maintainable system architecture.</p>

<p>Regular updates to these journeys based on user feedback and analytics will ensure the platform continues to meet user needs and business objectives.</p>



<div style="margin-top: 3rem; padding: 1rem; background: #f6f8fa; border-radius: 5px;">
  <p style="margin: 0; color: #666; font-size: 0.9em;">
    📁 Source: Harvest.ai / USER_JOURNEYS.md
  </p>
</div>

  </main>

  <footer>
    <p>&copy; 2024 NatureQuest. Documentation Hub v1.0.0</p>
  </footer>
</body>
</html>
