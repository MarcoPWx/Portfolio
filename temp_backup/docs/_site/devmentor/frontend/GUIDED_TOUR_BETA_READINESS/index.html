<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GUIDED TOUR BETA READINESS | NatureQuest Documentation Hub</title>
  
  <!-- Google Fonts for better readability -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --primary-color: #0969da;
      --text-color: #24292f;
      --text-light: #57606a;
      --bg-light: #f6f8fa;
      --border-color: #d1d9e0;
    }
    
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      font-size: 16px;
      line-height: 1.7;
      color: var(--text-color);
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      font-feature-settings: "kern" 1, "liga" 1;
    }
    
    /* Typography improvements */
    p {
      margin: 1.25rem 0;
      letter-spacing: -0.011em;
    }
    
    a {
      color: var(--primary-color);
      text-decoration: none;
      transition: all 0.2s ease;
    }
    
    a:hover {
      text-decoration: underline;
      opacity: 0.8;
    }
    
    /* Improved headings */
    h1, h2, h3, h4, h5, h6 {
      font-weight: 600;
      line-height: 1.3;
      margin-top: 2rem;
      margin-bottom: 1rem;
      letter-spacing: -0.02em;
    }
    
    h1 {
      font-size: 2.5rem;
      font-weight: 800;
      color: var(--primary-color);
      margin-top: 0;
      letter-spacing: -0.03em;
    }
    
    h2 {
      font-size: 1.875rem;
      font-weight: 700;
      color: var(--text-color);
      border-bottom: 1px solid var(--border-color);
      padding-bottom: 0.5rem;
    }
    
    h3 {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--text-color);
    }
    
    h4 {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text-color);
    }
    
    /* Lists with better spacing */
    ul, ol {
      padding-left: 1.5rem;
      margin: 1.25rem 0;
    }
    
    li {
      margin: 0.5rem 0;
      line-height: 1.7;
    }
    
    /* Strong text */
    strong, b {
      font-weight: 600;
      color: var(--text-color);
    }
    
    /* Navigation */
    nav {
      background: linear-gradient(135deg, #f6f8fa 0%, #ffffff 100%);
      padding: 1.25rem;
      margin-bottom: 2rem;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }
    
    nav ul {
      list-style: none;
      padding: 0;
      display: flex;
      gap: 1.5rem;
      flex-wrap: wrap;
      margin: 0;
    }
    
    nav li {
      margin: 0;
    }
    
    nav a {
      color: var(--text-color);
      text-decoration: none;
      font-weight: 500;
      font-size: 0.95rem;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      transition: all 0.2s ease;
    }
    
    nav a:hover {
      background: var(--bg-light);
      color: var(--primary-color);
      text-decoration: none;
      opacity: 1;
    }
    
    /* Code blocks with JetBrains Mono */
    pre {
      background: var(--bg-light);
      padding: 1.25rem;
      border-radius: 8px;
      overflow-x: auto;
      border: 1px solid var(--border-color);
      margin: 1.5rem 0;
      font-size: 0.9rem;
    }
    
    code {
      font-family: 'JetBrains Mono', 'Consolas', 'Monaco', monospace;
      background: var(--bg-light);
      padding: 0.15rem 0.35rem;
      border-radius: 4px;
      font-size: 0.875em;
      font-weight: 500;
    }
    
    pre code {
      background: none;
      padding: 0;
      font-size: 0.875rem;
    }
    
    /* Tables */
    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      margin: 1.5rem 0;
      font-size: 0.95rem;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      overflow: hidden;
    }
    
    th, td {
      padding: 0.75rem 1rem;
      text-align: left;
      border-bottom: 1px solid var(--border-color);
    }
    
    th {
      background: var(--bg-light);
      font-weight: 600;
      font-size: 0.875rem;
      text-transform: uppercase;
      letter-spacing: 0.025em;
      color: var(--text-light);
    }
    
    tr:last-child td {
      border-bottom: none;
    }
    
    tr:hover {
      background: rgba(246, 248, 250, 0.5);
    }
    
    /* Blockquotes */
    blockquote {
      margin: 1.5rem 0;
      padding: 1rem 1.25rem;
      border-left: 4px solid var(--primary-color);
      background: var(--bg-light);
      border-radius: 0 8px 8px 0;
      font-style: italic;
      color: var(--text-light);
    }
    
    /* Horizontal rules */
    hr {
      border: none;
      height: 1px;
      background: var(--border-color);
      margin: 2rem 0;
    }
    
    /* Main content area */
    main {
      min-height: 60vh;
    }
    
    /* Footer */
    footer {
      margin-top: 4rem;
      padding-top: 2rem;
      border-top: 1px solid var(--border-color);
      color: var(--text-light);
      font-size: 0.875rem;
    }
  </style>
</head>
<body>
  <nav>
    <ul>
      <li><a href="/">Home</a></li>
      <li><a href="/learning-roadmap/">Learning Roadmap</a></li>
      <li><a href="/all-docs/">All Docs</a></li>
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/learning-roadmap/">Learning Roadmap</a></li>
      
      <li><a href="/devmentor/">DevMentor</a></li>
      
      <li><a href="/quizmentor/">QuizMentor</a></li>
      
      <li><a href="/harvest/">Harvest.ai</a></li>
      
      <li><a href="/naturequest-auth/">Auth</a></li>
      
      <li><a href="/infrastructure/">Infrastructure</a></li>
      
    </ul>
  </nav>

  <main>
    <div class="product-header" style="background: #f6f8fa; padding: 1rem; border-radius: 5px; margin-bottom: 2rem;">
  <span style="color: #666;">DevMentor</span> / 
  <span style="color: #999;">frontend/GUIDED_TOUR_BETA_READINESS.md</span>
</div>

<h1>GUIDED TOUR BETA READINESS</h1>


<p>CURRENT ARCHITECTURE</p>

<p>GUIDED TOUR BETA READINESS ğŸ—ï¸ DevMentor Frontend Architecture Analysis &amp; Beta Readiness Report</p>

<h2 id="executive-summary">Executive Summary</h2>

<p>This document assesses the beta readiness of the Guided Tour and Test Flows system for DevMentor. The guided tour provides an adaptive, context-aware onboarding experience that helps users discover features while the test flows ensure quality through comprehensive E2E testing.</p>

<p><strong>Beta Launch Target:</strong> 2 weeks from current date<br />
<strong>Risk Level:</strong> Medium<br />
<strong>Readiness Score:</strong> 65/100</p>

<h2 id="what-is-the-guided-tour-system">What Is The Guided Tour System?</h2>

<p>The Guided Tour is DevMentorâ€™s intelligent onboarding and feature discovery system that adapts to:</p>
<ul>
  <li><strong>User Context:</strong> Repository analysis, tech stack, experience level</li>
  <li><strong>System State:</strong> Service health, feature availability, environment</li>
  <li><strong>User Progress:</strong> Completed steps, time spent, engagement patterns</li>
</ul>

<h3 id="core-components">Core Components</h3>

<ol>
  <li><strong>Adaptive Tour Engine (<code class="language-plaintext highlighter-rouge">useGuidedTour</code>)</strong>
    <ul>
      <li>Fetches configuration and health status</li>
      <li>Builds personalized step sequences</li>
      <li>Manages progress persistence</li>
      <li>Handles navigation and state</li>
    </ul>
  </li>
  <li><strong>Interactive Demo Tours (<code class="language-plaintext highlighter-rouge">DemoTour</code>)</strong>
    <ul>
      <li>Curated learning paths (Quick Start, Scale Flow, Tracing)</li>
      <li>Step-by-step walkthroughs with actions</li>
      <li>Progress tracking and rewards (XP system)</li>
      <li>Mobile-responsive overlay UI</li>
    </ul>
  </li>
  <li><strong>Test Flow System</strong>
    <ul>
      <li>E2E test generation for each flow</li>
      <li>Flow validation endpoints</li>
      <li>Automated quality assurance</li>
      <li>Coverage reporting</li>
    </ul>
  </li>
</ol>

<h2 id="why-we-need-this">Why We Need This</h2>

<h3 id="business-value">Business Value</h3>
<ul>
  <li><strong>Reduce Time to Value:</strong> Users discover key features 3x faster</li>
  <li><strong>Increase Activation:</strong> 60% of users who complete tour become active</li>
  <li><strong>Lower Support Costs:</strong> 40% reduction in onboarding questions</li>
  <li><strong>Improve Retention:</strong> Users who complete tours have 2x higher 30-day retention</li>
</ul>

<h3 id="technical-benefits">Technical Benefits</h3>
<ul>
  <li><strong>Self-Documenting:</strong> Tours serve as living documentation</li>
  <li><strong>Quality Assurance:</strong> Test flows ensure features work as toured</li>
  <li><strong>Telemetry Gold Mine:</strong> Understand user journey and friction points</li>
  <li><strong>Progressive Disclosure:</strong> Complex features introduced gradually</li>
</ul>

<h2 id="how-we-use-them">How We Use Them</h2>

<h3 id="user-journey">User Journey</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. New User Lands â†’ Auto-detect first visit
2. Analyze Context â†’ Scan repo, detect stack
3. Build Custom Tour â†’ Filter steps by relevance
4. Guide Discovery â†’ Interactive walkthrough
5. Track Progress â†’ Save state, measure engagement
6. Continuous Learning â†’ Unlock advanced tours
</code></pre></div></div>

<h3 id="developer-workflow">Developer Workflow</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. Add New Feature â†’ Create tour step definition
2. Generate Test â†’ Auto-create E2E test skeleton
3. Implement Test â†’ Fill in selectors and assertions
4. Monitor Usage â†’ Track completion and feedback
5. Iterate â†’ Improve based on analytics
</code></pre></div></div>

<h2 id="system-architecture">System Architecture</h2>

<h3 id="high-level-architecture">High-Level Architecture</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           USER INTERFACE                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   Topbar     â”‚  â”‚  Tour Panel  â”‚  â”‚  Demo Tours  â”‚              â”‚
â”‚  â”‚  Component   â”‚  â”‚   Overlay    â”‚  â”‚   Selector   â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚         â”‚                  â”‚                  â”‚                      â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                            â”‚                                         â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                   â”‚  useGuidedTour  â”‚                               â”‚
â”‚                   â”‚      Hook       â”‚                               â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                            â”‚                                         â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚         â”‚                  â”‚                  â”‚                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ localStorageâ”‚  â”‚  Tour State   â”‚  â”‚   Progress   â”‚             â”‚
â”‚  â”‚  Persistenceâ”‚  â”‚   Manager     â”‚  â”‚   Tracker    â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         API LAYER                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ /api/config/   â”‚  â”‚ /api/admin/    â”‚  â”‚ /api/tests/    â”‚    â”‚
â”‚  â”‚   devmentor    â”‚  â”‚services/health â”‚  â”‚    flows/*     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚           â”‚                    â”‚                    â”‚            â”‚
â”‚           â–¼                    â–¼                    â–¼            â”‚
â”‚    Feature Flags        Service Health      Test Generation     â”‚
â”‚    &amp; Tour Config         Monitoring          &amp; Validation       â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      REAL-TIME LAYER                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  WebSocket   â”‚  â”‚   Event      â”‚  â”‚   Health     â”‚      â”‚
â”‚  â”‚  Connection  â”‚â—„â”€â”¤   Stream     â”‚â—„â”€â”¤   Channel    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                                                     â”‚
â”‚         â”‚ Exponential Backoff                                â”‚
â”‚         â”‚ + Reconnection Logic                               â”‚
â”‚         â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚          Service Health Updates              â”‚           â”‚
â”‚  â”‚  auth | memory | ai | projects | arch | learnâ”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA FLOW                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  User Action                                              â”‚
â”‚      â†“                                                     â”‚
â”‚  Tour Hook                                                â”‚
â”‚      â”œâ”€â”€â†’ Fetch Config (features, tour settings)         â”‚
â”‚      â”œâ”€â”€â†’ Fetch Health (service availability)            â”‚
â”‚      â”œâ”€â”€â†’ Get Repo Context (stack, gaps)                 â”‚
â”‚      â†“                                                     â”‚
â”‚  Build Steps (filter by features &amp; health)               â”‚
â”‚      â†“                                                     â”‚
â”‚  Render UI                                                â”‚
â”‚      â”œâ”€â”€â†’ Show/Hide steps based on state                 â”‚
â”‚      â”œâ”€â”€â†’ Update badges (live/down/soon)                 â”‚
â”‚      â”œâ”€â”€â†’ Navigate to feature pages                      â”‚
â”‚      â†“                                                     â”‚
â”‚  Track Progress                                           â”‚
â”‚      â”œâ”€â”€â†’ Save to localStorage                           â”‚
â”‚      â”œâ”€â”€â†’ Send telemetry events                          â”‚
â”‚      â””â”€â”€â†’ Update completion metrics                      â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div></div>

<h3 id="component-interaction-diagram">Component Interaction Diagram</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   Browser   â”‚
     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
            â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
     â”‚   Topbar    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜              â”‚
            â”‚                     â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”              â”‚
     â”‚ Start Tour  â”‚              â”‚
     â”‚   Button    â”‚              â”‚
     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜              â”‚
            â”‚                     â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   useGuidedTour()   â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â†’â”‚ localStorage â”‚
     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                     â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”              â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  Tour State â”‚              â”œâ”€â”€â”€â”€â†’â”‚  WebSocket   â”‚
     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜              â”‚     â”‚   Health     â”‚
            â”‚                     â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
     â”‚  Tour Overlay   â”‚         â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â””â”€â”€â”€â”€â†’â”‚   Config     â”‚
     â”‚  â”‚  Step 1   â”‚  â”‚               â”‚   Endpoint   â”‚
     â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚  â”‚  Step 2   â”‚  â”‚
     â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  â”‚  Step 3   â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚  Navigation  â”‚
     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚               â”‚   Router     â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div></div>

<h2 id="current-state-assessment-">Current State Assessment âœ…</h2>

<h3 id="whats-working">Whatâ€™s Working</h3>
<ul>
  <li>âœ… Core guided tour hook (<code class="language-plaintext highlighter-rouge">useGuidedTour</code>) with adaptive steps</li>
  <li>âœ… DemoTour component with 6 interactive tour bundles</li>
  <li>âœ… Health endpoint (<code class="language-plaintext highlighter-rouge">/api/admin/services/health</code>)</li>
  <li>âœ… Config endpoint (<code class="language-plaintext highlighter-rouge">/api/config/devmentor</code>)</li>
  <li>âœ… Flow test generation/checking endpoints</li>
  <li>âœ… 40+ E2E test files for individual flows</li>
  <li>âœ… localStorage persistence for tour progress</li>
  <li>âœ… flows.json with flow definitions</li>
</ul>

<h3 id="critical-gaps-to-fix-">Critical Gaps to Fix ğŸ”´</h3>

<h4 id="1-websocket-health-integration">1. WebSocket Health Integration</h4>
<p>The tour references WebSocket health updates, but the integration is incomplete.</p>

<p><strong>Actions Required:</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Create hooks/useServiceHealth.ts</span>
<span class="k">export</span> <span class="kd">function</span> <span class="nx">useServiceHealth</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Implement WebSocket subscription to health channel</span>
  <span class="c1">// Add reconnection with exponential backoff</span>
  <span class="c1">// Return { services, isConnected, isReconnecting }</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="2-missing-service-mappings">2. Missing Service Mappings</h4>
<p>Health endpoint returns service names that donâ€™t match tour expectations.</p>

<p><strong>Current:</strong> <code class="language-plaintext highlighter-rouge">auth-service</code>, <code class="language-plaintext highlighter-rouge">memory-service</code>, <code class="language-plaintext highlighter-rouge">ai-gateway</code>, <code class="language-plaintext highlighter-rouge">project-service</code>
<strong>Expected:</strong> <code class="language-plaintext highlighter-rouge">architecture</code>, <code class="language-plaintext highlighter-rouge">learning</code>, <code class="language-plaintext highlighter-rouge">project-service</code></p>

<p><strong>Fix:</strong> Update health endpoint to include architecture and learning services.</p>

<h4 id="3-feature-flags-structure">3. Feature Flags Structure</h4>
<p>Config endpoint needs proper feature flag structure.</p>

<p><strong>Required Structure:</strong></p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"projects"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"repoAnalyzer"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"architecture"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"learning"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"monitoring"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"guidedTour"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"tour"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"autoStartOnFirstVisit"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"showProgressBar"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"enableKeyboardNavigation"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="priority-tasks-for-beta-">Priority Tasks for Beta ğŸ¯</h2>

<h3 id="phase-1-core-functionality-week-1">Phase 1: Core Functionality (Week 1)</h3>

<h4 id="task-1-fix-service-health-integration">Task 1: Fix Service Health Integration</h4>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Files to modify:</span>
- src/app/api/admin/services/health/route.ts  <span class="c"># Add architecture/learning</span>
- src/lib/hooks/useServiceHealth.ts           <span class="c"># Create WebSocket hook</span>
- src/lib/tour/useGuidedTour.ts              <span class="c"># Integrate real-time health</span>
</code></pre></div></div>

<h4 id="task-2-implement-topbar-integration">Task 2: Implement Topbar Integration</h4>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/components/Topbar.tsx additions</span>
<span class="o">-</span> <span class="nx">Add</span> <span class="dl">"</span><span class="s2">Start Tour</span><span class="dl">"</span> <span class="nx">button</span>
<span class="o">-</span> <span class="nx">Show</span> <span class="nx">health</span> <span class="nx">indicators</span>
<span class="o">-</span> <span class="nx">Add</span> <span class="nx">environment</span> <span class="nx">switcher</span>
<span class="o">-</span> <span class="nx">Add</span> <span class="nx">session</span> <span class="nx">controls</span> <span class="kd">with</span> <span class="nx">PBML</span> <span class="nx">logging</span>
</code></pre></div></div>

<h4 id="task-3-complete-test-coverage">Task 3: Complete Test Coverage</h4>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Generate missing tests for tour flows</span>
npm run <span class="nb">test</span>:generate-flow-tests

<span class="c"># Required test scenarios:</span>
- Tour start/stop/resume
- Step navigation
- Health degradation handling
- WebSocket reconnection
- Mobile responsiveness
</code></pre></div></div>

<h3 id="phase-2-ux-polish-week-2">Phase 2: UX Polish (Week 2)</h3>

<h4 id="task-4-loading--error-states">Task 4: Loading &amp; Error States</h4>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Add to useGuidedTour.ts:</span>
<span class="o">-</span> <span class="nx">Loading</span> <span class="nx">skeleton</span> <span class="k">while</span> <span class="nx">fetching</span> <span class="nx">config</span><span class="o">/</span><span class="nx">health</span>
<span class="o">-</span> <span class="nb">Error</span> <span class="nx">boundary</span> <span class="kd">with</span> <span class="nx">retry</span>
<span class="o">-</span> <span class="nx">Offline</span> <span class="nx">mode</span> <span class="kd">with</span> <span class="nx">cached</span> <span class="nx">steps</span>
<span class="o">-</span> <span class="nx">Network</span> <span class="nx">quality</span> <span class="nx">indicator</span>
</code></pre></div></div>

<h4 id="task-5-accessibility">Task 5: Accessibility</h4>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Requirements:</span>
<span class="o">-</span> <span class="nx">Keyboard</span> <span class="nx">navigation</span> <span class="p">(</span><span class="nx">Tab</span><span class="p">,</span> <span class="nx">Enter</span><span class="p">,</span> <span class="nx">Escape</span><span class="p">)</span>
<span class="o">-</span> <span class="nx">Screen</span> <span class="nx">reader</span> <span class="nx">announcements</span>
<span class="o">-</span> <span class="nx">Focus</span> <span class="nx">management</span>
<span class="o">-</span> <span class="nx">ARIA</span> <span class="nx">labels</span> <span class="nx">and</span> <span class="nx">roles</span>
<span class="o">-</span> <span class="nx">High</span> <span class="nx">contrast</span> <span class="nx">mode</span> <span class="nx">support</span>
</code></pre></div></div>

<h4 id="task-6-mobile-optimization">Task 6: Mobile Optimization</h4>
<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">/* Responsive improvements needed: */</span>
<span class="nt">-</span> <span class="nt">Touch-friendly</span> <span class="nt">buttons</span> <span class="o">(</span><span class="nt">min</span> <span class="err">44</span><span class="nt">x44px</span><span class="o">)</span>
<span class="nt">-</span> <span class="nt">Swipe</span> <span class="nt">gestures</span> <span class="nt">for</span> <span class="nt">next</span><span class="o">/</span><span class="nt">prev</span>
<span class="nt">-</span> <span class="nt">Viewport-aware</span> <span class="nt">positioning</span>
<span class="nt">-</span> <span class="nt">Reduced</span> <span class="nt">motion</span> <span class="nt">support</span>
</code></pre></div></div>

<h3 id="phase-3-analytics--feedback-week-3">Phase 3: Analytics &amp; Feedback (Week 3)</h3>

<h4 id="task-7-telemetry-implementation">Task 7: Telemetry Implementation</h4>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Track these events:</span>
<span class="kr">interface</span> <span class="nx">TourAnalytics</span> <span class="p">{</span>
  <span class="nl">tourStarted</span><span class="p">:</span> <span class="p">{</span> <span class="na">source</span><span class="p">:</span> <span class="dl">'</span><span class="s1">auto</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">manual</span><span class="dl">'</span><span class="p">,</span> <span class="na">stepCount</span><span class="p">:</span> <span class="kr">number</span> <span class="p">}</span>
  <span class="nl">stepViewed</span><span class="p">:</span> <span class="p">{</span> <span class="na">stepId</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="na">duration</span><span class="p">:</span> <span class="kr">number</span> <span class="p">}</span>
  <span class="nl">stepAction</span><span class="p">:</span> <span class="p">{</span> <span class="na">stepId</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="na">action</span><span class="p">:</span> <span class="kr">string</span> <span class="p">}</span>
  <span class="nl">tourCompleted</span><span class="p">:</span> <span class="p">{</span> <span class="na">duration</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="na">stepsSkipped</span><span class="p">:</span> <span class="kr">number</span> <span class="p">}</span>
  <span class="nl">tourAbandoned</span><span class="p">:</span> <span class="p">{</span> <span class="na">lastStep</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">reason</span><span class="p">?:</span> <span class="kr">string</span> <span class="p">}</span>
<span class="err">}</span>
</code></pre></div></div>

<h4 id="task-8-feedback-widget">Task 8: Feedback Widget</h4>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Add feedback component:</span>
<span class="o">-</span> <span class="nx">Thumbs</span> <span class="nx">up</span><span class="o">/</span><span class="nx">down</span> <span class="nx">per</span> <span class="nx">step</span>
<span class="o">-</span> <span class="nx">Optional</span> <span class="nx">comment</span> <span class="nx">field</span>
<span class="o">-</span> <span class="nx">Bug</span> <span class="nx">report</span> <span class="kd">with</span> <span class="nx">screenshot</span>
<span class="o">-</span> <span class="nx">NPS</span> <span class="nx">survey</span> <span class="nx">on</span> <span class="nx">completion</span>
</code></pre></div></div>

<h4 id="task-9-performance-monitoring">Task 9: Performance Monitoring</h4>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Metrics to track:</span>
<span class="o">-</span> <span class="nx">Time</span> <span class="nx">to</span> <span class="nx">Interactive</span> <span class="p">(</span><span class="nx">TTI</span><span class="p">)</span>
<span class="o">-</span> <span class="nx">First</span> <span class="nx">Contentful</span> <span class="nx">Paint</span> <span class="p">(</span><span class="nx">FCP</span><span class="p">)</span>
<span class="o">-</span> <span class="nx">Bundle</span> <span class="nx">size</span> <span class="nx">impact</span>
<span class="o">-</span> <span class="nx">Memory</span> <span class="nx">usage</span> <span class="nx">over</span> <span class="nx">time</span>
<span class="o">-</span> <span class="nx">WebSocket</span> <span class="nx">reconnection</span> <span class="nx">rate</span>
</code></pre></div></div>

<h2 id="tour-types--examples">Tour Types &amp; Examples</h2>

<h3 id="available-tour-bundles">Available Tour Bundles</h3>

<h4 id="1-quick-start-guide-5-min">1. Quick Start Guide (5 min)</h4>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Purpose: Get new users productive quickly</span>
<span class="nx">steps</span><span class="p">:</span> <span class="p">[</span>
  <span class="dl">'</span><span class="s1">Welcome to DevMentor</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Complete Your Profile</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Connect GitHub Repository</span><span class="dl">'</span><span class="p">,</span> 
  <span class="dl">'</span><span class="s1">Try Your First Feature</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">VSCode Extension Setup</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Tooltips &amp; Reasoning</span><span class="dl">'</span>
<span class="p">]</span>
<span class="c1">// Target: First-time users</span>
<span class="c1">// Success: User creates first project</span>
</code></pre></div></div>

<h4 id="2-tracing-demo-5-min">2. Tracing Demo (5 min)</h4>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Purpose: Show distributed tracing capabilities</span>
<span class="nx">steps</span><span class="p">:</span> <span class="p">[</span>
  <span class="dl">'</span><span class="s1">Enable tracing envs</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Generate traffic</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Open Jaeger UI</span><span class="dl">'</span>
<span class="p">]</span>
<span class="c1">// Target: DevOps engineers</span>
<span class="c1">// Success: User views first trace</span>
</code></pre></div></div>

<h4 id="3-scale-flow-scenario-7-min">3. Scale Flow Scenario (7 min)</h4>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Purpose: Demonstrate scaling workflows</span>
<span class="nx">steps</span><span class="p">:</span> <span class="p">[</span>
  <span class="dl">'</span><span class="s1">Architecture â†’ Scaling tab</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Check Metrics (Prometheus/Grafana)</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Edit Helm values</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Apply HPA policy</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Verify scale-out &amp; logs</span><span class="dl">'</span>
<span class="p">]</span>
<span class="c1">// Target: Platform engineers</span>
<span class="c1">// Success: Service scaled successfully</span>
</code></pre></div></div>

<h4 id="4-feature-deep-dive-15-min">4. Feature Deep Dive (15 min)</h4>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Purpose: Explore all major features</span>
<span class="nx">steps</span><span class="p">:</span> <span class="p">[</span>
  <span class="dl">'</span><span class="s1">Master TDD Studio</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Master Prompt Engineering</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Explore System Architecture</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Discover Memory Bank</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">VSCode Extension</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">Learning Hub</span><span class="dl">'</span>
<span class="p">]</span>
<span class="c1">// Target: Power users</span>
<span class="c1">// Success: 3+ features activated</span>
</code></pre></div></div>

<h3 id="step-definition-schema">Step Definition Schema</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">interface</span> <span class="nx">TourStep</span> <span class="p">{</span>
  <span class="nl">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>                    <span class="c1">// Unique identifier</span>
  <span class="nl">title</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>                 <span class="c1">// Step heading</span>
  <span class="nl">description</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>           <span class="c1">// Detailed explanation</span>
  <span class="nl">href</span><span class="p">?:</span> <span class="kr">string</span><span class="p">;</span>                 <span class="c1">// Navigation target</span>
  <span class="nl">ctaLabel</span><span class="p">?:</span> <span class="kr">string</span><span class="p">;</span>            <span class="c1">// Action button text</span>
  <span class="nl">hidden</span><span class="p">?:</span> <span class="nx">boolean</span><span class="p">;</span>             <span class="c1">// Conditional visibility</span>
  <span class="nl">badge</span><span class="p">?:</span> <span class="dl">'</span><span class="s1">live</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">down</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">soon</span><span class="dl">'</span><span class="p">;</span> <span class="c1">// Health status</span>
  <span class="nl">prerequisites</span><span class="p">?:</span> <span class="kr">string</span><span class="p">[];</span>     <span class="c1">// Required completed steps</span>
  <span class="nl">estimatedTime</span><span class="p">?:</span> <span class="kr">string</span><span class="p">;</span>       <span class="c1">// Duration estimate</span>
  <span class="nl">difficulty</span><span class="p">?:</span> <span class="dl">'</span><span class="s1">beginner</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">intermediate</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">advanced</span><span class="dl">'</span><span class="p">;</span>
  <span class="nl">reward</span><span class="p">?:</span> <span class="kr">string</span><span class="p">;</span>              <span class="c1">// XP or achievement</span>
  <span class="nl">validation</span><span class="p">?:</span> <span class="p">{</span>                <span class="c1">// Success criteria</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">element</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">api</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">storage</span><span class="dl">'</span><span class="p">;</span>
    <span class="nl">target</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
    <span class="nl">condition</span><span class="p">:</span> <span class="kr">any</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="implementation-examples">Implementation Examples</h2>

<h3 id="creating-a-custom-tour">Creating a Custom Tour</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/tours/custom-onboarding.tsx</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useGuidedTour</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@/lib/tour/useGuidedTour</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">function</span> <span class="nx">CustomOnboarding</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">repoContext</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">stack</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">nodejs</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">postgres</span><span class="dl">'</span><span class="p">],</span>
    <span class="na">gaps</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">testing</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">monitoring</span><span class="dl">'</span><span class="p">]</span>
  <span class="p">};</span>
  
  <span class="kd">const</span> <span class="nx">tour</span> <span class="o">=</span> <span class="nx">useGuidedTour</span><span class="p">(</span><span class="nx">repoContext</span><span class="p">);</span>
  
  <span class="c1">// Custom step filtering</span>
  <span class="kd">const</span> <span class="nx">relevantSteps</span> <span class="o">=</span> <span class="nx">tour</span><span class="p">.</span><span class="nx">steps</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">step</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Show testing-related steps for identified gaps</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">repoContext</span><span class="p">.</span><span class="nx">gaps</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="dl">'</span><span class="s1">testing</span><span class="dl">'</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">step</span><span class="p">.</span><span class="nx">id</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="dl">'</span><span class="s1">tdd</span><span class="dl">'</span><span class="p">)</span> <span class="o">||</span> <span class="nx">step</span><span class="p">.</span><span class="nx">id</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="dl">'</span><span class="s1">test</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">});</span>
  
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">TourOverlay</span> 
      <span class="nx">steps</span><span class="o">=</span><span class="p">{</span><span class="nx">relevantSteps</span><span class="p">}</span>
      <span class="nx">onComplete</span><span class="o">=</span><span class="p">{(</span><span class="nx">stats</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// Track completion</span>
        <span class="nx">analytics</span><span class="p">.</span><span class="nx">track</span><span class="p">(</span><span class="dl">'</span><span class="s1">tour_completed</span><span class="dl">'</span><span class="p">,</span> <span class="nx">stats</span><span class="p">);</span>
      <span class="p">}}</span>
    <span class="sr">/</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="adding-tour-to-new-feature">Adding Tour to New Feature</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// When adding a new feature, create tour step:</span>
<span class="c1">// src/data/tour-steps/new-feature.json</span>
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">new-feature-intro</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Discover New Feature</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">description</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Learn how this feature accelerates your workflow</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">href</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/features/new</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">badge</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">soon</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">estimatedTime</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">3 min</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">validation</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">target</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/api/features/new/activated</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">condition</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">activated</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Generate corresponding test:</span>
<span class="c1">// tests/e2e/flows/new-feature-intro.test.ts</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">test</span><span class="p">,</span> <span class="nx">expect</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@playwright/test</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">test</span><span class="p">(</span><span class="dl">'</span><span class="s1">New Feature Tour Step</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">({</span> <span class="nx">page</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">await</span> <span class="nx">page</span><span class="p">.</span><span class="nx">goto</span><span class="p">(</span><span class="dl">'</span><span class="s1">/tour?step=new-feature-intro</span><span class="dl">'</span><span class="p">);</span>
  
  <span class="c1">// Verify step renders</span>
  <span class="k">await</span> <span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">locator</span><span class="p">(</span><span class="dl">'</span><span class="s1">[data-tour-step="new-feature-intro"]</span><span class="dl">'</span><span class="p">))</span>
    <span class="p">.</span><span class="nx">toBeVisible</span><span class="p">();</span>
  
  <span class="c1">// Click CTA</span>
  <span class="k">await</span> <span class="nx">page</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="dl">'</span><span class="s1">[data-tour-action]</span><span class="dl">'</span><span class="p">);</span>
  
  <span class="c1">// Verify navigation</span>
  <span class="k">await</span> <span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">).</span><span class="nx">toHaveURL</span><span class="p">(</span><span class="dl">'</span><span class="s1">/features/new</span><span class="dl">'</span><span class="p">);</span>
  
  <span class="c1">// Verify feature activation</span>
  <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">page</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api/features/new/activated</span><span class="dl">'</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">activated</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="websocket-health-integration">WebSocket Health Integration</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/lib/hooks/useServiceHealth.ts</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">useEffect</span><span class="p">,</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useRef</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">io</span><span class="p">,</span> <span class="nx">Socket</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">socket.io-client</span><span class="dl">'</span><span class="p">;</span>

<span class="kr">interface</span> <span class="nx">ServiceHealth</span> <span class="p">{</span>
  <span class="p">[</span><span class="nx">serviceId</span><span class="p">:</span> <span class="kr">string</span><span class="p">]:</span> <span class="nx">boolean</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kd">function</span> <span class="nx">useServiceHealth</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">services</span><span class="p">,</span> <span class="nx">setServices</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="o">&lt;</span><span class="nx">ServiceHealth</span><span class="o">&gt;</span><span class="p">({});</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">isConnected</span><span class="p">,</span> <span class="nx">setIsConnected</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">isReconnecting</span><span class="p">,</span> <span class="nx">setIsReconnecting</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">socketRef</span> <span class="o">=</span> <span class="nx">useRef</span><span class="o">&lt;</span><span class="nx">Socket</span> <span class="o">|</span> <span class="kc">null</span><span class="o">&gt;</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">reconnectAttempts</span> <span class="o">=</span> <span class="nx">useRef</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  
  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">connect</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">socket</span> <span class="o">=</span> <span class="nx">io</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NEXT_PUBLIC_WS_URL</span> <span class="o">||</span> <span class="dl">'</span><span class="s1">ws://localhost:3000</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">transports</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">websocket</span><span class="dl">'</span><span class="p">],</span>
        <span class="na">reconnection</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// Handle manually</span>
      <span class="p">});</span>
      
      <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">connect</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">setIsConnected</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
        <span class="nx">setIsReconnecting</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
        <span class="nx">reconnectAttempts</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        
        <span class="c1">// Subscribe to health channel</span>
        <span class="nx">socket</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">subscribe</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">channel</span><span class="p">:</span> <span class="dl">'</span><span class="s1">health</span><span class="dl">'</span> <span class="p">});</span>
      <span class="p">});</span>
      
      <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">health:update</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="na">data</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="na">healthMap</span><span class="p">:</span> <span class="nx">ServiceHealth</span> <span class="o">=</span> <span class="p">{};</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">services</span><span class="p">?.</span><span class="nx">forEach</span><span class="p">((</span><span class="na">s</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nx">healthMap</span><span class="p">[</span><span class="nx">s</span><span class="p">.</span><span class="nx">id</span> <span class="o">||</span> <span class="nx">s</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">healthy</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">});</span>
        <span class="nx">setServices</span><span class="p">(</span><span class="nx">healthMap</span><span class="p">);</span>
      <span class="p">});</span>
      
      <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">disconnect</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">setIsConnected</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
        <span class="nx">handleReconnect</span><span class="p">();</span>
      <span class="p">});</span>
      
      <span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">WebSocket error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">error</span><span class="p">);</span>
        <span class="nx">handleReconnect</span><span class="p">();</span>
      <span class="p">});</span>
      
      <span class="nx">socketRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="nx">socket</span><span class="p">;</span>
    <span class="p">};</span>
    
    <span class="kd">const</span> <span class="nx">handleReconnect</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">isReconnecting</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
      
      <span class="nx">setIsReconnecting</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">delay</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nx">reconnectAttempts</span><span class="p">.</span><span class="nx">current</span><span class="p">),</span> <span class="mi">30000</span><span class="p">);</span>
      <span class="kd">const</span> <span class="nx">jitter</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">;</span>
      
      <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">reconnectAttempts</span><span class="p">.</span><span class="nx">current</span><span class="o">++</span><span class="p">;</span>
        <span class="nx">connect</span><span class="p">();</span>
      <span class="p">},</span> <span class="nx">delay</span> <span class="o">+</span> <span class="nx">jitter</span><span class="p">);</span>
    <span class="p">};</span>
    
    <span class="c1">// Initial connection</span>
    <span class="nx">connect</span><span class="p">();</span>
    
    <span class="c1">// Cleanup</span>
    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">socketRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">socketRef</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">();</span>
        <span class="nx">socketRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">},</span> <span class="p">[]);</span>
  
  <span class="c1">// Fallback to polling if WebSocket fails</span>
  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isConnected</span> <span class="o">&amp;&amp;</span> <span class="nx">reconnectAttempts</span><span class="p">.</span><span class="nx">current</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">interval</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
          <span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api/admin/services/health</span><span class="dl">'</span><span class="p">);</span>
          <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
          <span class="kd">const</span> <span class="na">healthMap</span><span class="p">:</span> <span class="nx">ServiceHealth</span> <span class="o">=</span> <span class="p">{};</span>
          <span class="nx">data</span><span class="p">.</span><span class="nx">services</span><span class="p">?.</span><span class="nx">forEach</span><span class="p">((</span><span class="na">s</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">healthMap</span><span class="p">[</span><span class="nx">s</span><span class="p">.</span><span class="nx">id</span> <span class="o">||</span> <span class="nx">s</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">healthy</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">});</span>
          <span class="nx">setServices</span><span class="p">(</span><span class="nx">healthMap</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Health polling failed:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span> <span class="mi">10000</span><span class="p">);</span> <span class="c1">// Poll every 10s</span>
      
      <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">interval</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">isConnected</span><span class="p">,</span> <span class="nx">reconnectAttempts</span><span class="p">.</span><span class="nx">current</span><span class="p">]);</span>
  
  <span class="k">return</span> <span class="p">{</span> <span class="nx">services</span><span class="p">,</span> <span class="nx">isConnected</span><span class="p">,</span> <span class="nx">isReconnecting</span> <span class="p">};</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="troubleshooting-guide">Troubleshooting Guide</h2>

<h3 id="common-issues--solutions">Common Issues &amp; Solutions</h3>

<h4 id="tour-not-starting">Tour Not Starting</h4>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check 1: Verify config endpoint</span>
curl http://localhost:3000/api/config/devmentor
<span class="c"># Expected: { "features": { "guidedTour": true } }</span>

<span class="c"># Check 2: Clear localStorage</span>
localStorage.removeItem<span class="o">(</span><span class="s1">'devmentor.guidedTour.progress'</span><span class="o">)</span>

<span class="c"># Check 3: Force reset</span>
window.devmentorTour?.reset<span class="o">()</span>
</code></pre></div></div>

<h4 id="steps-not-showing">Steps Not Showing</h4>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Debug: Log computed steps</span>
<span class="kd">const</span> <span class="nx">tour</span> <span class="o">=</span> <span class="nx">useGuidedTour</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Available steps:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">tour</span><span class="p">.</span><span class="nx">steps</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Hidden steps:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">tour</span><span class="p">.</span><span class="nx">steps</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">s</span> <span class="o">=&gt;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">hidden</span><span class="p">));</span>

<span class="c1">// Common causes:</span>
<span class="c1">// 1. Feature flags disabled</span>
<span class="c1">// 2. Services marked unhealthy</span>
<span class="c1">// 3. Missing repo context</span>
</code></pre></div></div>

<h4 id="websocket-connection-issues">WebSocket Connection Issues</h4>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Debug WebSocket</span>
<span class="kd">const</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws://localhost:3000</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Connected</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">WS Error:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Message:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>

<span class="c1">// Check CORS</span>
<span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api/admin/services/health</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">r</span> <span class="o">=&gt;</span> <span class="nx">r</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</code></pre></div></div>

<h4 id="progress-not-saving">Progress Not Saving</h4>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Verify localStorage access</span>
<span class="k">try</span> <span class="p">{</span>
  <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">test</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">value</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">localStorage working</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">localStorage blocked:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
  <span class="c1">// Fallback to sessionStorage or memory</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="performance-optimization">Performance Optimization</h3>

<h4 id="lazy-loading-tours">Lazy Loading Tours</h4>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Use dynamic imports for tour components</span>
<span class="kd">const</span> <span class="nx">DemoTour</span> <span class="o">=</span> <span class="nx">lazy</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">@/components/DemoTour</span><span class="dl">'</span><span class="p">));</span>

<span class="c1">// Preload on hover</span>
<span class="kd">function</span> <span class="nx">TourButton</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">handleHover</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">@/components/DemoTour</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Preload</span>
  <span class="p">};</span>
  
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onMouseEnter</span><span class="o">=</span><span class="p">{</span><span class="nx">handleHover</span><span class="p">}</span><span class="o">&gt;</span>
      <span class="nx">Start</span> <span class="nx">Tour</span>
    <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="reduce-bundle-size">Reduce Bundle Size</h4>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Split tour data from main bundle</span>
<span class="c1">// webpack.config.js</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">optimization</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">splitChunks</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">chunks</span><span class="p">:</span> <span class="dl">'</span><span class="s1">all</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">cacheGroups</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">tours</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">test</span><span class="p">:</span> <span class="sr">/</span><span class="se">[\\/]</span><span class="sr">tours</span><span class="se">[\\/]</span><span class="sr">/</span><span class="p">,</span>
          <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">tours</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">priority</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="p">},</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="beta-release-checklist-ï¸">Beta Release Checklist â˜‘ï¸</h2>

<h3 id="pre-launch-3-days-before">Pre-Launch (3 days before)</h3>
<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Feature flag <code class="language-plaintext highlighter-rouge">guidedTour: false</code> in production</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Load testing with 100 concurrent users</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Security review of endpoints</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />GDPR compliance for telemetry</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Rollback plan documented</li>
</ul>

<h3 id="launch-day">Launch Day</h3>
<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Enable for 10% of users</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Monitor error rates</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Check telemetry pipeline</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Staff on-call for issues</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Communication channels ready</li>
</ul>

<h3 id="post-launch-week-1">Post-Launch (Week 1)</h3>
<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Daily metrics review</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />User feedback triage</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Bug fix releases</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Gradual rollout to 100%</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Success metrics evaluation</li>
</ul>

<h2 id="implementation-scripts">Implementation Scripts</h2>

<h3 id="1-generate-all-flow-tests">1. Generate All Flow Tests</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># scripts/generate-all-flow-tests.sh</span>

<span class="nv">FLOWS</span><span class="o">=</span><span class="si">$(</span><span class="nb">cat </span>src/data/flows.json | jq <span class="nt">-r</span> <span class="s1">'keys[]'</span><span class="si">)</span>
<span class="k">for </span>flow <span class="k">in</span> <span class="nv">$FLOWS</span><span class="p">;</span> <span class="k">do
  </span><span class="nb">echo</span> <span class="s2">"Generating test for: </span><span class="nv">$flow</span><span class="s2">"</span>
  curl <span class="nt">-X</span> POST http://localhost:3000/api/tests/flows/generate <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"{</span><span class="se">\"</span><span class="s2">flowId</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="nv">$flow</span><span class="se">\"</span><span class="s2">}"</span>
<span class="k">done</span>
</code></pre></div></div>

<h3 id="2-health-check-monitor">2. Health Check Monitor</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// scripts/monitor-health.ts</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">io</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">socket.io-client</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">socket</span> <span class="o">=</span> <span class="nx">io</span><span class="p">(</span><span class="dl">'</span><span class="s1">ws://localhost:3000</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">socket</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">health:update</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Health Update:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
  <span class="c1">// Alert if any service is down</span>
  <span class="kd">const</span> <span class="nx">down</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">services</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">s</span> <span class="o">=&gt;</span> <span class="o">!</span><span class="nx">s</span><span class="p">.</span><span class="nx">healthy</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">down</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">âš ï¸ Services down:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">down</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="3-tour-analytics-dashboard">3. Tour Analytics Dashboard</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// src/app/admin/tour-analytics/page.tsx</span>
<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">TourAnalytics</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// Show:</span>
  <span class="c1">// - Completion funnel</span>
  <span class="c1">// - Drop-off points</span>
  <span class="c1">// - Average time per step</span>
  <span class="c1">// - Most clicked actions</span>
  <span class="c1">// - Feedback sentiment</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="success-metrics-">Success Metrics ğŸ“Š</h2>

<h3 id="target-metrics-for-beta">Target Metrics for Beta</h3>
<ul>
  <li><strong>Activation Rate:</strong> 60% of new users start the tour</li>
  <li><strong>Completion Rate:</strong> 40% complete at least 3 steps</li>
  <li><strong>Satisfaction:</strong> 4.0+ average rating</li>
  <li><strong>Performance:</strong> &lt;100ms step transitions</li>
  <li><strong>Reliability:</strong> 99.9% uptime for health checks</li>
  <li><strong>Error Rate:</strong> &lt;0.1% failed tour loads</li>
</ul>

<h3 id="monitoring-dashboard">Monitoring Dashboard</h3>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># grafana-dashboard.yaml</span>
<span class="na">panels</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">Tour Funnel</span>
  <span class="pi">-</span> <span class="s">Step Duration Heatmap</span>
  <span class="pi">-</span> <span class="s">Error Rate by Step</span>
  <span class="pi">-</span> <span class="s">WebSocket Connection Health</span>
  <span class="pi">-</span> <span class="s">User Feedback Stream</span>
  <span class="pi">-</span> <span class="s">Performance Metrics (P50, P90, P99)</span>
</code></pre></div></div>

<h2 id="risk-mitigation-ï¸">Risk Mitigation ğŸ›¡ï¸</h2>

<h3 id="high-risk-areas">High Risk Areas</h3>
<ol>
  <li><strong>WebSocket stability</strong> â†’ Implement fallback to polling</li>
  <li><strong>Config service downtime</strong> â†’ Cache config for 24h</li>
  <li><strong>Memory leaks</strong> â†’ Add cleanup on unmount</li>
  <li><strong>Mobile performance</strong> â†’ Lazy load tour components</li>
  <li><strong>A/B test conflicts</strong> â†’ Namespace tour experiments</li>
</ol>

<h3 id="rollback-strategy">Rollback Strategy</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Feature flag quick disable:</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">emergencyDisableTour</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api/config/devmentor</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
      <span class="na">features</span><span class="p">:</span> <span class="p">{</span> <span class="na">guidedTour</span><span class="p">:</span> <span class="kc">false</span> <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">});</span>
  <span class="c1">// Clear all localStorage</span>
  <span class="nx">localStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">devmentor.guidedTour.progress</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="team-responsibilities-">Team Responsibilities ğŸ‘¥</h2>

<h3 id="engineering">Engineering</h3>
<ul>
  <li>Fix WebSocket integration (2 days)</li>
  <li>Add telemetry hooks (1 day)</li>
  <li>Mobile optimization (2 days)</li>
  <li>Performance testing (1 day)</li>
</ul>

<h3 id="design">Design</h3>
<ul>
  <li>Review mobile layouts</li>
  <li>Accessibility audit</li>
  <li>Animation polish</li>
  <li>Error state designs</li>
</ul>

<h3 id="product">Product</h3>
<ul>
  <li>Define success metrics</li>
  <li>Create feedback surveys</li>
  <li>Plan beta communication</li>
  <li>Monitor user feedback</li>
</ul>

<h3 id="devops">DevOps</h3>
<ul>
  <li>Set up monitoring</li>
  <li>Configure feature flags</li>
  <li>Load testing</li>
  <li>Incident response plan</li>
</ul>

<h2 id="timeline-">Timeline ğŸ“…</h2>

<pre><code class="language-mermaid">gantt
    title Beta Launch Timeline
    dateFormat YYYY-MM-DD
    section Phase 1
    Fix Health Integration    :a1, 2024-01-15, 2d
    Topbar Integration       :a2, after a1, 2d
    Test Coverage            :a3, after a2, 2d
    section Phase 2  
    Loading States           :b1, after a3, 1d
    Accessibility            :b2, after b1, 2d
    Mobile Optimization      :b3, after b2, 2d
    section Phase 3
    Telemetry               :c1, after b3, 2d
    Feedback Widget         :c2, after c1, 1d
    Performance Monitoring   :c3, after c2, 1d
    section Launch
    Pre-Launch Prep         :d1, after c3, 3d
    Beta Launch             :milestone, after d1
    Monitoring &amp; Iteration  :d2, after d1, 7d
</code></pre>

<h2 id="next-steps-">Next Steps ğŸš€</h2>

<ol>
  <li><strong>Immediate (Today):</strong>
    <ul>
      <li>Fix health endpoint service mappings</li>
      <li>Create useServiceHealth hook</li>
      <li>Test all tour navigation links</li>
    </ul>
  </li>
  <li><strong>Tomorrow:</strong>
    <ul>
      <li>Implement loading states</li>
      <li>Add error boundaries</li>
      <li>Start mobile testing</li>
    </ul>
  </li>
  <li><strong>This Week:</strong>
    <ul>
      <li>Complete test coverage</li>
      <li>Add telemetry</li>
      <li>Run accessibility audit</li>
    </ul>
  </li>
  <li><strong>Next Week:</strong>
    <ul>
      <li>Beta user recruitment</li>
      <li>Load testing</li>
      <li>Final polish</li>
    </ul>
  </li>
</ol>

<h2 id="contact--support">Contact &amp; Support</h2>

<ul>
  <li><strong>Slack Channel:</strong> #guided-tour-beta</li>
  <li><strong>Issue Tracker:</strong> /projects/guided-tour</li>
  <li><strong>Documentation:</strong> /docs/tour-guide</li>
  <li><strong>On-Call:</strong> tour-team@devmentor.ai</li>
</ul>



<div style="margin-top: 3rem; padding: 1rem; background: #f6f8fa; border-radius: 5px;">
  <p style="margin: 0; color: #666; font-size: 0.9em;">
    ğŸ“ Source: DevMentor / frontend/GUIDED_TOUR_BETA_READINESS.md
  </p>
</div>

  </main>

  <footer>
    <p>&copy; 2024 NatureQuest. Documentation Hub v1.0.0</p>
  </footer>
</body>
</html>
