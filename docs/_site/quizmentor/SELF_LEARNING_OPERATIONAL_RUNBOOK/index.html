<!DOCTYPE html>
<html lang="en" data-theme="auto">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SELF LEARNING OPERATIONAL RUNBOOK</title>
    
    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    
    <style>
    /* Light mode variables */
    :root {
      --primary: #007AFF;
      --primary-hover: #0051D5;
      --success: #34C759;
      --warning: #FF9500;
      --danger: #FF3B30;
      --text-primary: #000000;
      --text-secondary: #3C3C43;
      --text-tertiary: #8E8E93;
      --bg-primary: #FFFFFF;
      --bg-secondary: #F2F2F7;
      --bg-tertiary: #FFFFFF;
      --bg-elevated: #FFFFFF;
      --border: rgba(0, 0, 0, 0.1);
      --border-subtle: rgba(0, 0, 0, 0.04);
      --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.06), 0 1px 2px rgba(0, 0, 0, 0.12);
      --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07), 0 2px 4px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.1), 0 4px 10px rgba(0, 0, 0, 0.08);
      --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.15);
      --backdrop: rgba(255, 255, 255, 0.8);
      --code-bg: #F7F7FA;
      --code-border: rgba(0, 0, 0, 0.06);
      --nav-bg: rgba(255, 255, 255, 0.72);
      --card-bg: #FFFFFF;
      --hover-bg: rgba(0, 122, 255, 0.08);
    }
    
    /* Dark mode variables */
    [data-theme="dark"] {
      --primary: #0A84FF;
      --primary-hover: #409CFF;
      --success: #32D74B;
      --warning: #FF9F0A;
      --danger: #FF453A;
      --text-primary: #FFFFFF;
      --text-secondary: #EBEBF5;
      --text-tertiary: #8E8E93;
      --bg-primary: #000000;
      --bg-secondary: #1C1C1E;
      --bg-tertiary: #2C2C2E;
      --bg-elevated: #1C1C1E;
      --border: rgba(255, 255, 255, 0.15);
      --border-subtle: rgba(255, 255, 255, 0.06);
      --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.4);
      --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4), 0 2px 4px rgba(0, 0, 0, 0.3);
      --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.5), 0 4px 10px rgba(0, 0, 0, 0.4);
      --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.6);
      --backdrop: rgba(28, 28, 30, 0.8);
      --code-bg: #1C1C1E;
      --code-border: rgba(255, 255, 255, 0.08);
      --nav-bg: rgba(28, 28, 30, 0.72);
      --card-bg: #1C1C1E;
      --hover-bg: rgba(10, 132, 255, 0.15);
    }
    
    /* Auto theme based on system preference */
    @media (prefers-color-scheme: dark) {
      :root:not([data-theme="light"]) {
        --primary: #0A84FF;
        --primary-hover: #409CFF;
        --success: #32D74B;
        --warning: #FF9F0A;
        --danger: #FF453A;
        --text-primary: #FFFFFF;
        --text-secondary: #EBEBF5;
        --text-tertiary: #8E8E93;
        --bg-primary: #000000;
        --bg-secondary: #1C1C1E;
        --bg-tertiary: #2C2C2E;
        --bg-elevated: #1C1C1E;
        --border: rgba(255, 255, 255, 0.15);
        --border-subtle: rgba(255, 255, 255, 0.06);
        --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.4);
        --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4), 0 2px 4px rgba(0, 0, 0, 0.3);
        --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.5), 0 4px 10px rgba(0, 0, 0, 0.4);
        --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.6);
        --backdrop: rgba(28, 28, 30, 0.8);
        --code-bg: #1C1C1E;
        --code-border: rgba(255, 255, 255, 0.08);
        --nav-bg: rgba(28, 28, 30, 0.72);
        --card-bg: #1C1C1E;
        --hover-bg: rgba(10, 132, 255, 0.15);
      }
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    html {
      scroll-behavior: smooth;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
      font-size: 17px;
      line-height: 1.6;
      color: var(--text-primary);
      background: var(--bg-primary);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 24px;
    }
    
    /* Typography */
    p {
      margin: 1.2rem 0;
      color: var(--text-secondary);
      letter-spacing: -0.011em;
    }
    
    a {
      color: var(--primary);
      text-decoration: none;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 2px;
    }
    
    a:hover {
      color: var(--primary-hover);
      text-decoration: none;
    }
    
    a:focus {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }
    
    /* Headings */
    h1, h2, h3, h4, h5, h6 {
      font-weight: 600;
      line-height: 1.2;
      margin-top: 2.5rem;
      margin-bottom: 1rem;
      letter-spacing: -0.02em;
      color: var(--text-primary);
    }
    
    h1 {
      font-size: 3rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-hover) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-top: 0;
      margin-bottom: 1.5rem;
    }
    
    h2 {
      font-size: 2rem;
      font-weight: 600;
      color: var(--text-primary);
      border-bottom: 1px solid var(--border-subtle);
      padding-bottom: 0.75rem;
      margin-top: 3rem;
    }
    
    h3 {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--text-primary);
    }
    
    h4 {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text-secondary);
    }
    
    /* Lists */
    ul, ol {
      padding-left: 2rem;
      margin: 1.5rem 0;
      color: var(--text-secondary);
    }
    
    li {
      margin: 0.75rem 0;
      line-height: 1.6;
    }
    
    /* Strong text */
    strong, b {
      font-weight: 600;
      color: var(--text-primary);
    }
    
    /* Navigation */
    .nav-wrapper {
      position: sticky;
      top: 0;
      z-index: 100;
      background: var(--nav-bg);
      backdrop-filter: saturate(180%) blur(20px);
      -webkit-backdrop-filter: saturate(180%) blur(20px);
      border-bottom: 1px solid var(--border);
      margin-bottom: 2rem;
    }
    
    nav {
      padding: 1rem 0;
    }
    
    .nav-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    nav ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }
    
    nav li {
      margin: 0;
    }
    
    nav a {
      color: var(--text-secondary);
      text-decoration: none;
      font-weight: 500;
      font-size: 0.95rem;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    nav a:hover {
      background: var(--hover-bg);
      color: var(--primary);
    }
    
    nav a:focus {
      outline: none;
    }
    
    /* Theme Switcher */
    .theme-switcher {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.375rem;
      background: var(--bg-secondary);
      border-radius: 10px;
      border: 1px solid var(--border-subtle);
    }
    
    .theme-btn {
      padding: 0.375rem 0.625rem;
      background: transparent;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      color: var(--text-tertiary);
      font-size: 0.875rem;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }
    
    .theme-btn:hover {
      color: var(--text-secondary);
    }
    
    .theme-btn.active {
      background: var(--card-bg);
      color: var(--text-primary);
      box-shadow: var(--shadow-sm);
    }
    
    /* Code blocks */
    pre {
      background: var(--code-bg);
      padding: 1.5rem;
      border-radius: 12px;
      overflow-x: auto;
      border: 1px solid var(--code-border);
      margin: 2rem 0;
      font-size: 0.875rem;
      box-shadow: var(--shadow-sm);
    }
    
    code {
      font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
      background: var(--code-bg);
      padding: 0.125rem 0.375rem;
      border-radius: 4px;
      font-size: 0.875em;
      border: 1px solid var(--code-border);
    }
    
    pre code {
      background: none;
      padding: 0;
      border: none;
      font-size: 0.875rem;
    }
    
    /* Tables */
    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      margin: 2rem 0;
      font-size: 0.95rem;
      background: var(--card-bg);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: var(--shadow-md);
    }
    
    th, td {
      padding: 1rem;
      text-align: left;
      border-bottom: 1px solid var(--border-subtle);
    }
    
    th {
      background: var(--bg-secondary);
      font-weight: 600;
      font-size: 0.875rem;
      color: var(--text-secondary);
    }
    
    td {
      color: var(--text-secondary);
    }
    
    tr:last-child td {
      border-bottom: none;
    }
    
    tr:hover {
      background: var(--hover-bg);
    }
    
    /* Blockquotes */
    blockquote {
      margin: 2rem 0;
      padding: 1.25rem;
      border-left: 4px solid var(--primary);
      background: var(--bg-secondary);
      border-radius: 0 12px 12px 0;
      color: var(--text-secondary);
      font-style: normal;
    }
    
    blockquote p {
      margin: 0.5rem 0;
    }
    
    /* Horizontal rules */
    hr {
      border: none;
      height: 1px;
      background: var(--border);
      margin: 3rem 0;
    }
    
    /* Cards */
    .card {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
      margin: 1rem 0;
      box-shadow: var(--shadow-sm);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .card:hover {
      box-shadow: var(--shadow-lg);
      transform: translateY(-2px);
    }
    
    /* Main content */
    main {
      min-height: calc(100vh - 200px);
      padding: 2rem 0;
    }
    
    /* Footer */
    footer {
      margin-top: 4rem;
      padding: 2rem 0;
      border-top: 1px solid var(--border);
      color: var(--text-tertiary);
      font-size: 0.875rem;
      text-align: center;
    }
    
    /* Grid for cards */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      h1 { font-size: 2.5rem; }
      h2 { font-size: 1.75rem; }
      h3 { font-size: 1.375rem; }
      
      .nav-content {
        flex-direction: column;
        gap: 1rem;
      }
      
      nav ul {
        flex-wrap: wrap;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div class="nav-wrapper">
    <div class="container">
      <nav class="nav-content">
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/architecture/">Architecture</a></li>
          <li><a href="/all-docs/">All Docs</a></li>
          <li><a href="/learning-roadmap/">Learning Roadmaps</a></li>
          <li><a href="/devmentor/">DevMentor</a></li>
          <li><a href="/quizmentor/">QuizMentor</a></li>
          <li><a href="/harvest/">Harvest.ai</a></li>
          <li><a href="/naturequest-auth/">Auth</a></li>
          <li><a href="/infrastructure/">Infrastructure</a></li>
        </ul>
        <div class="theme-switcher" aria-label="Theme Switcher">
          <button class="theme-btn" data-theme="light" aria-pressed="false" title="Light mode">🌞 Light</button>
          <button class="theme-btn active" data-theme="auto" aria-pressed="true" title="Auto mode">🧭 Auto</button>
          <button class="theme-btn" data-theme="dark" aria-pressed="false" title="Dark mode">🌙 Dark</button>
        </div>
      </nav>
    </div>
  </div>

  <main class="container">
    <div class="product-header" style="background: #f6f8fa; padding: 1rem; border-radius: 5px; margin-bottom: 2rem;">
  <span style="color: #666;">QuizMentor</span> / 
  <span style="color: #999;">SELF_LEARNING_OPERATIONAL_RUNBOOK.md</span>
</div>

<h1>SELF LEARNING OPERATIONAL RUNBOOK</h1>


<h1 id="-self-learning-system-operational-runbook">📚 Self-Learning System Operational Runbook</h1>

<h2 id="table-of-contents">Table of Contents</h2>
<ol>
  <li><a href="#system-overview">System Overview</a></li>
  <li><a href="#how-it-works">How It Works</a></li>
  <li><a href="#architecture-deep-dive">Architecture Deep Dive</a></li>
  <li><a href="#operational-procedures">Operational Procedures</a></li>
  <li><a href="#monitoring--alerts">Monitoring &amp; Alerts</a></li>
  <li><a href="#troubleshooting-guide">Troubleshooting Guide</a></li>
  <li><a href="#incident-response">Incident Response</a></li>
  <li><a href="#performance-tuning">Performance Tuning</a></li>
  <li><a href="#data-management">Data Management</a></li>
  <li><a href="#security-operations">Security Operations</a></li>
</ol>

<hr />

<h1 id="-system-overview">🎯 System Overview</h1>

<h2 id="what-is-this-system">What Is This System?</h2>

<p>The QuizMentor Self-Learning System is an AI-powered educational platform that:</p>
<ul>
  <li><strong>Validates</strong> questions using Bloom’s Taxonomy (6 cognitive levels)</li>
  <li><strong>Adapts</strong> to each user’s learning style and performance</li>
  <li><strong>Optimizes</strong> for flow state (70-85% success rate)</li>
  <li><strong>Personalizes</strong> learning paths with ML algorithms</li>
  <li><strong>Tracks</strong> progress with comprehensive analytics</li>
</ul>

<h2 id="key-components">Key Components</h2>

<pre><code class="language-mermaid">graph TB
    User[User] --&gt; API[API Gateway]
    API --&gt; Orchestrator[Self-Learning Orchestrator]
    
    Orchestrator --&gt; Bloom[Bloom's Validator]
    Orchestrator --&gt; Adaptive[Adaptive Engine]
    Orchestrator --&gt; Analytics[Analytics Engine]
    
    Bloom --&gt; QDB[(Questions DB)]
    Adaptive --&gt; UDB[(User Profiles DB)]
    Analytics --&gt; ADB[(Analytics DB)]
    
    Adaptive --&gt; Cache[Redis Cache]
    Bloom --&gt; Cache
    
    Analytics --&gt; Queue[SQS Queue]
    Queue --&gt; Worker[Background Workers]
</code></pre>

<h2 id="core-metrics">Core Metrics</h2>
<ul>
  <li><strong>Response Time</strong>: &lt; 200ms (p50), &lt; 1s (p99)</li>
  <li><strong>Accuracy</strong>: 90%+ validation accuracy</li>
  <li><strong>Flow State</strong>: 30%+ achievement rate</li>
  <li><strong>Availability</strong>: 99.9% uptime target</li>
  <li><strong>Cost</strong>: &lt; $0.001 per session</li>
</ul>

<hr />

<h1 id="-how-it-works">🔄 How It Works</h1>

<h2 id="1-question-validation-flow">1. Question Validation Flow</h2>

<h3 id="step-by-step-process">Step-by-Step Process:</h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 1. Question enters system</span>
<span class="nx">POST</span> <span class="o">/</span><span class="nx">api</span><span class="o">/</span><span class="nx">questions</span><span class="o">/</span><span class="nx">validate</span>
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Analyze the impact of climate change</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">essay</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">difficulty</span><span class="dl">"</span><span class="p">:</span> <span class="mi">4</span>
<span class="p">}</span>

<span class="c1">// 2. Bloom's Validator processes</span>
<span class="nx">BloomValidator</span> <span class="err">→</span> <span class="nx">Classify</span> <span class="err">→</span> <span class="nx">Analyze</span> <span class="err">→</span> <span class="nx">Score</span> <span class="err">→</span> <span class="nx">Suggest</span>

<span class="c1">// 3. Returns classification</span>
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">level</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Analyze</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">confidence</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.85</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">complexity</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.72</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">suggestions</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">Add rubric</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Include examples</span><span class="dl">"</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="how-blooms-classification-works">How Bloom’s Classification Works:</h3>

<ol>
  <li><strong>Text Analysis</strong>
    <ul>
      <li>Scans for keyword indicators (analyze, evaluate, create, etc.)</li>
      <li>Identifies cognitive verbs</li>
      <li>Matches against taxonomy patterns</li>
    </ul>
  </li>
  <li><strong>Complexity Calculation</strong>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Complexity = (0.1 × WordCount) + 
             (0.2 × ConceptCount) + 
             (0.3 × RelationshipComplexity) +
             (0.2 × AbstractionLevel) +
             (0.2 × ProblemComplexity)
</code></pre></div>    </div>
  </li>
  <li><strong>Confidence Scoring</strong>
    <ul>
      <li>Clear keyword matches: +5% per match</li>
      <li>Question type alignment: +15%</li>
      <li>Learning objective present: +10%</li>
      <li>Low ambiguity: +10%</li>
    </ul>
  </li>
</ol>

<h2 id="2-adaptive-learning-algorithm">2. Adaptive Learning Algorithm</h2>

<h3 id="the-magic-formula">The Magic Formula:</h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">OptimalDifficulty</span> <span class="o">=</span> <span class="nx">CurrentSkill</span> <span class="o">+</span> <span class="p">(</span><span class="mf">0.3</span> <span class="err">×</span> <span class="nx">PerformanceTrend</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="how-it-adapts">How It Adapts:</h3>

<ol>
  <li><strong>Initial Assessment</strong>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>New User → Baseline Test → Skill Level (1-5)
</code></pre></div>    </div>
  </li>
  <li><strong>Question Selection Strategy</strong>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>30% - Spaced Repetition (review old content)
25% - Knowledge Gaps (target weaknesses)
20% - Difficulty Curve (gradual progression)
15% - Learning Style (visual/verbal/logical)
10% - Novel Content (exploration)
</code></pre></div>    </div>
  </li>
  <li><strong>Real-Time Adjustment</strong>
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>If (2 wrong in a row) → Reduce difficulty by 0.5
If (3 correct in a row) → Increase difficulty by 0.3
If (accuracy &lt; 60%) → Activate comeback mode
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="3-flow-state-optimization">3. Flow State Optimization</h2>

<h3 id="the-flow-curve">The Flow Curve:</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Difficulty
    ^
  5 |      Peak
  4 |    /    \
  3 |   /      \
  2 |  /        \
  1 | /          \
    +--------------&gt; Questions
      1  2  3  4  5  6  7
</code></pre></div></div>

<h3 id="implementation">Implementation:</h3>
<ol>
  <li><strong>Warm-up</strong> (Q1-2): Easy questions to build confidence</li>
  <li><strong>Build-up</strong> (Q3-4): Gradual difficulty increase</li>
  <li><strong>Peak</strong> (Q5): Maximum challenge at 70% position</li>
  <li><strong>Cool-down</strong> (Q6-7): Easier questions to end positively</li>
</ol>

<h2 id="4-learning-plan-generation">4. Learning Plan Generation</h2>

<h3 id="milestone-calculation">Milestone Calculation:</h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">generateMilestones</span><span class="p">(</span><span class="nx">current</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">target</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">days</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">gap</span> <span class="o">=</span> <span class="nx">target</span> <span class="o">-</span> <span class="nx">current</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">milestones</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nx">gap</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span>
  
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">milestones</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">progress</span> <span class="o">=</span> <span class="p">(</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nx">milestones</span><span class="p">;</span>
    <span class="k">yield</span> <span class="p">{</span>
      <span class="na">level</span><span class="p">:</span> <span class="nx">current</span> <span class="o">+</span> <span class="p">(</span><span class="nx">gap</span> <span class="o">*</span> <span class="nx">progress</span><span class="p">),</span>
      <span class="na">mastery</span><span class="p">:</span> <span class="mf">0.7</span> <span class="o">+</span> <span class="p">(</span><span class="nx">progress</span> <span class="o">*</span> <span class="mf">0.2</span><span class="p">),</span>
      <span class="na">sessions</span><span class="p">:</span> <span class="mi">5</span> <span class="o">+</span> <span class="p">(</span><span class="nx">i</span> <span class="o">*</span> <span class="mi">2</span><span class="p">),</span>
      <span class="na">xp</span><span class="p">:</span> <span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h1 id="️-architecture-deep-dive">🏗️ Architecture Deep Dive</h1>

<h2 id="service-architecture">Service Architecture</h2>

<h3 id="1-self-learning-orchestrator">1. Self-Learning Orchestrator</h3>
<p><strong>Purpose</strong>: Central coordinator for all learning features</p>

<p><strong>Responsibilities</strong>:</p>
<ul>
  <li>Session generation</li>
  <li>Learning plan creation</li>
  <li>Analytics processing</li>
  <li>Feedback loop management</li>
</ul>

<p><strong>Key Methods</strong>:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">generateOptimalSession</span><span class="p">(</span><span class="nx">userId</span><span class="p">,</span> <span class="nx">categoryId</span><span class="p">,</span> <span class="nx">preferences</span><span class="p">)</span>
<span class="nx">createLearningPlan</span><span class="p">(</span><span class="nx">userId</span><span class="p">,</span> <span class="nx">targetLevel</span><span class="p">,</span> <span class="nx">timeframe</span><span class="p">)</span>
<span class="nx">analyzeLearningPatterns</span><span class="p">(</span><span class="nx">userId</span><span class="p">)</span>
<span class="nx">processFeedbackLoop</span><span class="p">(</span><span class="nx">userId</span><span class="p">,</span> <span class="nx">results</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="2-blooms-taxonomy-validator">2. Bloom’s Taxonomy Validator</h3>
<p><strong>Purpose</strong>: Pedagogical validation of questions</p>

<p><strong>Process</strong>:</p>
<ol>
  <li>Text analysis for cognitive indicators</li>
  <li>Knowledge dimension classification</li>
  <li>Complexity calculation</li>
  <li>Suggestion generation</li>
</ol>

<p><strong>Validation Rules</strong>:</p>
<ul>
  <li>Must have learning objective (weight: 30%)</li>
  <li>Appropriate complexity (weight: 25%)</li>
  <li>Valid assessment type (weight: 25%)</li>
  <li>Clear instructions (weight: 20%)</li>
</ul>

<h3 id="3-adaptive-learning-engine">3. Adaptive Learning Engine</h3>
<p><strong>Purpose</strong>: Personalization and optimization</p>

<p><strong>Core Algorithms</strong>:</p>
<ul>
  <li><strong>SM-2 Spaced Repetition</strong>: Forgetting curve modeling</li>
  <li><strong>Elo Rating System</strong>: Skill level calculation</li>
  <li><strong>Flow State Optimizer</strong>: Challenge-skill balance</li>
  <li><strong>Knowledge Gap Detector</strong>: Weakness identification</li>
</ul>

<h2 id="data-flow-architecture">Data Flow Architecture</h2>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Input Layer</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">User Actions</span>
  <span class="pi">-</span> <span class="s">Question Submissions</span>
  <span class="pi">-</span> <span class="s">Performance Data</span>

<span class="na">Processing Layer</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">Validation Pipeline</span>
  <span class="pi">-</span> <span class="s">Adaptation Engine</span>
  <span class="pi">-</span> <span class="s">Analytics Processor</span>

<span class="na">Storage Layer</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">Questions (DynamoDB/Postgres)</span>
  <span class="pi">-</span> <span class="s">User Profiles (DynamoDB/Postgres)</span>
  <span class="pi">-</span> <span class="s">Analytics (TimeSeries DB)</span>
  <span class="pi">-</span> <span class="s">Cache (Redis)</span>

<span class="na">Output Layer</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">Personalized Sessions</span>
  <span class="pi">-</span> <span class="s">Learning Plans</span>
  <span class="pi">-</span> <span class="s">Analytics Dashboard</span>
  <span class="pi">-</span> <span class="s">Recommendations</span>
</code></pre></div></div>

<h2 id="caching-strategy">Caching Strategy</h2>

<h3 id="l1-cache-memory---5-min-ttl">L1 Cache (Memory - 5 min TTL)</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">LRUCache</span><span class="p">:</span> <span class="p">{</span>
  <span class="nl">max</span><span class="p">:</span> <span class="mi">500</span> <span class="nx">items</span><span class="p">,</span>
  <span class="nx">ttl</span><span class="p">:</span> <span class="mi">300</span> <span class="nx">seconds</span><span class="p">,</span>
  <span class="nx">updateAgeOnGet</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="l2-cache-redis---1-hour-ttl">L2 Cache (Redis - 1 hour TTL)</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">Redis</span><span class="p">:</span> <span class="p">{</span>
  <span class="nl">questions</span><span class="p">:</span> <span class="mi">3600</span><span class="nx">s</span> <span class="nx">TTL</span><span class="p">,</span>
  <span class="nx">userProfiles</span><span class="p">:</span> <span class="mi">1800</span><span class="nx">s</span> <span class="nx">TTL</span><span class="p">,</span>
  <span class="nx">sessions</span><span class="p">:</span> <span class="mi">900</span><span class="nx">s</span> <span class="nx">TTL</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="cache-invalidation">Cache Invalidation</h3>
<ul>
  <li>On question update → Delete question:${id}</li>
  <li>On user progress → Delete user:${id}:profile</li>
  <li>On session complete → Delete session:${id}</li>
</ul>

<hr />

<h1 id="-operational-procedures">📋 Operational Procedures</h1>

<h2 id="daily-operations">Daily Operations</h2>

<h3 id="morning-checklist-9-am">Morning Checklist (9 AM)</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 1. Check system health</span>
curl https://api.quizmentor.com/health

<span class="c"># 2. Review overnight metrics</span>
npm run metrics:daily

<span class="c"># 3. Check error rates</span>
npm run logs:errors <span class="nt">--since</span><span class="o">=</span><span class="s2">"12 hours ago"</span>

<span class="c"># 4. Verify cache performance</span>
redis-cli INFO stats | <span class="nb">grep </span>hit_rate

<span class="c"># 5. Review queue depth</span>
aws sqs get-queue-attributes <span class="nt">--queue-url</span> <span class="nv">$QUEUE_URL</span>
</code></pre></div></div>

<h3 id="afternoon-review-2-pm">Afternoon Review (2 PM)</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 1. Check active sessions</span>
npm run sessions:active

<span class="c"># 2. Monitor response times</span>
npm run metrics:performance

<span class="c"># 3. Review user feedback</span>
npm run feedback:recent

<span class="c"># 4. Check database connections</span>
npm run db:connections
</code></pre></div></div>

<h3 id="end-of-day-6-pm">End of Day (6 PM)</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 1. Generate daily report</span>
npm run report:daily

<span class="c"># 2. Backup critical data</span>
npm run backup:daily

<span class="c"># 3. Clear old cache entries</span>
npm run cache:cleanup

<span class="c"># 4. Archive logs</span>
npm run logs:archive
</code></pre></div></div>

<h2 id="deployment-procedures">Deployment Procedures</h2>

<h3 id="pre-deployment-checklist">Pre-Deployment Checklist</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 1. Run all tests</span>
npm run <span class="nb">test</span>:all

<span class="c"># 2. Check test coverage</span>
npm run <span class="nb">test</span>:coverage
<span class="c"># Minimum: 80% coverage required</span>

<span class="c"># 3. Run performance tests</span>
npm run <span class="nb">test</span>:performance
<span class="c"># Verify: p99 &lt; 1s</span>

<span class="c"># 4. Validate configuration</span>
npm run config:validate

<span class="c"># 5. Create backup</span>
npm run backup:pre-deploy
</code></pre></div></div>

<h3 id="deployment-steps">Deployment Steps</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 1. Blue-Green Deployment</span>
./deploy.sh blue-green production

<span class="c"># 2. Smoke Tests</span>
npm run <span class="nb">test</span>:smoke <span class="nt">--env</span><span class="o">=</span>production

<span class="c"># 3. Monitor metrics (15 minutes)</span>
npm run monitor:deployment

<span class="c"># 4. Gradual traffic shift</span>
./traffic-shift.sh 10 25 50 100

<span class="c"># 5. Full validation</span>
npm run <span class="nb">test</span>:e2e <span class="nt">--env</span><span class="o">=</span>production
</code></pre></div></div>

<h3 id="rollback-procedure">Rollback Procedure</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># If issues detected:</span>

<span class="c"># 1. Immediate rollback</span>
./rollback.sh immediate

<span class="c"># 2. Verify rollback</span>
npm run health:check

<span class="c"># 3. Analyze failure</span>
npm run logs:deployment <span class="nt">--failed</span>

<span class="c"># 4. Create incident report</span>
npm run incident:create
</code></pre></div></div>

<h2 id="database-operations">Database Operations</h2>

<h3 id="schema-migrations">Schema Migrations</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 1. Test migration locally</span>
npm run db:migrate:test

<span class="c"># 2. Backup production</span>
npm run db:backup:prod

<span class="c"># 3. Run migration</span>
npm run db:migrate:prod

<span class="c"># 4. Verify migration</span>
npm run db:verify
</code></pre></div></div>

<h3 id="data-cleanup">Data Cleanup</h3>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- Weekly cleanup tasks</span>

<span class="c1">-- 1. Remove old sessions (&gt;30 days)</span>
<span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">sessions</span> 
<span class="k">WHERE</span> <span class="n">created_at</span> <span class="o">&lt;</span> <span class="n">NOW</span><span class="p">()</span> <span class="o">-</span> <span class="n">INTERVAL</span> <span class="s1">'30 days'</span><span class="p">;</span>

<span class="c1">-- 2. Archive analytics (&gt;90 days)</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">analytics_archive</span> 
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">analytics</span> 
<span class="k">WHERE</span> <span class="n">created_at</span> <span class="o">&lt;</span> <span class="n">NOW</span><span class="p">()</span> <span class="o">-</span> <span class="n">INTERVAL</span> <span class="s1">'90 days'</span><span class="p">;</span>

<span class="c1">-- 3. Vacuum tables</span>
<span class="k">VACUUM</span> <span class="k">ANALYZE</span> <span class="n">questions</span><span class="p">;</span>
<span class="k">VACUUM</span> <span class="k">ANALYZE</span> <span class="n">user_profiles</span><span class="p">;</span>
</code></pre></div></div>

<hr />

<h1 id="-monitoring--alerts">📊 Monitoring &amp; Alerts</h1>

<h2 id="key-metrics-to-monitor">Key Metrics to Monitor</h2>

<h3 id="application-metrics">Application Metrics</h3>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Response Time</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Target</span><span class="pi">:</span> <span class="s">&lt; 200ms (p50)</span>
  <span class="pi">-</span> <span class="na">Alert</span><span class="pi">:</span> <span class="pi">&gt;</span> <span class="err">500ms</span> <span class="err">(p50)</span>
  <span class="pi">-</span> <span class="na">Critical</span><span class="pi">:</span> <span class="pi">&gt;</span> <span class="err">1s</span> <span class="err">(p50)</span>

<span class="na">Error Rate</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Target</span><span class="pi">:</span> <span class="s">&lt; 0.1%</span>
  <span class="pi">-</span> <span class="na">Alert</span><span class="pi">:</span> <span class="pi">&gt;</span> <span class="err">1%</span>
  <span class="pi">-</span> <span class="na">Critical</span><span class="pi">:</span> <span class="pi">&gt;</span> <span class="err">5%</span>

<span class="na">Throughput</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Target</span><span class="pi">:</span> <span class="s">1000 req/s</span>
  <span class="pi">-</span> <span class="na">Alert</span><span class="pi">:</span> <span class="s">&lt; 100 req/s</span>
  <span class="pi">-</span> <span class="na">Critical</span><span class="pi">:</span> <span class="s">&lt; 10 req/s</span>
</code></pre></div></div>

<h3 id="business-metrics">Business Metrics</h3>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Flow State Achievement</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Target</span><span class="pi">:</span> <span class="pi">&gt;</span> <span class="err">30%</span>
  <span class="pi">-</span> <span class="na">Alert</span><span class="pi">:</span> <span class="s">&lt; 20%</span>
  <span class="pi">-</span> <span class="na">Critical</span><span class="pi">:</span> <span class="s">&lt; 10%</span>

<span class="na">Question Validation Accuracy</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Target</span><span class="pi">:</span> <span class="pi">&gt;</span> <span class="err">90%</span>
  <span class="pi">-</span> <span class="na">Alert</span><span class="pi">:</span> <span class="s">&lt; 80%</span>
  <span class="pi">-</span> <span class="na">Critical</span><span class="pi">:</span> <span class="s">&lt; 70%</span>

<span class="na">User Engagement</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Target</span><span class="pi">:</span> <span class="pi">&gt;</span> <span class="err">15</span> <span class="err">min/session</span>
  <span class="pi">-</span> <span class="na">Alert</span><span class="pi">:</span> <span class="s">&lt; 10 min/session</span>
  <span class="pi">-</span> <span class="na">Critical</span><span class="pi">:</span> <span class="s">&lt; 5 min/session</span>
</code></pre></div></div>

<h2 id="alert-configuration">Alert Configuration</h2>

<h3 id="cloudwatch-alarms">CloudWatch Alarms</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// High error rate alarm</span>
<span class="p">{</span>
  <span class="nl">MetricName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Errors</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">Threshold</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="nx">Period</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
  <span class="nx">EvaluationPeriods</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="nx">Actions</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">SNS:PagerDuty</span><span class="dl">'</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1">// High latency alarm</span>
<span class="p">{</span>
  <span class="na">MetricName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Latency</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">Threshold</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
  <span class="na">Period</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
  <span class="na">EvaluationPeriods</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="na">Actions</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">SNS:Slack</span><span class="dl">'</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="custom-metrics">Custom Metrics</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Track Bloom's validation performance</span>
<span class="nx">metrics</span><span class="p">.</span><span class="nx">timing</span><span class="p">(</span><span class="dl">'</span><span class="s1">bloom.validation.duration</span><span class="dl">'</span><span class="p">,</span> <span class="nx">duration</span><span class="p">);</span>
<span class="nx">metrics</span><span class="p">.</span><span class="nx">increment</span><span class="p">(</span><span class="dl">'</span><span class="s1">bloom.validation.count</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">metrics</span><span class="p">.</span><span class="nx">gauge</span><span class="p">(</span><span class="dl">'</span><span class="s1">bloom.validation.confidence</span><span class="dl">'</span><span class="p">,</span> <span class="nx">confidence</span><span class="p">);</span>

<span class="c1">// Track adaptive learning</span>
<span class="nx">metrics</span><span class="p">.</span><span class="nx">histogram</span><span class="p">(</span><span class="dl">'</span><span class="s1">adaptive.session.questions</span><span class="dl">'</span><span class="p">,</span> <span class="nx">questionCount</span><span class="p">);</span>
<span class="nx">metrics</span><span class="p">.</span><span class="nx">gauge</span><span class="p">(</span><span class="dl">'</span><span class="s1">adaptive.flow.achievement</span><span class="dl">'</span><span class="p">,</span> <span class="nx">flowRate</span><span class="p">);</span>
<span class="nx">metrics</span><span class="p">.</span><span class="nx">timing</span><span class="p">(</span><span class="dl">'</span><span class="s1">adaptive.generation.time</span><span class="dl">'</span><span class="p">,</span> <span class="nx">generationTime</span><span class="p">);</span>
</code></pre></div></div>

<hr />

<h1 id="-troubleshooting-guide">🔧 Troubleshooting Guide</h1>

<h2 id="common-issues--solutions">Common Issues &amp; Solutions</h2>

<h3 id="issue-1-slow-response-times">Issue 1: Slow Response Times</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Diagnosis</span>
npm run diagnostics:performance

<span class="c"># Check cache hit rate</span>
redis-cli INFO stats | <span class="nb">grep </span>keyspace_hits

<span class="c"># Check database slow queries</span>
npm run db:slow-queries

<span class="c"># Solutions:</span>
1. Increase cache TTL
2. Add database indexes
3. Scale <span class="nb">read </span>replicas
4. Implement query optimization
</code></pre></div></div>

<h3 id="issue-2-low-flow-state-achievement">Issue 2: Low Flow State Achievement</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Check current settings</span>
<span class="kd">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getConfig</span><span class="p">(</span><span class="dl">'</span><span class="s1">adaptive.flow</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Adjust parameters</span>
<span class="k">await</span> <span class="nx">updateConfig</span><span class="p">(</span><span class="dl">'</span><span class="s1">adaptive.flow</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">optimalChallenge</span><span class="p">:</span> <span class="mf">0.75</span><span class="p">,</span>  <span class="c1">// Adjust ±0.05</span>
  <span class="na">challengeWindow</span><span class="p">:</span> <span class="mf">0.15</span><span class="p">,</span>    <span class="c1">// Increase window</span>
  <span class="na">sweetSpotQuestions</span><span class="p">:</span> <span class="mi">7</span>     <span class="c1">// Optimal count</span>
<span class="p">});</span>

<span class="c1">// Monitor results</span>
<span class="k">await</span> <span class="nx">monitorFlowState</span><span class="p">(</span><span class="nx">userId</span><span class="p">,</span> <span class="mi">24</span><span class="p">);</span> <span class="c1">// 24 hours</span>
</code></pre></div></div>

<h3 id="issue-3-inaccurate-blooms-classification">Issue 3: Inaccurate Bloom’s Classification</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Retrain validation patterns</span>
<span class="k">await</span> <span class="nx">retrainValidator</span><span class="p">({</span>
  <span class="na">additionalKeywords</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">examine</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">investigate</span><span class="dl">'</span><span class="p">],</span>
  <span class="na">adjustWeights</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">keywords</span><span class="p">:</span> <span class="mf">0.45</span><span class="p">,</span>      <span class="c1">// Increase from 0.4</span>
    <span class="na">questionType</span><span class="p">:</span> <span class="mf">0.35</span><span class="p">,</span>  <span class="c1">// Increase from 0.3</span>
    <span class="na">cognitiveProcess</span><span class="p">:</span> <span class="mf">0.2</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// Validate improvements</span>
<span class="kd">const</span> <span class="nx">testSet</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getTestQuestions</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">validateBatch</span><span class="p">(</span><span class="nx">testSet</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Accuracy:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">results</span><span class="p">.</span><span class="nx">accuracy</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="issue-4-memory-leaks">Issue 4: Memory Leaks</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Detect memory leaks</span>
npm run monitor:memory

<span class="c"># Profile heap usage</span>
node <span class="nt">--inspect</span> app.js
<span class="c"># Open chrome://inspect</span>

<span class="c"># Common fixes:</span>
1. Clear event listeners
2. Dispose unused subscriptions
3. Limit cache size
4. Implement proper cleanup
</code></pre></div></div>

<h2 id="debug-commands">Debug Commands</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Enable debug logging</span>
<span class="nv">DEBUG</span><span class="o">=</span>learning:<span class="k">*</span> npm start

<span class="c"># Trace specific user</span>
npm run trace:user <span class="nt">--id</span><span class="o">=</span>user123

<span class="c"># Analyze session</span>
npm run analyze:session <span class="nt">--id</span><span class="o">=</span>session456

<span class="c"># Export metrics</span>
npm run metrics:export <span class="nt">--format</span><span class="o">=</span>json

<span class="c"># Generate performance report</span>
npm run report:performance <span class="nt">--days</span><span class="o">=</span>7
</code></pre></div></div>

<hr />

<h1 id="-incident-response">🚨 Incident Response</h1>

<h2 id="severity-levels">Severity Levels</h2>

<h3 id="sev-1---critical-response-immediate">SEV 1 - Critical (Response: Immediate)</h3>
<ul>
  <li>Complete service outage</li>
  <li>Data loss or corruption</li>
  <li>Security breach</li>
  <li>Flow state &lt; 5%</li>
</ul>

<h3 id="sev-2---major-response-15-minutes">SEV 2 - Major (Response: 15 minutes)</h3>
<ul>
  <li>Partial service degradation</li>
  <li>Response time &gt; 2s</li>
  <li>Error rate &gt; 5%</li>
  <li>Cache failure</li>
</ul>

<h3 id="sev-3---minor-response-1-hour">SEV 3 - Minor (Response: 1 hour)</h3>
<ul>
  <li>Single feature failure</li>
  <li>Non-critical alerts</li>
  <li>Performance degradation</li>
  <li>UI issues</li>
</ul>

<h2 id="incident-response-playbook">Incident Response Playbook</h2>

<h3 id="step-1-assess-5-minutes">Step 1: Assess (5 minutes)</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Quick health check</span>
./scripts/incident-assess.sh

<span class="c"># Check status page</span>
curl https://status.quizmentor.com

<span class="c"># Review recent deployments</span>
git log <span class="nt">--oneline</span> <span class="nt">-10</span>

<span class="c"># Check monitoring dashboard</span>
open https://monitoring.quizmentor.com
</code></pre></div></div>

<h3 id="step-2-mitigate-10-minutes">Step 2: Mitigate (10 minutes)</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Option 1: Rollback</span>
./rollback.sh immediate

<span class="c"># Option 2: Scale up</span>
./scale.sh up 200%

<span class="c"># Option 3: Enable circuit breaker</span>
./circuit-breaker.sh <span class="nb">enable</span>

<span class="c"># Option 4: Redirect traffic</span>
./traffic.sh redirect backup-region
</code></pre></div></div>

<h3 id="step-3-investigate-30-minutes">Step 3: Investigate (30 minutes)</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Collect logs</span>
./collect-logs.sh <span class="nt">--incident-id</span><span class="o">=</span>INC001

<span class="c"># Generate timeline</span>
./timeline.sh <span class="nt">--start</span><span class="o">=</span><span class="s2">"2 hours ago"</span>

<span class="c"># Analyze metrics</span>
./analyze-incident.sh <span class="nt">--id</span><span class="o">=</span>INC001

<span class="c"># Create report</span>
./incident-report.sh create
</code></pre></div></div>

<h3 id="step-4-resolve">Step 4: Resolve</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Apply fix</span>
git checkout <span class="nt">-b</span> hotfix/INC001
<span class="c"># ... make changes ...</span>
git commit <span class="nt">-m</span> <span class="s2">"fix: resolve INC001"</span>

<span class="c"># Deploy fix</span>
./deploy.sh hotfix production

<span class="c"># Verify resolution</span>
./verify-fix.sh INC001

<span class="c"># Update status page</span>
./status-update.sh resolved
</code></pre></div></div>

<h3 id="step-5-post-mortem">Step 5: Post-Mortem</h3>
<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh"># Incident Post-Mortem Template</span>

<span class="gu">## Summary</span>
<span class="p">-</span> Incident ID: INC001
<span class="p">-</span> Duration: 45 minutes
<span class="p">-</span> Impact: 2000 users affected
<span class="p">-</span> Root Cause: Cache invalidation bug

<span class="gu">## Timeline</span>
<span class="p">-</span> 14:00 - Alert triggered
<span class="p">-</span> 14:05 - Team notified
<span class="p">-</span> 14:15 - Mitigation applied
<span class="p">-</span> 14:45 - Full resolution

<span class="gu">## Root Cause Analysis</span>
<span class="p">-</span> Primary: Race condition in cache update
<span class="p">-</span> Contributing: Insufficient testing

<span class="gu">## Action Items</span>
<span class="p">1.</span> Add distributed locks
<span class="p">2.</span> Increase test coverage
<span class="p">3.</span> Improve monitoring

<span class="gu">## Lessons Learned</span>
<span class="p">-</span> Need better cache invalidation strategy
<span class="p">-</span> Require load testing before deploy
</code></pre></div></div>

<hr />

<h1 id="-performance-tuning">⚡ Performance Tuning</h1>

<h2 id="query-optimization">Query Optimization</h2>

<h3 id="optimize-blooms-validation">Optimize Bloom’s Validation</h3>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- Add indexes for common queries</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">idx_questions_bloom_level</span> <span class="k">ON</span> <span class="n">questions</span><span class="p">(</span><span class="n">bloom_level</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">idx_questions_category_difficulty</span> <span class="k">ON</span> <span class="n">questions</span><span class="p">(</span><span class="n">category_id</span><span class="p">,</span> <span class="n">difficulty</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">idx_questions_created</span> <span class="k">ON</span> <span class="n">questions</span><span class="p">(</span><span class="n">created_at</span> <span class="k">DESC</span><span class="p">);</span>

<span class="c1">-- Optimize user queries</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">idx_users_last_active</span> <span class="k">ON</span> <span class="n">user_profiles</span><span class="p">(</span><span class="n">last_active</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">idx_sessions_user_date</span> <span class="k">ON</span> <span class="n">sessions</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">created_at</span> <span class="k">DESC</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="caching-strategies">Caching Strategies</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Implement read-through cache</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">getQuestion</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Check L1 cache</span>
  <span class="kd">let</span> <span class="nx">question</span> <span class="o">=</span> <span class="nx">memCache</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s2">`q:</span><span class="p">${</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">question</span><span class="p">)</span> <span class="k">return</span> <span class="nx">question</span><span class="p">;</span>
  
  <span class="c1">// Check L2 cache</span>
  <span class="nx">question</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">redis</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s2">`question:</span><span class="p">${</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">question</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">memCache</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="s2">`q:</span><span class="p">${</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">question</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">question</span><span class="p">);</span>
  <span class="p">}</span>
  
  <span class="c1">// Load from database</span>
  <span class="nx">question</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">db</span><span class="p">.</span><span class="nx">questions</span><span class="p">.</span><span class="nx">findById</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
  
  <span class="c1">// Update both caches</span>
  <span class="k">await</span> <span class="nx">redis</span><span class="p">.</span><span class="nx">setex</span><span class="p">(</span><span class="s2">`question:</span><span class="p">${</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="mi">3600</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">question</span><span class="p">));</span>
  <span class="nx">memCache</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="s2">`q:</span><span class="p">${</span><span class="nx">id</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">question</span><span class="p">);</span>
  
  <span class="k">return</span> <span class="nx">question</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="resource-optimization">Resource Optimization</h2>

<h3 id="memory-management">Memory Management</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Implement connection pooling</span>
<span class="kd">const</span> <span class="nx">pool</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Pool</span><span class="p">({</span>
  <span class="na">max</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>              <span class="c1">// Maximum connections</span>
  <span class="na">min</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>               <span class="c1">// Minimum connections</span>
  <span class="na">idleTimeoutMillis</span><span class="p">:</span> <span class="mi">30000</span><span class="p">,</span>
  <span class="na">connectionTimeoutMillis</span><span class="p">:</span> <span class="mi">2000</span>
<span class="p">});</span>

<span class="c1">// Implement request batching</span>
<span class="kd">const</span> <span class="nx">batcher</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DataLoader</span><span class="p">(</span><span class="k">async</span> <span class="p">(</span><span class="nx">ids</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">db</span><span class="p">.</span><span class="nx">questions</span><span class="p">.</span><span class="nx">findByIds</span><span class="p">(</span><span class="nx">ids</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">ids</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">id</span> <span class="o">=&gt;</span> <span class="nx">results</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">r</span> <span class="o">=&gt;</span> <span class="nx">r</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">id</span><span class="p">));</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="cpu-optimization">CPU Optimization</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Use worker threads for heavy computation</span>
<span class="kd">const</span> <span class="nx">worker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Worker</span><span class="p">(</span><span class="dl">'</span><span class="s1">./bloom-worker.js</span><span class="dl">'</span><span class="p">);</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">validateBatch</span><span class="p">(</span><span class="nx">questions</span><span class="p">:</span> <span class="nx">Question</span><span class="p">[])</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">worker</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span> <span class="na">cmd</span><span class="p">:</span> <span class="dl">'</span><span class="s1">validate</span><span class="dl">'</span><span class="p">,</span> <span class="nx">questions</span> <span class="p">});</span>
    <span class="nx">worker</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="dl">'</span><span class="s1">message</span><span class="dl">'</span><span class="p">,</span> <span class="nx">resolve</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="c1">// Implement request debouncing</span>
<span class="kd">const</span> <span class="nx">debouncedValidate</span> <span class="o">=</span> <span class="nx">debounce</span><span class="p">(</span><span class="nx">validate</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
</code></pre></div></div>

<hr />

<h1 id="-data-management">📁 Data Management</h1>

<h2 id="backup-strategy">Backup Strategy</h2>

<h3 id="daily-backups">Daily Backups</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># Daily backup script</span>

<span class="nv">DATE</span><span class="o">=</span><span class="si">$(</span><span class="nb">date</span> +%Y%m%d<span class="si">)</span>
<span class="nv">BACKUP_DIR</span><span class="o">=</span><span class="s2">"/backups/daily"</span>

<span class="c"># Backup databases</span>
pg_dump <span class="nv">$DATABASE_URL</span> <span class="o">&gt;</span> <span class="nv">$BACKUP_DIR</span>/postgres_<span class="nv">$DATE</span>.sql
mongodump <span class="nt">--uri</span> <span class="nv">$MONGO_URL</span> <span class="nt">--out</span> <span class="nv">$BACKUP_DIR</span>/mongo_<span class="nv">$DATE</span>

<span class="c"># Backup Redis</span>
redis-cli <span class="nt">--rdb</span> <span class="nv">$BACKUP_DIR</span>/redis_<span class="nv">$DATE</span>.rdb

<span class="c"># Compress and upload to S3</span>
<span class="nb">tar</span> <span class="nt">-czf</span> <span class="nv">$BACKUP_DIR</span>/backup_<span class="nv">$DATE</span>.tar.gz <span class="nv">$BACKUP_DIR</span>/<span class="k">*</span>_<span class="nv">$DATE</span><span class="k">*</span>
aws s3 <span class="nb">cp</span> <span class="nv">$BACKUP_DIR</span>/backup_<span class="nv">$DATE</span>.tar.gz s3://backups/daily/

<span class="c"># Keep only 30 days of backups</span>
find <span class="nv">$BACKUP_DIR</span> <span class="nt">-mtime</span> +30 <span class="nt">-delete</span>
</code></pre></div></div>

<h3 id="recovery-procedures">Recovery Procedures</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Restore from backup</span>
./restore.sh <span class="nt">--date</span><span class="o">=</span>20240825 <span class="nt">--type</span><span class="o">=</span>full

<span class="c"># Point-in-time recovery</span>
./restore.sh <span class="nt">--timestamp</span><span class="o">=</span><span class="s2">"2024-08-25 14:30:00"</span>

<span class="c"># Selective restore</span>
./restore.sh <span class="nt">--table</span><span class="o">=</span>questions <span class="nt">--date</span><span class="o">=</span>20240825
</code></pre></div></div>

<h2 id="data-retention">Data Retention</h2>

<h3 id="retention-policies">Retention Policies</h3>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">User Data</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Active</span><span class="pi">:</span> <span class="s">Indefinite</span>
  <span class="pi">-</span> <span class="na">Inactive (1 year)</span><span class="pi">:</span> <span class="s">Archive</span>
  <span class="pi">-</span> <span class="na">Deleted</span><span class="pi">:</span> <span class="s">30 days then purge</span>

<span class="na">Session Data</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Active</span><span class="pi">:</span> <span class="s">30 days</span>
  <span class="pi">-</span> <span class="na">Completed</span><span class="pi">:</span> <span class="s">90 days</span>
  <span class="pi">-</span> <span class="na">Archive</span><span class="pi">:</span> <span class="s">1 year</span>

<span class="na">Analytics</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Raw</span><span class="pi">:</span> <span class="s">90 days</span>
  <span class="pi">-</span> <span class="na">Aggregated</span><span class="pi">:</span> <span class="s">2 years</span>
  <span class="pi">-</span> <span class="na">Reports</span><span class="pi">:</span> <span class="s">Indefinite</span>
</code></pre></div></div>

<h3 id="gdpr-compliance">GDPR Compliance</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// User data export</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">exportUserData</span><span class="p">(</span><span class="nx">userId</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">profile</span><span class="p">:</span> <span class="k">await</span> <span class="nx">db</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">findById</span><span class="p">(</span><span class="nx">userId</span><span class="p">),</span>
    <span class="na">sessions</span><span class="p">:</span> <span class="k">await</span> <span class="nx">db</span><span class="p">.</span><span class="nx">sessions</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span> <span class="nx">userId</span> <span class="p">}),</span>
    <span class="na">analytics</span><span class="p">:</span> <span class="k">await</span> <span class="nx">db</span><span class="p">.</span><span class="nx">analytics</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span> <span class="nx">userId</span> <span class="p">}),</span>
    <span class="na">questions</span><span class="p">:</span> <span class="k">await</span> <span class="nx">db</span><span class="p">.</span><span class="nx">userQuestions</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span> <span class="nx">userId</span> <span class="p">})</span>
  <span class="p">};</span>
  
  <span class="k">return</span> <span class="nx">generateGDPRReport</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// User data deletion</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">deleteUserData</span><span class="p">(</span><span class="nx">userId</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">await</span> <span class="nx">db</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">softDelete</span><span class="p">(</span><span class="nx">userId</span><span class="p">);</span>
  <span class="k">await</span> <span class="nx">db</span><span class="p">.</span><span class="nx">sessions</span><span class="p">.</span><span class="nx">anonymize</span><span class="p">({</span> <span class="nx">userId</span> <span class="p">});</span>
  <span class="k">await</span> <span class="nx">db</span><span class="p">.</span><span class="nx">analytics</span><span class="p">.</span><span class="nx">remove</span><span class="p">({</span> <span class="nx">userId</span> <span class="p">});</span>
  
  <span class="c1">// Schedule hard delete after 30 days</span>
  <span class="k">await</span> <span class="nx">scheduleHardDelete</span><span class="p">(</span><span class="nx">userId</span><span class="p">,</span> <span class="mi">30</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h1 id="-security-operations">🔒 Security Operations</h1>

<h2 id="security-checklist">Security Checklist</h2>

<h3 id="api-security">API Security</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Rate limiting</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">rateLimit</span><span class="p">({</span>
  <span class="na">windowMs</span><span class="p">:</span> <span class="mi">15</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span> <span class="c1">// 15 minutes</span>
  <span class="na">max</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="c1">// Max requests</span>
  <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Too many requests</span><span class="dl">'</span>
<span class="p">}));</span>

<span class="c1">// Input validation</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">helmet</span><span class="p">());</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span> <span class="na">limit</span><span class="p">:</span> <span class="dl">'</span><span class="s1">10mb</span><span class="dl">'</span> <span class="p">}));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">mongoSanitize</span><span class="p">());</span>

<span class="c1">// Authentication</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">jwt</span><span class="p">({</span>
  <span class="na">secret</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">JWT_SECRET</span><span class="p">,</span>
  <span class="na">algorithms</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">HS256</span><span class="dl">'</span><span class="p">]</span>
<span class="p">}));</span>
</code></pre></div></div>

<h3 id="data-protection">Data Protection</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Encryption at rest</span>
<span class="kd">const</span> <span class="nx">encrypted</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">AES</span><span class="p">.</span><span class="nx">encrypt</span><span class="p">(</span>
  <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">),</span>
  <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">ENCRYPTION_KEY</span>
<span class="p">).</span><span class="nx">toString</span><span class="p">();</span>

<span class="c1">// Encryption in transit</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">enforce</span><span class="p">.</span><span class="nx">HTTPS</span><span class="p">());</span>

<span class="c1">// Sensitive data masking</span>
<span class="kd">function</span> <span class="nx">maskSensitive</span><span class="p">(</span><span class="nx">data</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">masked</span> <span class="o">=</span> <span class="p">{</span> <span class="p">...</span><span class="nx">data</span> <span class="p">};</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">masked</span><span class="p">.</span><span class="nx">email</span><span class="p">)</span> <span class="nx">masked</span><span class="p">.</span><span class="nx">email</span> <span class="o">=</span> <span class="nx">mask</span><span class="p">(</span><span class="nx">masked</span><span class="p">.</span><span class="nx">email</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">masked</span><span class="p">.</span><span class="nx">apiKey</span><span class="p">)</span> <span class="nx">masked</span><span class="p">.</span><span class="nx">apiKey</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">***</span><span class="dl">'</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">masked</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="security-monitoring">Security Monitoring</h2>

<h3 id="audit-logging">Audit Logging</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Log all critical operations</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">auditLog</span><span class="p">(</span><span class="nx">action</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">details</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">await</span> <span class="nx">db</span><span class="p">.</span><span class="nx">auditLogs</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
    <span class="na">timestamp</span><span class="p">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span>
    <span class="nx">action</span><span class="p">,</span>
    <span class="na">userId</span><span class="p">:</span> <span class="nx">details</span><span class="p">.</span><span class="nx">userId</span><span class="p">,</span>
    <span class="na">ip</span><span class="p">:</span> <span class="nx">details</span><span class="p">.</span><span class="nx">ip</span><span class="p">,</span>
    <span class="na">userAgent</span><span class="p">:</span> <span class="nx">details</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">,</span>
    <span class="na">details</span><span class="p">:</span> <span class="nx">maskSensitive</span><span class="p">(</span><span class="nx">details</span><span class="p">)</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="c1">// Monitor suspicious activity</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">detectAnomaly</span><span class="p">(</span><span class="nx">userId</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">recentActivity</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getRecentActivity</span><span class="p">(</span><span class="nx">userId</span><span class="p">);</span>
  
  <span class="k">if</span> <span class="p">(</span><span class="nx">recentActivity</span><span class="p">.</span><span class="nx">failedLogins</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">lockAccount</span><span class="p">(</span><span class="nx">userId</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">notifySecurityTeam</span><span class="p">(</span><span class="nx">userId</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Multiple failed logins</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
  
  <span class="k">if</span> <span class="p">(</span><span class="nx">recentActivity</span><span class="p">.</span><span class="nx">requestRate</span> <span class="o">&gt;</span> <span class="mi">1000</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">enableRateLimiting</span><span class="p">(</span><span class="nx">userId</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">notifySecurityTeam</span><span class="p">(</span><span class="nx">userId</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Unusual request rate</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h1 id="-capacity-planning">📈 Capacity Planning</h1>

<h2 id="growth-projections">Growth Projections</h2>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Current (Month 1)</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Users</span><span class="pi">:</span> <span class="s">1,000</span>
  <span class="pi">-</span> <span class="na">Sessions/day</span><span class="pi">:</span> <span class="s">5,000</span>
  <span class="pi">-</span> <span class="na">Storage</span><span class="pi">:</span> <span class="s">10GB</span>
  <span class="pi">-</span> <span class="na">Cost</span><span class="pi">:</span> <span class="s">$0-10/month</span>

<span class="na">Growth (Month 6)</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Users</span><span class="pi">:</span> <span class="s">10,000</span>
  <span class="pi">-</span> <span class="na">Sessions/day</span><span class="pi">:</span> <span class="s">50,000</span>
  <span class="pi">-</span> <span class="na">Storage</span><span class="pi">:</span> <span class="s">100GB</span>
  <span class="pi">-</span> <span class="na">Cost</span><span class="pi">:</span> <span class="s">$70/month</span>

<span class="na">Scale (Month 12)</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Users</span><span class="pi">:</span> <span class="s">50,000</span>
  <span class="pi">-</span> <span class="na">Sessions/day</span><span class="pi">:</span> <span class="s">250,000</span>
  <span class="pi">-</span> <span class="na">Storage</span><span class="pi">:</span> <span class="s">500GB</span>
  <span class="pi">-</span> <span class="na">Cost</span><span class="pi">:</span> <span class="s">$200/month</span>
</code></pre></div></div>

<h2 id="scaling-triggers">Scaling Triggers</h2>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Auto-Scaling Rules</span><span class="pi">:</span>
  <span class="na">CPU &gt; 70%</span><span class="pi">:</span> <span class="s">Scale up 50%</span>
  <span class="na">Memory &gt; 80%</span><span class="pi">:</span> <span class="s">Scale up 25%</span>
  <span class="na">Queue Depth &gt; 1000</span><span class="pi">:</span> <span class="s">Add worker</span>
  <span class="na">Response Time &gt; 500ms</span><span class="pi">:</span> <span class="s">Add instance</span>
  
<span class="na">Scale-Down Rules</span><span class="pi">:</span>
  <span class="na">CPU &lt; 30%</span><span class="pi">:</span> <span class="s">Scale down 25%</span>
  <span class="na">Memory &lt; 40%</span><span class="pi">:</span> <span class="s">Scale down 25%</span>
  <span class="na">Queue Depth &lt; 100</span><span class="pi">:</span> <span class="s">Remove worker</span>
  <span class="na">Response Time &lt; 100ms</span><span class="pi">:</span> <span class="s">Remove instance</span>
</code></pre></div></div>

<hr />

<h1 id="-appendix">📝 Appendix</h1>

<h2 id="configuration-files">Configuration Files</h2>

<h3 id="environment-variables">Environment Variables</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># .env.production</span>
<span class="nv">NODE_ENV</span><span class="o">=</span>production
<span class="nv">DATABASE_URL</span><span class="o">=</span>postgresql://...
<span class="nv">REDIS_URL</span><span class="o">=</span>redis://...
<span class="nv">JWT_SECRET</span><span class="o">=</span>...
<span class="nv">ENCRYPTION_KEY</span><span class="o">=</span>...
<span class="nv">SENTRY_DSN</span><span class="o">=</span>...
<span class="nv">AWS_REGION</span><span class="o">=</span>us-east-1
<span class="nv">S3_BUCKET</span><span class="o">=</span>quizmentor-prod
<span class="nv">SQS_QUEUE_URL</span><span class="o">=</span>...
</code></pre></div></div>

<h3 id="docker-configuration">Docker Configuration</h3>
<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Dockerfile</span>
<span class="k">FROM</span><span class="s"> node:18-alpine</span>
<span class="k">WORKDIR</span><span class="s"> /app</span>
<span class="k">COPY</span><span class="s"> package*.json ./</span>
<span class="k">RUN </span>npm ci <span class="nt">--only</span><span class="o">=</span>production
<span class="k">COPY</span><span class="s"> . .</span>
<span class="k">RUN </span>npm run build
<span class="k">EXPOSE</span><span class="s"> 3000</span>
<span class="k">CMD</span><span class="s"> ["npm", "start"]</span>
</code></pre></div></div>

<h3 id="kubernetes-deployment">Kubernetes Deployment</h3>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">learning-system</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">3</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">learning</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">learning</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">app</span>
        <span class="na">image</span><span class="pi">:</span> <span class="s">quizmentor/learning:latest</span>
        <span class="na">ports</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="m">3000</span>
        <span class="na">env</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">NODE_ENV</span>
          <span class="na">value</span><span class="pi">:</span> <span class="s">production</span>
        <span class="na">resources</span><span class="pi">:</span>
          <span class="na">requests</span><span class="pi">:</span>
            <span class="na">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">256Mi"</span>
            <span class="na">cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">250m"</span>
          <span class="na">limits</span><span class="pi">:</span>
            <span class="na">memory</span><span class="pi">:</span> <span class="s2">"</span><span class="s">512Mi"</span>
            <span class="na">cpu</span><span class="pi">:</span> <span class="s2">"</span><span class="s">500m"</span>
        <span class="na">livenessProbe</span><span class="pi">:</span>
          <span class="na">httpGet</span><span class="pi">:</span>
            <span class="na">path</span><span class="pi">:</span> <span class="s">/health</span>
            <span class="na">port</span><span class="pi">:</span> <span class="m">3000</span>
          <span class="na">initialDelaySeconds</span><span class="pi">:</span> <span class="m">30</span>
          <span class="na">periodSeconds</span><span class="pi">:</span> <span class="m">10</span>
        <span class="na">readinessProbe</span><span class="pi">:</span>
          <span class="na">httpGet</span><span class="pi">:</span>
            <span class="na">path</span><span class="pi">:</span> <span class="s">/ready</span>
            <span class="na">port</span><span class="pi">:</span> <span class="m">3000</span>
          <span class="na">initialDelaySeconds</span><span class="pi">:</span> <span class="m">5</span>
          <span class="na">periodSeconds</span><span class="pi">:</span> <span class="m">5</span>
</code></pre></div></div>

<h2 id="useful-scripts">Useful Scripts</h2>

<h3 id="health-check-script">Health Check Script</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># health-check.sh</span>

<span class="nb">echo</span> <span class="s2">"🔍 Checking System Health..."</span>

<span class="c"># API Health</span>
<span class="nv">API_STATUS</span><span class="o">=</span><span class="si">$(</span>curl <span class="nt">-s</span> <span class="nt">-o</span> /dev/null <span class="nt">-w</span> <span class="s2">"%{http_code}"</span> https://api.quizmentor.com/health<span class="si">)</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$API_STATUS</span> <span class="nt">-eq</span> 200 <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"✅ API: Healthy"</span>
<span class="k">else
    </span><span class="nb">echo</span> <span class="s2">"❌ API: Unhealthy (Status: </span><span class="nv">$API_STATUS</span><span class="s2">)"</span>
<span class="k">fi</span>

<span class="c"># Database Health</span>
<span class="nv">DB_STATUS</span><span class="o">=</span><span class="si">$(</span>psql <span class="nv">$DATABASE_URL</span> <span class="nt">-c</span> <span class="s2">"SELECT 1"</span> <span class="o">&gt;</span> /dev/null 2&gt;&amp;1 <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">"ok"</span> <span class="o">||</span> <span class="nb">echo</span> <span class="s2">"fail"</span><span class="si">)</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$DB_STATUS</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"ok"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"✅ Database: Connected"</span>
<span class="k">else
    </span><span class="nb">echo</span> <span class="s2">"❌ Database: Connection Failed"</span>
<span class="k">fi</span>

<span class="c"># Redis Health</span>
<span class="nv">REDIS_STATUS</span><span class="o">=</span><span class="si">$(</span>redis-cli ping 2&gt;/dev/null<span class="si">)</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$REDIS_STATUS</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"PONG"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"✅ Redis: Connected"</span>
<span class="k">else
    </span><span class="nb">echo</span> <span class="s2">"❌ Redis: Connection Failed"</span>
<span class="k">fi</span>

<span class="c"># Queue Depth</span>
<span class="nv">QUEUE_DEPTH</span><span class="o">=</span><span class="si">$(</span>aws sqs get-queue-attributes <span class="nt">--queue-url</span> <span class="nv">$QUEUE_URL</span> <span class="nt">--attribute-names</span> ApproximateNumberOfMessages <span class="nt">--query</span> <span class="s1">'Attributes.ApproximateNumberOfMessages'</span> <span class="nt">--output</span> text<span class="si">)</span>
<span class="nb">echo</span> <span class="s2">"📊 Queue Depth: </span><span class="nv">$QUEUE_DEPTH</span><span class="s2"> messages"</span>

<span class="c"># Active Sessions</span>
<span class="nv">SESSIONS</span><span class="o">=</span><span class="si">$(</span>redis-cli get active_sessions 2&gt;/dev/null <span class="o">||</span> <span class="nb">echo</span> <span class="s2">"0"</span><span class="si">)</span>
<span class="nb">echo</span> <span class="s2">"👥 Active Sessions: </span><span class="nv">$SESSIONS</span><span class="s2">"</span>

<span class="nb">echo</span> <span class="s2">"✨ Health Check Complete!"</span>
</code></pre></div></div>

<h3 id="performance-test-script">Performance Test Script</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># perf-test.sh</span>

<span class="nb">echo</span> <span class="s2">"⚡ Running Performance Tests..."</span>

<span class="c"># Test Bloom's Validation</span>
<span class="nb">echo</span> <span class="s2">"Testing Bloom's Validation..."</span>
ab <span class="nt">-n</span> 1000 <span class="nt">-c</span> 10 <span class="nt">-T</span> application/json <span class="nt">-p</span> test-question.json <span class="se">\</span>
   https://api.quizmentor.com/validate

<span class="c"># Test Session Generation</span>
<span class="nb">echo</span> <span class="s2">"Testing Session Generation..."</span>
ab <span class="nt">-n</span> 100 <span class="nt">-c</span> 5 <span class="nt">-T</span> application/json <span class="nt">-p</span> test-session.json <span class="se">\</span>
   https://api.quizmentor.com/session/generate

<span class="c"># Test Analytics Query</span>
<span class="nb">echo</span> <span class="s2">"Testing Analytics..."</span>
ab <span class="nt">-n</span> 500 <span class="nt">-c</span> 10 <span class="se">\</span>
   https://api.quizmentor.com/analytics/user/test

<span class="nb">echo</span> <span class="s2">"✅ Performance Tests Complete!"</span>
</code></pre></div></div>

<h2 id="contact-information">Contact Information</h2>

<h3 id="escalation-matrix">Escalation Matrix</h3>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Level 1 (Business Hours)</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Slack</span><span class="pi">:</span> <span class="c1">#learning-system</span>
  <span class="pi">-</span> <span class="na">Email</span><span class="pi">:</span> <span class="s">support@quizmentor.com</span>
  <span class="pi">-</span> <span class="na">Response</span><span class="pi">:</span> <span class="s">1 hour</span>

<span class="na">Level 2 (Critical)</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">PagerDuty</span><span class="pi">:</span> <span class="s">learning-oncall</span>
  <span class="pi">-</span> <span class="na">Phone</span><span class="pi">:</span> <span class="s">+1-XXX-XXX-XXXX</span>
  <span class="pi">-</span> <span class="na">Response</span><span class="pi">:</span> <span class="s">15 minutes</span>

<span class="na">Level 3 (Emergency)</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Incident Commander</span><span class="pi">:</span> <span class="s">John Doe</span>
  <span class="pi">-</span> <span class="na">Phone</span><span class="pi">:</span> <span class="s">+1-XXX-XXX-XXXX</span>
  <span class="pi">-</span> <span class="na">Backup</span><span class="pi">:</span> <span class="s">Jane Smith</span>
  <span class="pi">-</span> <span class="na">Response</span><span class="pi">:</span> <span class="s">Immediate</span>
</code></pre></div></div>

<h3 id="team-responsibilities">Team Responsibilities</h3>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">Learning Team</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">Bloom's Validation</span>
  <span class="pi">-</span> <span class="s">Adaptive Algorithms</span>
  <span class="pi">-</span> <span class="s">Learning Plans</span>

<span class="na">Platform Team</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">Infrastructure</span>
  <span class="pi">-</span> <span class="s">Monitoring</span>
  <span class="pi">-</span> <span class="s">Deployments</span>

<span class="na">Data Team</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">Analytics</span>
  <span class="pi">-</span> <span class="s">Reporting</span>
  <span class="pi">-</span> <span class="s">ML Models</span>

<span class="na">Security Team</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">Access Control</span>
  <span class="pi">-</span> <span class="s">Compliance</span>
  <span class="pi">-</span> <span class="s">Auditing</span>
</code></pre></div></div>

<hr />

<h2 id="quick-reference-card">Quick Reference Card</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 🚀 Common Commands</span>
npm run dev                      <span class="c"># Start development</span>
npm run <span class="nb">test</span>:all                 <span class="c"># Run all tests</span>
npm run deploy:prod              <span class="c"># Deploy to production</span>
npm run rollback                 <span class="c"># Rollback deployment</span>
npm run logs:tail                <span class="c"># Tail logs</span>
npm run metrics:dashboard        <span class="c"># Open metrics dashboard</span>
npm run incident:create          <span class="c"># Create incident</span>
npm run backup:now               <span class="c"># Create backup</span>

<span class="c"># 🔍 Debugging</span>
<span class="nv">DEBUG</span><span class="o">=</span>learning:<span class="k">*</span> npm start       <span class="c"># Enable debug logs</span>
npm run trace:user <span class="nt">--id</span><span class="o">=</span>123      <span class="c"># Trace user activity</span>
npm run analyze:session <span class="nt">--id</span><span class="o">=</span>456 <span class="c"># Analyze session</span>
npm run db:explain <span class="nt">--query</span><span class="o">=</span><span class="s2">"..."</span> <span class="c"># Explain query</span>

<span class="c"># 📊 Monitoring</span>
npm run health:check             <span class="c"># Health check</span>
npm run metrics:export           <span class="c"># Export metrics</span>
npm run report:daily             <span class="c"># Generate daily report</span>
npm run alerts:test              <span class="c"># Test alerts</span>

<span class="c"># 🔧 Maintenance</span>
npm run cache:clear              <span class="c"># Clear cache</span>
npm run db:vacuum                <span class="c"># Vacuum database</span>
npm run logs:archive             <span class="c"># Archive old logs</span>
npm run cleanup:old-sessions     <span class="c"># Clean old sessions</span>
</code></pre></div></div>

<hr />

<p><em>Last Updated: August 2024</em>
<em>Version: 1.0.0</em>
<em>Next Review: September 2024</em></p>



<div style="margin-top: 3rem; padding: 1rem; background: #f6f8fa; border-radius: 5px;">
  <p style="margin: 0; color: #666; font-size: 0.9em;">
    📁 Source: QuizMentor / SELF_LEARNING_OPERATIONAL_RUNBOOK.md
  </p>
</div>

  </main>

  <footer>
    <p>&copy; 2024 NatureQuest. Documentation Hub v1.0.0</p>
  </footer>

  <script>
    (function() {
      const html = document.documentElement;
      const buttons = [];
      function setActive(theme) {
        buttons.forEach(b => {
          const active = b.dataset.theme === theme;
          b.classList.toggle('active', active);
          b.setAttribute('aria-pressed', active ? 'true' : 'false');
        });
      }
      function applyTheme(theme) {
        if (theme === 'auto') {
          html.removeAttribute('data-theme');
          localStorage.removeItem('theme');
        } else {
          html.setAttribute('data-theme', theme);
          localStorage.setItem('theme', theme);
        }
        setActive(theme);
      }
      document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.theme-btn').forEach(btn => {
          buttons.push(btn);
          btn.addEventListener('click', () => applyTheme(btn.dataset.theme));
        });
        const saved = localStorage.getItem('theme');
        if (saved === 'light' || saved === 'dark') {
          applyTheme(saved);
        } else {
          applyTheme('auto');
        }
      });
    })();
  </script>
</body>
</html>
