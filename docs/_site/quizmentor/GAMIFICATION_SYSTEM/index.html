<!DOCTYPE html>
<html lang="en" data-theme="auto">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAMIFICATION SYSTEM</title>
    
    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    
    <style>
    /* Light mode variables */
    :root {
      --primary: #007AFF;
      --primary-hover: #0051D5;
      --success: #34C759;
      --warning: #FF9500;
      --danger: #FF3B30;
      --text-primary: #000000;
      --text-secondary: #3C3C43;
      --text-tertiary: #8E8E93;
      --bg-primary: #FFFFFF;
      --bg-secondary: #F2F2F7;
      --bg-tertiary: #FFFFFF;
      --bg-elevated: #FFFFFF;
      --border: rgba(0, 0, 0, 0.1);
      --border-subtle: rgba(0, 0, 0, 0.04);
      --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.06), 0 1px 2px rgba(0, 0, 0, 0.12);
      --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07), 0 2px 4px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.1), 0 4px 10px rgba(0, 0, 0, 0.08);
      --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.15);
      --backdrop: rgba(255, 255, 255, 0.8);
      --code-bg: #F7F7FA;
      --code-border: rgba(0, 0, 0, 0.06);
      --nav-bg: rgba(255, 255, 255, 0.72);
      --card-bg: #FFFFFF;
      --hover-bg: rgba(0, 122, 255, 0.08);
    }
    
    /* Dark mode variables */
    [data-theme="dark"] {
      --primary: #0A84FF;
      --primary-hover: #409CFF;
      --success: #32D74B;
      --warning: #FF9F0A;
      --danger: #FF453A;
      --text-primary: #FFFFFF;
      --text-secondary: #EBEBF5;
      --text-tertiary: #8E8E93;
      --bg-primary: #000000;
      --bg-secondary: #1C1C1E;
      --bg-tertiary: #2C2C2E;
      --bg-elevated: #1C1C1E;
      --border: rgba(255, 255, 255, 0.15);
      --border-subtle: rgba(255, 255, 255, 0.06);
      --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.4);
      --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4), 0 2px 4px rgba(0, 0, 0, 0.3);
      --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.5), 0 4px 10px rgba(0, 0, 0, 0.4);
      --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.6);
      --backdrop: rgba(28, 28, 30, 0.8);
      --code-bg: #1C1C1E;
      --code-border: rgba(255, 255, 255, 0.08);
      --nav-bg: rgba(28, 28, 30, 0.72);
      --card-bg: #1C1C1E;
      --hover-bg: rgba(10, 132, 255, 0.15);
    }
    
    /* Auto theme based on system preference */
    @media (prefers-color-scheme: dark) {
      :root:not([data-theme="light"]) {
        --primary: #0A84FF;
        --primary-hover: #409CFF;
        --success: #32D74B;
        --warning: #FF9F0A;
        --danger: #FF453A;
        --text-primary: #FFFFFF;
        --text-secondary: #EBEBF5;
        --text-tertiary: #8E8E93;
        --bg-primary: #000000;
        --bg-secondary: #1C1C1E;
        --bg-tertiary: #2C2C2E;
        --bg-elevated: #1C1C1E;
        --border: rgba(255, 255, 255, 0.15);
        --border-subtle: rgba(255, 255, 255, 0.06);
        --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.4);
        --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4), 0 2px 4px rgba(0, 0, 0, 0.3);
        --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.5), 0 4px 10px rgba(0, 0, 0, 0.4);
        --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.6);
        --backdrop: rgba(28, 28, 30, 0.8);
        --code-bg: #1C1C1E;
        --code-border: rgba(255, 255, 255, 0.08);
        --nav-bg: rgba(28, 28, 30, 0.72);
        --card-bg: #1C1C1E;
        --hover-bg: rgba(10, 132, 255, 0.15);
      }
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    html {
      scroll-behavior: smooth;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
      font-size: 17px;
      line-height: 1.6;
      color: var(--text-primary);
      background: var(--bg-primary);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 24px;
    }
    
    /* Typography */
    p {
      margin: 1.2rem 0;
      color: var(--text-secondary);
      letter-spacing: -0.011em;
    }
    
    a {
      color: var(--primary);
      text-decoration: none;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 2px;
    }
    
    a:hover {
      color: var(--primary-hover);
      text-decoration: none;
    }
    
    a:focus {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }
    
    /* Headings */
    h1, h2, h3, h4, h5, h6 {
      font-weight: 600;
      line-height: 1.2;
      margin-top: 2.5rem;
      margin-bottom: 1rem;
      letter-spacing: -0.02em;
      color: var(--text-primary);
    }
    
    h1 {
      font-size: 3rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-hover) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-top: 0;
      margin-bottom: 1.5rem;
    }
    
    h2 {
      font-size: 2rem;
      font-weight: 600;
      color: var(--text-primary);
      border-bottom: 1px solid var(--border-subtle);
      padding-bottom: 0.75rem;
      margin-top: 3rem;
    }
    
    h3 {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--text-primary);
    }
    
    h4 {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text-secondary);
    }
    
    /* Lists */
    ul, ol {
      padding-left: 2rem;
      margin: 1.5rem 0;
      color: var(--text-secondary);
    }
    
    li {
      margin: 0.75rem 0;
      line-height: 1.6;
    }
    
    /* Strong text */
    strong, b {
      font-weight: 600;
      color: var(--text-primary);
    }
    
    /* Navigation */
    .nav-wrapper {
      position: sticky;
      top: 0;
      z-index: 100;
      background: var(--nav-bg);
      backdrop-filter: saturate(180%) blur(20px);
      -webkit-backdrop-filter: saturate(180%) blur(20px);
      border-bottom: 1px solid var(--border);
      margin-bottom: 2rem;
    }
    
    nav {
      padding: 1rem 0;
    }
    
    .nav-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    nav ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }
    
    nav li {
      margin: 0;
    }
    
    nav a {
      color: var(--text-secondary);
      text-decoration: none;
      font-weight: 500;
      font-size: 0.95rem;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    nav a:hover {
      background: var(--hover-bg);
      color: var(--primary);
    }
    
    nav a:focus {
      outline: none;
    }
    
    /* Theme Switcher */
    .theme-switcher {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.375rem;
      background: var(--bg-secondary);
      border-radius: 10px;
      border: 1px solid var(--border-subtle);
    }
    
    .theme-btn {
      padding: 0.375rem 0.625rem;
      background: transparent;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      color: var(--text-tertiary);
      font-size: 0.875rem;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }
    
    .theme-btn:hover {
      color: var(--text-secondary);
    }
    
    .theme-btn.active {
      background: var(--card-bg);
      color: var(--text-primary);
      box-shadow: var(--shadow-sm);
    }
    
    /* Code blocks */
    pre {
      background: var(--code-bg);
      padding: 1.5rem;
      border-radius: 12px;
      overflow-x: auto;
      border: 1px solid var(--code-border);
      margin: 2rem 0;
      font-size: 0.875rem;
      box-shadow: var(--shadow-sm);
    }
    
    code {
      font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
      background: var(--code-bg);
      padding: 0.125rem 0.375rem;
      border-radius: 4px;
      font-size: 0.875em;
      border: 1px solid var(--code-border);
    }
    
    pre code {
      background: none;
      padding: 0;
      border: none;
      font-size: 0.875rem;
    }
    
    /* Tables */
    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      margin: 2rem 0;
      font-size: 0.95rem;
      background: var(--card-bg);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: var(--shadow-md);
    }
    
    th, td {
      padding: 1rem;
      text-align: left;
      border-bottom: 1px solid var(--border-subtle);
    }
    
    th {
      background: var(--bg-secondary);
      font-weight: 600;
      font-size: 0.875rem;
      color: var(--text-secondary);
    }
    
    td {
      color: var(--text-secondary);
    }
    
    tr:last-child td {
      border-bottom: none;
    }
    
    tr:hover {
      background: var(--hover-bg);
    }
    
    /* Blockquotes */
    blockquote {
      margin: 2rem 0;
      padding: 1.25rem;
      border-left: 4px solid var(--primary);
      background: var(--bg-secondary);
      border-radius: 0 12px 12px 0;
      color: var(--text-secondary);
      font-style: normal;
    }
    
    blockquote p {
      margin: 0.5rem 0;
    }
    
    /* Horizontal rules */
    hr {
      border: none;
      height: 1px;
      background: var(--border);
      margin: 3rem 0;
    }
    
    /* Cards */
    .card {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
      margin: 1rem 0;
      box-shadow: var(--shadow-sm);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .card:hover {
      box-shadow: var(--shadow-lg);
      transform: translateY(-2px);
    }
    
    /* Main content */
    main {
      min-height: calc(100vh - 200px);
      padding: 2rem 0;
    }
    
    /* Footer */
    footer {
      margin-top: 4rem;
      padding: 2rem 0;
      border-top: 1px solid var(--border);
      color: var(--text-tertiary);
      font-size: 0.875rem;
      text-align: center;
    }
    
    /* Grid for cards */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      h1 { font-size: 2.5rem; }
      h2 { font-size: 1.75rem; }
      h3 { font-size: 1.375rem; }
      
      .nav-content {
        flex-direction: column;
        gap: 1rem;
      }
      
      nav ul {
        flex-wrap: wrap;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div class="nav-wrapper">
    <div class="container">
      <nav class="nav-content">
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/architecture/">Architecture</a></li>
          <li><a href="/all-docs/">All Docs</a></li>
          <li><a href="/learning-roadmap/">Learning Roadmaps</a></li>
          <li><a href="/devmentor/">DevMentor</a></li>
          <li><a href="/quizmentor/">QuizMentor</a></li>
          <li><a href="/harvest/">Harvest.ai</a></li>
          <li><a href="/naturequest-auth/">Auth</a></li>
          <li><a href="/infrastructure/">Infrastructure</a></li>
        </ul>
        <div class="theme-switcher" aria-label="Theme Switcher">
          <button class="theme-btn" data-theme="light" aria-pressed="false" title="Light mode">üåû Light</button>
          <button class="theme-btn active" data-theme="auto" aria-pressed="true" title="Auto mode">üß≠ Auto</button>
          <button class="theme-btn" data-theme="dark" aria-pressed="false" title="Dark mode">üåô Dark</button>
        </div>
      </nav>
    </div>
  </div>

  <main class="container">
    <div class="product-header" style="background: #f6f8fa; padding: 1rem; border-radius: 5px; margin-bottom: 2rem;">
  <span style="color: #666;">QuizMentor</span> / 
  <span style="color: #999;">GAMIFICATION_SYSTEM.md</span>
</div>

<h1>GAMIFICATION SYSTEM</h1>


<h1 id="-gamification-system-documentation">üéÆ Gamification System Documentation</h1>

<h2 id="overview">Overview</h2>

<p>The QuizMentor gamification system is designed to maximize user engagement through proven psychological patterns while maintaining an enjoyable learning experience. This document details all gamification mechanics, formulas, and implementation strategies.</p>

<h2 id="-core-systems">üìä Core Systems</h2>

<h3 id="1-xp--leveling-system">1. XP &amp; Leveling System</h3>

<h4 id="level-calculation-formula">Level Calculation Formula</h4>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Base configuration</span>
<span class="kd">const</span> <span class="nx">LEVEL_CONFIG</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">baseXP</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>      <span class="c1">// XP required for level 1</span>
  <span class="na">exponent</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>    <span class="c1">// Growth rate</span>
  <span class="na">maxLevel</span><span class="p">:</span> <span class="mi">100</span>     <span class="c1">// Level cap</span>
<span class="p">};</span>

<span class="c1">// XP required for next level</span>
<span class="nx">XPRequired</span> <span class="o">=</span> <span class="nx">baseXP</span> <span class="o">*</span> <span class="p">(</span><span class="nx">currentLevel</span> <span class="o">^</span> <span class="nx">exponent</span><span class="p">)</span>

<span class="c1">// Examples:</span>
<span class="nx">Level</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">100</span> <span class="nx">XP</span>
<span class="nx">Level</span> <span class="mi">10</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span><span class="mi">162</span> <span class="nx">XP</span>  
<span class="nx">Level</span> <span class="mi">25</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span><span class="mi">500</span> <span class="nx">XP</span>
<span class="nx">Level</span> <span class="mi">50</span><span class="p">:</span> <span class="mi">35</span><span class="p">,</span><span class="mi">355</span> <span class="nx">XP</span>
<span class="nx">Level</span> <span class="mi">100</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span><span class="mi">000</span> <span class="nx">XP</span>
</code></pre></div></div>

<h4 id="xp-sources">XP Sources</h4>
<p>| Action | Base XP | Multipliers |
|‚Äî‚Äî‚Äì|‚Äî‚Äî‚Äî|‚Äî‚Äî‚Äî‚Äî-|
| Correct Answer | 10 | Combo, Streak, Power-ups |
| Perfect Quiz | 50 | Difficulty bonus |
| Daily Login | Day √ó 10 | Consecutive bonus |
| Achievement | Variable | 25-2000 XP |
| Quest Complete | 100-500 | Special quest bonus |</p>

<h3 id="2-streak-system">2. Streak System</h3>

<h4 id="mechanics">Mechanics</h4>
<ul>
  <li><strong>Window</strong>: 24 hours to maintain</li>
  <li><strong>Bonus XP</strong>: streak √ó 10 per day</li>
  <li><strong>Warning</strong>: At 20 hours (configurable)</li>
  <li><strong>Break Protection</strong>: One-time 48hr grace period at 30+ days</li>
</ul>

<h4 id="streak-milestones">Streak Milestones</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>3 days: üî• First Streak Achievement
7 days: ‚öîÔ∏è Week Warrior Achievement  
30 days: üí™ Unstoppable Achievement
100 days: üëë Legendary Achievement
</code></pre></div></div>

<h3 id="3-combo-multiplier">3. Combo Multiplier</h3>

<h4 id="formula">Formula</h4>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">comboMultiplier</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="nx">consecutiveCorrect</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="nx">maxCombo</span> <span class="o">=</span> <span class="mf">5.0</span><span class="nx">x</span>

<span class="c1">// Reset conditions:</span>
<span class="o">-</span> <span class="nx">Wrong</span> <span class="nx">answer</span>
<span class="o">-</span> <span class="nx">Time</span> <span class="nx">expires</span>
<span class="o">-</span> <span class="nx">Quiz</span> <span class="nx">ends</span>
</code></pre></div></div>

<h4 id="visual-feedback">Visual Feedback</h4>
<ul>
  <li>1.5x: Blue glow</li>
  <li>2.0x: Green pulse</li>
  <li>3.0x: Gold particles</li>
  <li>4.0x: Rainbow effect</li>
  <li>5.0x: Fire animation</li>
</ul>

<h3 id="4-achievement-system">4. Achievement System</h3>

<h4 id="tiers--rewards">Tiers &amp; Rewards</h4>
<p>| Tier | Color | XP Multiplier | Rarity |
|‚Äî‚Äî|‚Äî‚Äî-|‚Äî‚Äî‚Äî‚Äî‚Äî|‚Äî‚Äî‚Äì|
| Bronze | #CD7F32 | 1x | Common |
| Silver | #C0C0C0 | 1.5x | Uncommon |
| Gold | #FFD700 | 2x | Rare |
| Platinum | #E5E5E5 | 3x | Epic |
| Diamond | #B9F2FF | 5x | Legendary |</p>

<h4 id="achievement-categories">Achievement Categories</h4>

<p><strong>Performance</strong></p>
<ul>
  <li>Perfect Score (100%)</li>
  <li>Speed Demon (&lt;30 seconds)</li>
  <li>Comeback Kid (50% improvement)</li>
  <li>Accuracy Master (95% over 10 quizzes)</li>
</ul>

<p><strong>Milestones</strong></p>
<ul>
  <li>First Steps (1 quiz)</li>
  <li>Dedicated (10 quizzes)</li>
  <li>Committed (50 quizzes)</li>
  <li>Master (100 quizzes)</li>
  <li>Legend (1000 quizzes)</li>
</ul>

<p><strong>Category Mastery</strong></p>
<ul>
  <li>Explorer (Try all categories)</li>
  <li>Specialist (Master 1 category)</li>
  <li>Expert (Master 3 categories)</li>
  <li>Polymath (Master 5 categories)</li>
</ul>

<p><strong>Social</strong></p>
<ul>
  <li>Friendly Rival (Challenge friend)</li>
  <li>Social Butterfly (Share 10 times)</li>
  <li>Mentor (Help 10 friends)</li>
  <li>Influencer (50 referrals)</li>
</ul>

<p><strong>Secret Achievements</strong></p>
<ul>
  <li>Night Owl (Play after midnight)</li>
  <li>Early Bird (Play before 6 AM)</li>
  <li>Lucky Seven (Score exactly 77%)</li>
  <li>Perfect Week (7 perfect scores in 7 days)</li>
</ul>

<h3 id="5-power-up-system">5. Power-Up System</h3>

<h4 id="available-power-ups">Available Power-Ups</h4>
<p>| Power-Up | Effect | Duration | Rarity |
|‚Äî‚Äî‚Äî-|‚Äî‚Äî‚Äì|‚Äî‚Äî‚Äî-|‚Äî‚Äî‚Äì|
| ‚ö° XP Boost | 2x XP | 24 hours | Common |
| ‚è∞ Time Freeze | Stop timer | 1 question | Common |
| ‚è≠Ô∏è Skip | Skip question | Instant | Common |
| üí° Hint | Show hint | Instant | Uncommon |
| 2Ô∏è‚É£ Double Points | 2x points | 1 question | Rare |
| üõ°Ô∏è Shield | Protect streak | 1 mistake | Epic |
| üéØ Perfect Vision | Show answer | Instant | Legendary |</p>

<h4 id="acquisition-methods">Acquisition Methods</h4>
<ul>
  <li>Daily login rewards</li>
  <li>Achievement unlocks</li>
  <li>Quest completions</li>
  <li>Mystery boxes (10% chance)</li>
  <li>Purchase with coins</li>
  <li>Special events</li>
</ul>

<h3 id="6-quest-system">6. Quest System</h3>

<h4 id="quest-types">Quest Types</h4>

<p><strong>Daily Quests</strong> (24hr expiry)</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">Complete 3 Quizzes</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span> <span class="nl">xp</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="nx">powerup</span><span class="p">:</span> <span class="dl">"</span><span class="s2">hint</span><span class="dl">"</span> <span class="p">},</span>
  <span class="dl">"</span><span class="s2">Perfect Score</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span> <span class="nl">xp</span><span class="p">:</span> <span class="mi">150</span> <span class="p">},</span>
  <span class="dl">"</span><span class="s2">Try New Category</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span> <span class="nl">xp</span><span class="p">:</span> <span class="mi">75</span><span class="p">,</span> <span class="nx">coins</span><span class="p">:</span> <span class="mi">50</span> <span class="p">},</span>
  <span class="dl">"</span><span class="s2">Maintain Streak</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span> <span class="nl">xp</span><span class="p">:</span> <span class="mi">50</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Weekly Challenges</strong> (7 days)</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">Complete 20 Quizzes</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span> <span class="nl">xp</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span> <span class="nx">badge</span><span class="p">:</span> <span class="dl">"</span><span class="s2">weekly_warrior</span><span class="dl">"</span> <span class="p">},</span>
  <span class="dl">"</span><span class="s2">Master a Category</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span> <span class="nl">xp</span><span class="p">:</span> <span class="mi">750</span><span class="p">,</span> <span class="nx">powerup</span><span class="p">:</span> <span class="dl">"</span><span class="s2">xp_boost</span><span class="dl">"</span> <span class="p">},</span>
  <span class="dl">"</span><span class="s2">Top 10 Leaderboard</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span> <span class="nl">xp</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span> <span class="nx">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">competitor</span><span class="dl">"</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Special Events</strong> (Limited time)</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">Flash Challenge</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span> 
    <span class="nl">duration</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1 hour</span><span class="dl">"</span><span class="p">,</span>
    <span class="nx">requirement</span><span class="p">:</span> <span class="dl">"</span><span class="s2">5 quizzes</span><span class="dl">"</span><span class="p">,</span>
    <span class="nx">reward</span><span class="p">:</span> <span class="p">{</span> <span class="nl">xp</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span> <span class="nx">badge</span><span class="p">:</span> <span class="dl">"</span><span class="s2">speed_runner</span><span class="dl">"</span> <span class="p">}</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">Weekend Warrior</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">duration</span><span class="p">:</span> <span class="dl">"</span><span class="s2">weekend</span><span class="dl">"</span><span class="p">,</span>
    <span class="nx">requirement</span><span class="p">:</span> <span class="dl">"</span><span class="s2">10 perfect scores</span><span class="dl">"</span><span class="p">,</span>
    <span class="nx">reward</span><span class="p">:</span> <span class="p">{</span> <span class="nl">xp</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span> <span class="nx">powerup</span><span class="p">:</span> <span class="dl">"</span><span class="s2">shield_3x</span><span class="dl">"</span> <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="7-daily-bonus-system">7. Daily Bonus System</h3>

<h4 id="progression-table">Progression Table</h4>
<p>| Day | XP | Power-Ups | Special |
|‚Äî‚Äì|‚Äî‚Äì|‚Äî‚Äî‚Äî‚Äì|‚Äî‚Äî‚Äî|
| 1 | 10 | - | - |
| 2 | 20 | - | - |
| 3 | 30 | Hint √ó1 | - |
| 5 | 50 | Skip √ó1 | Mystery Box |
| 7 | 70 | XP Boost | Badge |
| 14 | 140 | Shield √ó1 | Title |
| 30 | 300 | All √ó1 | Diamond Badge |</p>

<h2 id="-dark-pattern-implementations">üß† Dark Pattern Implementations</h2>

<h3 id="1-loss-aversion">1. Loss Aversion</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// XP Decay</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">daysSinceActive</span> <span class="o">&gt;</span> <span class="mi">7</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">dailyDecay</span> <span class="o">=</span> <span class="nx">totalXP</span> <span class="o">*</span> <span class="mf">0.01</span><span class="p">;</span> <span class="c1">// 1% per day</span>
  <span class="nx">notification</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">You're losing progress!</span><span class="dl">"</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Streak Warning</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">hoursSinceActive</span> <span class="o">&gt;</span> <span class="mi">20</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">urgentNotification</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Only 4 hours to save your streak!</span><span class="dl">"</span><span class="p">;</span>
  <span class="nx">visualWarning</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">pulsing_red_indicator</span><span class="dl">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="2-variable-reward-schedule">2. Variable Reward Schedule</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">REWARD_MULTIPLIERS</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span> <span class="c1">// 66% normal, 34% bonus</span>
<span class="kd">const</span> <span class="nx">MYSTERY_BOX_CHANCE</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">;</span> <span class="c1">// 10% random rewards</span>

<span class="c1">// Implementation</span>
<span class="kd">const</span> <span class="nx">multiplier</span> <span class="o">=</span> <span class="nx">REWARD_MULTIPLIERS</span><span class="p">[</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">6</span><span class="p">];</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="nx">MYSTERY_BOX_CHANCE</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">triggerMysteryBox</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="3-fomo-mechanics">3. FOMO Mechanics</h3>
<ul>
  <li><strong>Flash Challenges</strong>: 1-hour limited events</li>
  <li><strong>Daily Bonus</strong>: 24-hour claim window</li>
  <li><strong>Special Events</strong>: Weekend-only bonuses</li>
  <li><strong>Leaderboard Reset</strong>: Weekly competition</li>
  <li><strong>Expiring Rewards</strong>: Use within 7 days</li>
</ul>

<h3 id="4-social-proof">4. Social Proof</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Friend Activity Feed</span>
<span class="nx">notifications</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">Alex just achieved Quiz Master!</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">Sarah is now #1 on the leaderboard</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">5 friends completed today's challenge</span><span class="dl">"</span>
<span class="p">});</span>

<span class="c1">// Comparative Stats</span>
<span class="nx">showStats</span><span class="p">({</span>
  <span class="na">yourScore</span><span class="p">:</span> <span class="mi">85</span><span class="p">,</span>
  <span class="na">friendAverage</span><span class="p">:</span> <span class="mi">78</span><span class="p">,</span>
  <span class="na">globalAverage</span><span class="p">:</span> <span class="mi">72</span><span class="p">,</span>
  <span class="na">percentile</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Top 15%</span><span class="dl">"</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="5-sunk-cost-fallacy">5. Sunk Cost Fallacy</h3>
<ul>
  <li>Display total time invested</li>
  <li>Show progress toward next achievement</li>
  <li>Highlight near-miss situations</li>
  <li>‚ÄúJust one more‚Äù messaging</li>
  <li>Investment protection warnings</li>
</ul>

<h2 id="-engagement-metrics">üìà Engagement Metrics</h2>

<h3 id="key-performance-indicators">Key Performance Indicators</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">interface</span> <span class="nx">EngagementMetrics</span> <span class="p">{</span>
  <span class="nl">DAU</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>                    <span class="c1">// Daily Active Users</span>
  <span class="nl">WAU</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>                    <span class="c1">// Weekly Active Users</span>
  <span class="nl">MAU</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>                    <span class="c1">// Monthly Active Users</span>
  <span class="nl">retention</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">day1</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>                <span class="c1">// % returning after 1 day</span>
    <span class="nl">day7</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>                <span class="c1">// % returning after 7 days</span>
    <span class="nl">day30</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>               <span class="c1">// % returning after 30 days</span>
  <span class="p">};</span>
  <span class="nl">sessionLength</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>          <span class="c1">// Average minutes per session</span>
  <span class="nl">sessionsPerDay</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>         <span class="c1">// Average sessions per user</span>
  <span class="nl">streakAverage</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>          <span class="c1">// Average streak length</span>
  <span class="nl">completionRate</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>         <span class="c1">// % quizzes completed</span>
  <span class="nl">shareRate</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>              <span class="c1">// % users who share</span>
  <span class="nl">powerUpUsage</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>           <span class="c1">// Power-ups used per session</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="success-metrics">Success Metrics</h3>
<ul>
  <li><strong>Target D1 Retention</strong>: &gt;40%</li>
  <li><strong>Target D7 Retention</strong>: &gt;20%</li>
  <li><strong>Target D30 Retention</strong>: &gt;10%</li>
  <li><strong>Average Session</strong>: &gt;5 minutes</li>
  <li><strong>Daily Sessions</strong>: &gt;2</li>
  <li><strong>Streak Average</strong>: &gt;5 days</li>
</ul>

<h2 id="-visual--audio-feedback">üé® Visual &amp; Audio Feedback</h2>

<h3 id="haptic-feedback-patterns">Haptic Feedback Patterns</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">hapticPatterns</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">correct</span><span class="p">:</span> <span class="dl">"</span><span class="s2">light_impact</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">wrong</span><span class="p">:</span> <span class="dl">"</span><span class="s2">medium_impact</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">levelUp</span><span class="p">:</span> <span class="dl">"</span><span class="s2">notification_success</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">achievement</span><span class="p">:</span> <span class="dl">"</span><span class="s2">notification_success</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">combo</span><span class="p">:</span> <span class="dl">"</span><span class="s2">selection_change</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">powerUp</span><span class="p">:</span> <span class="dl">"</span><span class="s2">heavy_impact</span><span class="dl">"</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="animation-triggers">Animation Triggers</h3>
<p>| Event | Animation | Duration | Haptic |
|‚Äî‚Äî-|‚Äî‚Äî‚Äî‚Äì|‚Äî‚Äî‚Äî-|‚Äî‚Äî‚Äî|
| Correct Answer | Bounce + Glow | 400ms | Light |
| Wrong Answer | Shake + Red | 250ms | Medium |
| Level Up | Explosion + Scale | 1000ms | Success |
| Achievement | Particles + Rotate | 1500ms | Success |
| Combo | Pulse + Color | 600ms | Light |
| Streak Save | Fire + Relief | 800ms | Heavy |</p>

<h2 id="-configuration">üîß Configuration</h2>

<h3 id="tunable-parameters">Tunable Parameters</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">GAMIFICATION_CONFIG</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// XP System</span>
  <span class="na">baseXP</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
  <span class="na">levelExponent</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
  <span class="na">maxLevel</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
  
  <span class="c1">// Streaks</span>
  <span class="na">streakWindow</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span> <span class="c1">// hours</span>
  <span class="na">streakWarning</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="c1">// hours</span>
  <span class="na">streakGracePeriod</span><span class="p">:</span> <span class="mi">48</span><span class="p">,</span> <span class="c1">// hours</span>
  
  <span class="c1">// Combos</span>
  <span class="na">comboIncrement</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
  <span class="na">maxCombo</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span>
  <span class="na">comboTimeout</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="c1">// seconds</span>
  
  <span class="c1">// Dark Patterns</span>
  <span class="na">xpDecayDays</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
  <span class="na">decayRate</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span> <span class="c1">// 1% per day</span>
  <span class="na">mysteryBoxChance</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
  <span class="na">flashChallengeDuration</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span> <span class="c1">// minutes</span>
  
  <span class="c1">// Rewards</span>
  <span class="na">dailyBonusWindow</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span> <span class="c1">// hours</span>
  <span class="na">powerUpExpiry</span><span class="p">:</span> <span class="mi">168</span><span class="p">,</span> <span class="c1">// hours (7 days)</span>
  <span class="na">questRefresh</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span> <span class="c1">// hours</span>
<span class="p">};</span>
</code></pre></div></div>

<h2 id="-implementation-checklist">üöÄ Implementation Checklist</h2>

<h3 id="phase-1-core-systems-">Phase 1: Core Systems ‚úÖ</h3>
<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />XP and Leveling</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />Basic Achievements</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />Streak Tracking</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />Combo System</li>
</ul>

<h3 id="phase-2-engagement-">Phase 2: Engagement ‚úÖ</h3>
<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />Power-Ups</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />Daily Bonuses</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />Quest System</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />Leaderboards</li>
</ul>

<h3 id="phase-3-optimization-">Phase 3: Optimization ‚úÖ</h3>
<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />Dark Patterns</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />Notifications</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />Social Features</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />Analytics Integration</li>
</ul>

<h3 id="phase-4-refinement">Phase 4: Refinement</h3>
<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />A/B Testing Variants</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Personalized Difficulty</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Machine Learning Optimization</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Advanced Social Features</li>
</ul>

<h2 id="-usage-examples">üì± Usage Examples</h2>

<h3 id="initialize-gamification">Initialize Gamification</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">GamificationService</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@/services/gamification</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// On app start</span>
<span class="k">await</span> <span class="nx">GamificationService</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
<span class="k">await</span> <span class="nx">GamificationService</span><span class="p">.</span><span class="nx">checkDailyLogin</span><span class="p">();</span>
<span class="k">await</span> <span class="nx">GamificationService</span><span class="p">.</span><span class="nx">updateStreak</span><span class="p">();</span>
</code></pre></div></div>

<h3 id="award-xp">Award XP</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Correct answer</span>
<span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">GamificationService</span><span class="p">.</span><span class="nx">awardXP</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="dl">'</span><span class="s1">correct_answer</span><span class="dl">'</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">levelUp</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">showLevelUpAnimation</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">newLevel</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="track-progress">Track Progress</h3>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Update quest progress</span>
<span class="k">await</span> <span class="nx">GamificationService</span><span class="p">.</span><span class="nx">updateQuestProgress</span><span class="p">(</span><span class="dl">'</span><span class="s1">quiz_complete</span><span class="dl">'</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

<span class="c1">// Check achievements</span>
<span class="kd">const</span> <span class="nx">achievement</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">GamificationService</span><span class="p">.</span><span class="nx">checkAchievements</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">achievement</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">showAchievementPopup</span><span class="p">(</span><span class="nx">achievement</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="-best-practices">üéØ Best Practices</h2>

<ol>
  <li><strong>Balance Challenge &amp; Reward</strong>: Keep difficulty curve smooth</li>
  <li><strong>Immediate Feedback</strong>: Always acknowledge user actions</li>
  <li><strong>Clear Progress</strong>: Show advancement visually</li>
  <li><strong>Meaningful Choices</strong>: Make power-ups strategic</li>
  <li><strong>Surprise &amp; Delight</strong>: Random rewards create excitement</li>
  <li><strong>Social Connection</strong>: Foster friendly competition</li>
  <li><strong>Respect User Time</strong>: Don‚Äôt punish casual players</li>
</ol>

<h2 id="-analytics-events">üìä Analytics Events</h2>

<p>Track these events for optimization:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">xp_gained</code>: Amount, source, multipliers</li>
  <li><code class="language-plaintext highlighter-rouge">level_up</code>: New level, time taken</li>
  <li><code class="language-plaintext highlighter-rouge">achievement_unlocked</code>: Achievement ID, category</li>
  <li><code class="language-plaintext highlighter-rouge">streak_maintained</code>: Current streak, bonus</li>
  <li><code class="language-plaintext highlighter-rouge">streak_broken</code>: Lost streak, duration</li>
  <li><code class="language-plaintext highlighter-rouge">quest_completed</code>: Quest type, rewards</li>
  <li><code class="language-plaintext highlighter-rouge">powerup_used</code>: Type, context</li>
  <li><code class="language-plaintext highlighter-rouge">daily_bonus_claimed</code>: Day, rewards</li>
  <li><code class="language-plaintext highlighter-rouge">leaderboard_viewed</code>: Type, user rank</li>
  <li><code class="language-plaintext highlighter-rouge">session_end</code>: XP gained, duration</li>
</ul>

<hr />

<p><em>Last Updated: December 2024</em>
<em>Version: 1.0.0</em></p>



<div style="margin-top: 3rem; padding: 1rem; background: #f6f8fa; border-radius: 5px;">
  <p style="margin: 0; color: #666; font-size: 0.9em;">
    üìÅ Source: QuizMentor / GAMIFICATION_SYSTEM.md
  </p>
</div>

  </main>

  <footer>
    <p>&copy; 2024 NatureQuest. Documentation Hub v1.0.0</p>
  </footer>

  <script>
    (function() {
      const html = document.documentElement;
      const buttons = [];
      function setActive(theme) {
        buttons.forEach(b => {
          const active = b.dataset.theme === theme;
          b.classList.toggle('active', active);
          b.setAttribute('aria-pressed', active ? 'true' : 'false');
        });
      }
      function applyTheme(theme) {
        if (theme === 'auto') {
          html.removeAttribute('data-theme');
          localStorage.removeItem('theme');
        } else {
          html.setAttribute('data-theme', theme);
          localStorage.setItem('theme', theme);
        }
        setActive(theme);
      }
      document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.theme-btn').forEach(btn => {
          buttons.push(btn);
          btn.addEventListener('click', () => applyTheme(btn.dataset.theme));
        });
        const saved = localStorage.getItem('theme');
        if (saved === 'light' || saved === 'dark') {
          applyTheme(saved);
        } else {
          applyTheme('auto');
        }
      });
    })();
  </script>
</body>
</html>
