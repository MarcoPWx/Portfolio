<!DOCTYPE html>
<html lang="en" data-theme="auto">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DESIGN PATTERNS GUIDE</title>
    
    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    
    <style>
    /* Light mode variables */
    :root {
      --primary: #007AFF;
      --primary-hover: #0051D5;
      --success: #34C759;
      --warning: #FF9500;
      --danger: #FF3B30;
      --text-primary: #000000;
      --text-secondary: #3C3C43;
      --text-tertiary: #8E8E93;
      --bg-primary: #FFFFFF;
      --bg-secondary: #F2F2F7;
      --bg-tertiary: #FFFFFF;
      --bg-elevated: #FFFFFF;
      --border: rgba(0, 0, 0, 0.1);
      --border-subtle: rgba(0, 0, 0, 0.04);
      --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.06), 0 1px 2px rgba(0, 0, 0, 0.12);
      --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07), 0 2px 4px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.1), 0 4px 10px rgba(0, 0, 0, 0.08);
      --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.15);
      --backdrop: rgba(255, 255, 255, 0.8);
      --code-bg: #F7F7FA;
      --code-border: rgba(0, 0, 0, 0.06);
      --nav-bg: rgba(255, 255, 255, 0.72);
      --card-bg: #FFFFFF;
      --hover-bg: rgba(0, 122, 255, 0.08);
    }
    
    /* Dark mode variables */
    [data-theme="dark"] {
      --primary: #0A84FF;
      --primary-hover: #409CFF;
      --success: #32D74B;
      --warning: #FF9F0A;
      --danger: #FF453A;
      --text-primary: #FFFFFF;
      --text-secondary: #EBEBF5;
      --text-tertiary: #8E8E93;
      --bg-primary: #000000;
      --bg-secondary: #1C1C1E;
      --bg-tertiary: #2C2C2E;
      --bg-elevated: #1C1C1E;
      --border: rgba(255, 255, 255, 0.15);
      --border-subtle: rgba(255, 255, 255, 0.06);
      --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.4);
      --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4), 0 2px 4px rgba(0, 0, 0, 0.3);
      --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.5), 0 4px 10px rgba(0, 0, 0, 0.4);
      --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.6);
      --backdrop: rgba(28, 28, 30, 0.8);
      --code-bg: #1C1C1E;
      --code-border: rgba(255, 255, 255, 0.08);
      --nav-bg: rgba(28, 28, 30, 0.72);
      --card-bg: #1C1C1E;
      --hover-bg: rgba(10, 132, 255, 0.15);
    }
    
    /* Auto theme based on system preference */
    @media (prefers-color-scheme: dark) {
      :root:not([data-theme="light"]) {
        --primary: #0A84FF;
        --primary-hover: #409CFF;
        --success: #32D74B;
        --warning: #FF9F0A;
        --danger: #FF453A;
        --text-primary: #FFFFFF;
        --text-secondary: #EBEBF5;
        --text-tertiary: #8E8E93;
        --bg-primary: #000000;
        --bg-secondary: #1C1C1E;
        --bg-tertiary: #2C2C2E;
        --bg-elevated: #1C1C1E;
        --border: rgba(255, 255, 255, 0.15);
        --border-subtle: rgba(255, 255, 255, 0.06);
        --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.4);
        --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4), 0 2px 4px rgba(0, 0, 0, 0.3);
        --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.5), 0 4px 10px rgba(0, 0, 0, 0.4);
        --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.6);
        --backdrop: rgba(28, 28, 30, 0.8);
        --code-bg: #1C1C1E;
        --code-border: rgba(255, 255, 255, 0.08);
        --nav-bg: rgba(28, 28, 30, 0.72);
        --card-bg: #1C1C1E;
        --hover-bg: rgba(10, 132, 255, 0.15);
      }
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    html {
      scroll-behavior: smooth;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
      font-size: 17px;
      line-height: 1.6;
      color: var(--text-primary);
      background: var(--bg-primary);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 24px;
    }
    
    /* Typography */
    p {
      margin: 1.2rem 0;
      color: var(--text-secondary);
      letter-spacing: -0.011em;
    }
    
    a {
      color: var(--primary);
      text-decoration: none;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 2px;
    }
    
    a:hover {
      color: var(--primary-hover);
      text-decoration: none;
    }
    
    a:focus {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }
    
    /* Headings */
    h1, h2, h3, h4, h5, h6 {
      font-weight: 600;
      line-height: 1.2;
      margin-top: 2.5rem;
      margin-bottom: 1rem;
      letter-spacing: -0.02em;
      color: var(--text-primary);
    }
    
    h1 {
      font-size: 3rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-hover) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-top: 0;
      margin-bottom: 1.5rem;
    }
    
    h2 {
      font-size: 2rem;
      font-weight: 600;
      color: var(--text-primary);
      border-bottom: 1px solid var(--border-subtle);
      padding-bottom: 0.75rem;
      margin-top: 3rem;
    }
    
    h3 {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--text-primary);
    }
    
    h4 {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text-secondary);
    }
    
    /* Lists */
    ul, ol {
      padding-left: 2rem;
      margin: 1.5rem 0;
      color: var(--text-secondary);
    }
    
    li {
      margin: 0.75rem 0;
      line-height: 1.6;
    }
    
    /* Strong text */
    strong, b {
      font-weight: 600;
      color: var(--text-primary);
    }
    
    /* Navigation */
    .nav-wrapper {
      position: sticky;
      top: 0;
      z-index: 100;
      background: var(--nav-bg);
      backdrop-filter: saturate(180%) blur(20px);
      -webkit-backdrop-filter: saturate(180%) blur(20px);
      border-bottom: 1px solid var(--border);
      margin-bottom: 2rem;
    }
    
    nav {
      padding: 1rem 0;
    }
    
    .nav-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    nav ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }
    
    nav li {
      margin: 0;
    }
    
    nav a {
      color: var(--text-secondary);
      text-decoration: none;
      font-weight: 500;
      font-size: 0.95rem;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    nav a:hover {
      background: var(--hover-bg);
      color: var(--primary);
    }
    
    nav a:focus {
      outline: none;
    }
    
    /* Theme Switcher */
    .theme-switcher {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.375rem;
      background: var(--bg-secondary);
      border-radius: 10px;
      border: 1px solid var(--border-subtle);
    }
    
    .theme-btn {
      padding: 0.375rem 0.625rem;
      background: transparent;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      color: var(--text-tertiary);
      font-size: 0.875rem;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }
    
    .theme-btn:hover {
      color: var(--text-secondary);
    }
    
    .theme-btn.active {
      background: var(--card-bg);
      color: var(--text-primary);
      box-shadow: var(--shadow-sm);
    }
    
    /* Code blocks */
    pre {
      background: var(--code-bg);
      padding: 1.5rem;
      border-radius: 12px;
      overflow-x: auto;
      border: 1px solid var(--code-border);
      margin: 2rem 0;
      font-size: 0.875rem;
      box-shadow: var(--shadow-sm);
    }
    
    code {
      font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
      background: var(--code-bg);
      padding: 0.125rem 0.375rem;
      border-radius: 4px;
      font-size: 0.875em;
      border: 1px solid var(--code-border);
    }
    
    pre code {
      background: none;
      padding: 0;
      border: none;
      font-size: 0.875rem;
    }
    
    /* Tables */
    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      margin: 2rem 0;
      font-size: 0.95rem;
      background: var(--card-bg);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: var(--shadow-md);
    }
    
    th, td {
      padding: 1rem;
      text-align: left;
      border-bottom: 1px solid var(--border-subtle);
    }
    
    th {
      background: var(--bg-secondary);
      font-weight: 600;
      font-size: 0.875rem;
      color: var(--text-secondary);
    }
    
    td {
      color: var(--text-secondary);
    }
    
    tr:last-child td {
      border-bottom: none;
    }
    
    tr:hover {
      background: var(--hover-bg);
    }
    
    /* Blockquotes */
    blockquote {
      margin: 2rem 0;
      padding: 1.25rem;
      border-left: 4px solid var(--primary);
      background: var(--bg-secondary);
      border-radius: 0 12px 12px 0;
      color: var(--text-secondary);
      font-style: normal;
    }
    
    blockquote p {
      margin: 0.5rem 0;
    }
    
    /* Horizontal rules */
    hr {
      border: none;
      height: 1px;
      background: var(--border);
      margin: 3rem 0;
    }
    
    /* Cards */
    .card {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
      margin: 1rem 0;
      box-shadow: var(--shadow-sm);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .card:hover {
      box-shadow: var(--shadow-lg);
      transform: translateY(-2px);
    }
    
    /* Main content */
    main {
      min-height: calc(100vh - 200px);
      padding: 2rem 0;
    }
    
    /* Footer */
    footer {
      margin-top: 4rem;
      padding: 2rem 0;
      border-top: 1px solid var(--border);
      color: var(--text-tertiary);
      font-size: 0.875rem;
      text-align: center;
    }
    
    /* Grid for cards */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      h1 { font-size: 2.5rem; }
      h2 { font-size: 1.75rem; }
      h3 { font-size: 1.375rem; }
      
      .nav-content {
        flex-direction: column;
        gap: 1rem;
      }
      
      nav ul {
        flex-wrap: wrap;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div class="nav-wrapper">
    <div class="container">
      <nav class="nav-content">
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/architecture/">Architecture</a></li>
          <li><a href="/all-docs/">All Docs</a></li>
          <li><a href="/learning-roadmap/">Learning Roadmaps</a></li>
          <li><a href="/devmentor/">DevMentor</a></li>
          <li><a href="/quizmentor/">QuizMentor</a></li>
          <li><a href="/harvest/">Harvest.ai</a></li>
          <li><a href="/naturequest-auth/">Auth</a></li>
          <li><a href="/infrastructure/">Infrastructure</a></li>
        </ul>
        <div class="theme-switcher" aria-label="Theme Switcher">
          <button class="theme-btn" data-theme="light" aria-pressed="false" title="Light mode">🌞 Light</button>
          <button class="theme-btn active" data-theme="auto" aria-pressed="true" title="Auto mode">🧭 Auto</button>
          <button class="theme-btn" data-theme="dark" aria-pressed="false" title="Dark mode">🌙 Dark</button>
        </div>
      </nav>
    </div>
  </div>

  <main class="container">
    <div class="product-header" style="background: #f6f8fa; padding: 1rem; border-radius: 5px; margin-bottom: 2rem;">
  <span style="color: #666;">DevMentor</span> / 
  <span style="color: #999;">designpatterns/DESIGN_PATTERNS_GUIDE.md</span>
</div>

<h1>DESIGN PATTERNS GUIDE</h1>


<p>CURRENT_ARCHITECTURE</p>

<h1 id="-devmentor-design-patterns">🚀 DevMentor Design Patterns</h1>

<blockquote>
  <p><em>Your ultimate playbook for building scalable, testable, and clean code in the DevMentor ecosystem!</em></p>
</blockquote>

<div align="center">
  <h3>🏗️ Architecture • 🎨 Patterns • 🧪 Testing • 📈 Scalability • ✨ Clean Code</h3>
  <p><em>"Code like a poet, architect like an engineer, test like a detective!"</em></p>
</div>

<hr />

<h2 id="-table-of-contents">📚 Table of Contents</h2>

<h3 id="part-i-foundations">Part I: Foundations</h3>
<ol>
  <li><a href="#introduction">🎯 Introduction</a></li>
  <li><a href="#core-concepts">💡 Core Concepts</a></li>
  <li><a href="#design-patterns-in-action">🎨 Design Patterns in Action</a></li>
</ol>

<h3 id="part-ii-building--scaling">Part II: Building &amp; Scaling</h3>
<ol>
  <li><a href="#frontend-scalability-guide">⚡ Frontend Scalability Guide</a></li>
  <li><a href="#technology-stack">🏗️ Technology Stack</a></li>
  <li><a href="#building-with-these-patterns">🛠️ Building with These Patterns</a></li>
</ol>

<h3 id="part-iii-quality--testing">Part III: Quality &amp; Testing</h3>
<ol>
  <li><a href="#testing-patterns-strategies">🧪 Testing Patterns &amp; Strategies</a></li>
  <li><a href="#clean-code-principles">✨ Clean Code Principles</a></li>
  <li><a href="#best-practices">📋 Best Practices</a></li>
</ol>

<h3 id="part-iv-mastery">Part IV: Mastery</h3>
<ol>
  <li><a href="#interactive-examples">🎮 Interactive Examples</a></li>
  <li><a href="#common-pitfalls">🚨 Common Pitfalls</a></li>
  <li><a href="#quiz-yourself">🎓 Quiz Yourself</a></li>
  <li><a href="#further-learning">📖 Further Learning</a></li>
</ol>

<hr />

<h2 id="introduction">Introduction</h2>

<p>DevMentor is built using modern software engineering principles and design patterns. This guide will teach you:</p>
<ul>
  <li><strong>What</strong> each pattern is</li>
  <li><strong>Why</strong> we use it</li>
  <li><strong>How</strong> to implement it</li>
  <li><strong>When</strong> to apply it</li>
  <li><strong>Real examples</strong> from our codebase</li>
</ul>

<h2 id="core-concepts">Core Concepts</h2>

<h3 id="-what-is-a-design-pattern">🎯 What is a Design Pattern?</h3>

<p>A design pattern is a <strong>reusable solution</strong> to a commonly occurring problem in software design. Think of them as <strong>blueprints</strong> or <strong>recipes</strong> that you can customize to solve problems in your code.</p>

<h3 id="-dependency-injection-di-explained">💉 Dependency Injection (DI) Explained</h3>

<p><strong>What is it?</strong>
Dependency Injection is a technique where an object receives its dependencies from external sources rather than creating them itself.</p>

<p><strong>Why use it?</strong></p>
<ul>
  <li>Makes code more testable (you can inject mock dependencies)</li>
  <li>Reduces coupling between components</li>
  <li>Makes code more flexible and maintainable</li>
</ul>

<p><strong>Simple Example:</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ❌ WITHOUT Dependency Injection</span>
<span class="kd">class</span> <span class="nx">EmailService</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">smtp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SMTPClient</span><span class="p">(</span><span class="dl">'</span><span class="s1">smtp.gmail.com</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// Hard-coded dependency</span>
  
  <span class="nx">sendEmail</span><span class="p">(</span><span class="nx">to</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">smtp</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">to</span><span class="p">,</span> <span class="nx">message</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// ✅ WITH Dependency Injection</span>
<span class="kd">class</span> <span class="nx">EmailService</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">smtp</span><span class="p">:</span> <span class="nx">ISMTPClient</span><span class="p">)</span> <span class="p">{}</span> <span class="c1">// Dependency injected</span>
  
  <span class="nx">sendEmail</span><span class="p">(</span><span class="nx">to</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">smtp</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">to</span><span class="p">,</span> <span class="nx">message</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Now you can inject different SMTP clients</span>
<span class="kd">const</span> <span class="nx">gmailService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EmailService</span><span class="p">(</span><span class="k">new</span> <span class="nx">GmailSMTP</span><span class="p">());</span>
<span class="kd">const</span> <span class="nx">sendgridService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EmailService</span><span class="p">(</span><span class="k">new</span> <span class="nx">SendGridSMTP</span><span class="p">());</span>
<span class="kd">const</span> <span class="nx">testService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EmailService</span><span class="p">(</span><span class="k">new</span> <span class="nx">MockSMTP</span><span class="p">());</span> <span class="c1">// For testing!</span>
</code></pre></div></div>

<p><strong>Real Example from DevMentor:</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// services/auth-service/authService.ts</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">AuthService</span> <span class="k">implements</span> <span class="nx">IAuthService</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">apiClient</span><span class="p">:</span> <span class="nx">IApiClient</span><span class="p">)</span> <span class="p">{}</span> <span class="c1">// DI: API client injected</span>
  
  <span class="k">async</span> <span class="nx">login</span><span class="p">(</span><span class="nx">credentials</span><span class="p">:</span> <span class="nx">LoginCredentials</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">apiClient</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/auth/login</span><span class="dl">'</span><span class="p">,</span> <span class="nx">credentials</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// In app/providers.tsx</span>
<span class="kd">const</span> <span class="nx">authService</span> <span class="o">=</span> <span class="nx">useMemo</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">createAuthService</span><span class="p">(</span><span class="nx">apiClient</span><span class="p">),</span> <span class="p">[]);</span> <span class="c1">// Injecting the dependency</span>
</code></pre></div></div>

<hr />

<h2 id="design-patterns-in-action">Design Patterns in Action</h2>

<h3 id="1-️-microservices-architecture-pattern">1. 🏗️ Microservices Architecture Pattern</h3>

<p><strong>What is it?</strong>
Breaking down a large application into small, independent services that communicate over a network.</p>

<p><strong>Our Implementation:</strong></p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># docker-compose.yml structure</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">api-gateway</span><span class="pi">:</span>     <span class="c1"># Port 8080 - Single entry point</span>
  <span class="na">auth-service</span><span class="pi">:</span>    <span class="c1"># Port 3002 - Handles authentication</span>
  <span class="na">memory-service</span><span class="pi">:</span>  <span class="c1"># Port 3003 - Vector DB &amp; RAG</span>
  <span class="na">project-service</span><span class="pi">:</span> <span class="c1"># Port 3005 - Project management</span>
  <span class="na">ai-gateway</span><span class="pi">:</span>      <span class="c1"># Port 3001 - AI orchestration</span>
</code></pre></div></div>

<p><strong>Benefits:</strong></p>
<ul>
  <li>Each service can be developed independently</li>
  <li>Services can scale separately</li>
  <li>Failure in one service doesn’t crash the entire system</li>
  <li>Different teams can work on different services</li>
</ul>

<p><strong>How Services Communicate:</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// API Gateway routes requests to appropriate services</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api/auth</span><span class="dl">'</span><span class="p">,</span> <span class="nx">proxy</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://auth-service:3002</span><span class="dl">'</span><span class="p">));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api/projects</span><span class="dl">'</span><span class="p">,</span> <span class="nx">proxy</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://project-service:3005</span><span class="dl">'</span><span class="p">));</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api/memory</span><span class="dl">'</span><span class="p">,</span> <span class="nx">proxy</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://memory-service:3003</span><span class="dl">'</span><span class="p">));</span>
</code></pre></div></div>

<hr />

<h3 id="2--agent-based-architecture-strategy--template-method-pattern">2. 🤖 Agent-Based Architecture (Strategy + Template Method Pattern)</h3>

<p><strong>What is it?</strong>
A system where autonomous “agents” handle specific tasks. Each agent has its own capabilities and can work independently or together.</p>

<p><strong>The Interface (Contract):</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Every agent MUST implement these methods</span>
<span class="k">export</span> <span class="kr">interface</span> <span class="nx">IAgent</span> <span class="p">{</span>
  <span class="nl">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">name</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">capabilities</span><span class="p">:</span> <span class="nx">AgentCapability</span><span class="p">[];</span>
  
  <span class="nx">execute</span><span class="p">(</span><span class="nx">task</span><span class="p">:</span> <span class="nx">AgentTask</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">AgentResult</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="nx">canHandle</span><span class="p">(</span><span class="nx">task</span><span class="p">:</span> <span class="nx">AgentTask</span><span class="p">):</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="nx">getHealth</span><span class="p">():</span> <span class="nx">AgentHealth</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>The Base Template:</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nx">BaseAgent</span> <span class="k">implements</span> <span class="nx">IAgent</span> <span class="p">{</span>
  <span class="c1">// Template Method Pattern: Defines the algorithm structure</span>
  <span class="k">async</span> <span class="nx">execute</span><span class="p">(</span><span class="nx">task</span><span class="p">:</span> <span class="nx">AgentTask</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">AgentResult</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="c1">// Step 1: Validate (common for all agents)</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">canHandle</span><span class="p">(</span><span class="nx">task</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">createErrorResult</span><span class="p">(</span><span class="nx">task</span><span class="p">,</span> <span class="dl">'</span><span class="s1">TASK_NOT_SUPPORTED</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="c1">// Step 2: Check health (common)</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">status</span> <span class="o">!==</span> <span class="nx">AgentStatus</span><span class="p">.</span><span class="nx">READY</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">createErrorResult</span><span class="p">(</span><span class="nx">task</span><span class="p">,</span> <span class="dl">'</span><span class="s1">AGENT_NOT_READY</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="c1">// Step 3: Execute specific logic (different for each agent)</span>
    <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">executeTask</span><span class="p">(</span><span class="nx">task</span><span class="p">);</span> <span class="c1">// Abstract method</span>
    
    <span class="c1">// Step 4: Update metrics (common)</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">updateHealthMetrics</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
    
    <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
  <span class="p">}</span>
  
  <span class="c1">// Subclasses MUST implement these</span>
  <span class="kd">abstract</span> <span class="nx">canHandle</span><span class="p">(</span><span class="nx">task</span><span class="p">:</span> <span class="nx">AgentTask</span><span class="p">):</span> <span class="nx">boolean</span><span class="p">;</span>
  <span class="k">protected</span> <span class="kd">abstract</span> <span class="nx">executeTask</span><span class="p">(</span><span class="nx">task</span><span class="p">:</span> <span class="nx">AgentTask</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="kr">any</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Concrete Agent Example:</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">WebSearchAgent</span> <span class="kd">extends</span> <span class="nx">BaseAgent</span> <span class="p">{</span>
  <span class="nx">canHandle</span><span class="p">(</span><span class="nx">task</span><span class="p">:</span> <span class="nx">AgentTask</span><span class="p">):</span> <span class="nx">boolean</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">task</span><span class="p">.</span><span class="kd">type</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">SEARCH</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="nx">task</span><span class="p">.</span><span class="nx">capabilities</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="dl">'</span><span class="s1">WEB_SEARCH</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
  
  <span class="k">protected</span> <span class="k">async</span> <span class="nx">executeTask</span><span class="p">(</span><span class="nx">task</span><span class="p">:</span> <span class="nx">AgentTask</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="kr">any</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="c1">// Specific web search logic</span>
    <span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">searchGoogle</span><span class="p">(</span><span class="nx">task</span><span class="p">.</span><span class="nx">input</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">formatResults</span><span class="p">(</span><span class="nx">results</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h3 id="3--registry-pattern">3. 📚 Registry Pattern</h3>

<p><strong>What is it?</strong>
A centralized place to register and find objects (like a phone book for your services).</p>

<p><strong>Why use it?</strong></p>
<ul>
  <li>Central management of all agents</li>
  <li>Easy discovery of capabilities</li>
  <li>Dynamic registration/unregistration</li>
</ul>

<p><strong>Implementation:</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">AgentRegistry</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">agents</span><span class="p">:</span> <span class="nb">Map</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">,</span> <span class="nx">IAgent</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>
  <span class="k">private</span> <span class="nx">capabilityIndex</span><span class="p">:</span> <span class="nb">Map</span><span class="o">&lt;</span><span class="nx">AgentCapability</span><span class="p">,</span> <span class="nb">Set</span><span class="o">&lt;</span><span class="kr">string</span><span class="o">&gt;&gt;</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>
  
  <span class="c1">// Register a new agent</span>
  <span class="k">async</span> <span class="nx">register</span><span class="p">(</span><span class="nx">agent</span><span class="p">:</span> <span class="nx">IAgent</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">agents</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">agent</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">agent</span><span class="p">);</span>
    
    <span class="c1">// Index by capabilities for fast lookup</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">capability</span> <span class="k">of</span> <span class="nx">agent</span><span class="p">.</span><span class="nx">capabilities</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">capabilityIndex</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">capability</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">capabilityIndex</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">capability</span><span class="p">,</span> <span class="k">new</span> <span class="nb">Set</span><span class="p">());</span>
      <span class="p">}</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">capabilityIndex</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">capability</span><span class="p">)</span><span class="o">!</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">agent</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  
  <span class="c1">// Find agents that can handle a specific task</span>
  <span class="k">async</span> <span class="nx">findCapableAgents</span><span class="p">(</span><span class="nx">task</span><span class="p">:</span> <span class="nx">AgentTask</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">IAgent</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="na">capableAgents</span><span class="p">:</span> <span class="nx">IAgent</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">const</span> <span class="nx">requiredCapabilities</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getRequiredCapabilities</span><span class="p">(</span><span class="nx">task</span><span class="p">.</span><span class="kd">type</span><span class="p">);</span>
    
    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">capability</span> <span class="k">of</span> <span class="nx">requiredCapabilities</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">agentIds</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">capabilityIndex</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">capability</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">agentIds</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">agentId</span> <span class="k">of</span> <span class="nx">agentIds</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">const</span> <span class="nx">agent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">agents</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">agentId</span><span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">agent</span> <span class="o">&amp;&amp;</span> <span class="nx">agent</span><span class="p">.</span><span class="nx">canHandle</span><span class="p">(</span><span class="nx">task</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">capableAgents</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">agent</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">sortAgentsBySuitability</span><span class="p">(</span><span class="nx">capableAgents</span><span class="p">,</span> <span class="nx">task</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h3 id="4--factory-pattern">4. 🏭 Factory Pattern</h3>

<p><strong>What is it?</strong>
A pattern that creates objects without specifying their exact class. It’s like a restaurant menu - you order “pizza” and the kitchen (factory) decides how to make it.</p>

<p><strong>Why use it?</strong></p>
<ul>
  <li>Centralizes object creation logic</li>
  <li>Makes it easy to change how objects are created</li>
  <li>Hides complex initialization</li>
</ul>

<p><strong>Our API Client Factory:</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Factory function that creates configured API clients</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">createApiClient</span> <span class="o">=</span> <span class="p">(</span><span class="nx">config</span><span class="p">:</span> <span class="nb">Partial</span><span class="o">&lt;</span><span class="nx">ApiConfig</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{}):</span> <span class="nx">ApiClient</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Default configuration</span>
  <span class="kd">const</span> <span class="na">defaultConfig</span><span class="p">:</span> <span class="nx">ApiConfig</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">baseURL</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NEXT_PUBLIC_API_URL</span> <span class="o">||</span> <span class="dl">'</span><span class="s1">http://localhost:8080/api</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">timeout</span><span class="p">:</span> <span class="mi">30000</span><span class="p">,</span>
    <span class="na">retries</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">Accept</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
      <span class="dl">'</span><span class="s1">Content-Type</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">};</span>
  
  <span class="c1">// Merge with custom config</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nx">ApiClient</span><span class="p">({</span> <span class="p">...</span><span class="nx">defaultConfig</span><span class="p">,</span> <span class="p">...</span><span class="nx">config</span> <span class="p">});</span>
<span class="p">};</span>

<span class="c1">// Usage</span>
<span class="kd">const</span> <span class="nx">apiClient</span> <span class="o">=</span> <span class="nx">createApiClient</span><span class="p">();</span> <span class="c1">// Default config</span>
<span class="kd">const</span> <span class="nx">customClient</span> <span class="o">=</span> <span class="nx">createApiClient</span><span class="p">({</span> <span class="na">timeout</span><span class="p">:</span> <span class="mi">60000</span> <span class="p">});</span> <span class="c1">// Custom timeout</span>
</code></pre></div></div>

<hr />

<h3 id="5-️-provider-pattern-react-context">5. ⚛️ Provider Pattern (React Context)</h3>

<p><strong>What is it?</strong>
A way to share data across your React component tree without manually passing props down through every level.</p>

<p><strong>The Problem (Prop Drilling):</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ❌ Without Provider Pattern - props passed through every level</span>
<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">user</span><span class="p">,</span> <span class="nx">setUser</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">Dashboard</span> <span class="nx">user</span><span class="o">=</span><span class="p">{</span><span class="nx">user</span><span class="p">}</span> <span class="nx">setUser</span><span class="o">=</span><span class="p">{</span><span class="nx">setUser</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="err">;
</span><span class="p">}</span>

<span class="kd">function</span> <span class="nx">Dashboard</span><span class="p">({</span> <span class="nx">user</span><span class="p">,</span> <span class="nx">setUser</span> <span class="p">})</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">Profile</span> <span class="nx">user</span><span class="o">=</span><span class="p">{</span><span class="nx">user</span><span class="p">}</span> <span class="nx">setUser</span><span class="o">=</span><span class="p">{</span><span class="nx">setUser</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="err">;
</span><span class="p">}</span>

<span class="kd">function</span> <span class="nx">Profile</span><span class="p">({</span> <span class="nx">user</span><span class="p">,</span> <span class="nx">setUser</span> <span class="p">})</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">Avatar</span> <span class="nx">user</span><span class="o">=</span><span class="p">{</span><span class="nx">user</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="err">;
</span><span class="p">}</span>
</code></pre></div></div>

<p><strong>The Solution (Provider Pattern):</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ✅ With Provider Pattern</span>
<span class="c1">// 1. Create Context</span>
<span class="kd">const</span> <span class="nx">AuthContext</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">createContext</span><span class="o">&lt;</span><span class="nx">AuthContextType</span> <span class="o">|</span> <span class="kc">null</span><span class="o">&gt;</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

<span class="c1">// 2. Create Provider Component</span>
<span class="k">export</span> <span class="kd">function</span> <span class="nx">Providers</span><span class="p">({</span> <span class="nx">children</span> <span class="p">}:</span> <span class="nx">PropsWithChildren</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">queryClient</span> <span class="o">=</span> <span class="nx">useMemo</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">QueryClient</span><span class="p">(),</span> <span class="p">[]);</span>
  <span class="kd">const</span> <span class="nx">authService</span> <span class="o">=</span> <span class="nx">useMemo</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">createAuthService</span><span class="p">(</span><span class="nx">apiClient</span><span class="p">),</span> <span class="p">[]);</span>
  
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">QueryClientProvider</span> <span class="nx">client</span><span class="o">=</span><span class="p">{</span><span class="nx">queryClient</span><span class="p">}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">AuthContext</span><span class="p">.</span><span class="nx">Provider</span> <span class="nx">value</span><span class="o">=</span><span class="p">{{</span> <span class="nx">authService</span> <span class="p">}}</span><span class="o">&gt;</span>
        <span class="p">{</span><span class="nx">children</span><span class="p">}</span>
      <span class="o">&lt;</span><span class="sr">/AuthContext.Provider</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/QueryClientProvider</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 3. Use anywhere in the tree</span>
<span class="kd">function</span> <span class="nx">Avatar</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">authService</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useContext</span><span class="p">(</span><span class="nx">AuthContext</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">authService</span><span class="p">.</span><span class="nx">getCurrentUser</span><span class="p">();</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">img</span> <span class="nx">src</span><span class="o">=</span><span class="p">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">avatar</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="err">;
</span><span class="p">}</span>
</code></pre></div></div>

<hr />

<h3 id="6-️-observer-pattern">6. 👁️ Observer Pattern</h3>

<p><strong>What is it?</strong>
A pattern where an object (subject) maintains a list of dependents (observers) and notifies them of state changes.</p>

<p><strong>Real-world analogy:</strong> YouTube subscriptions - when a channel posts a video, all subscribers get notified.</p>

<p><strong>VS Code Extension Example:</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Subject: DevMentorClient</span>
<span class="kd">class</span> <span class="nx">DevMentorClient</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">listeners</span><span class="p">:</span> <span class="nb">Array</span><span class="o">&lt;</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[];</span>
  
  <span class="nx">onConnectionChanged</span><span class="p">(</span><span class="nx">callback</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">listeners</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">callback</span><span class="p">);</span>
  <span class="p">}</span>
  
  <span class="k">private</span> <span class="nx">notifyConnectionChange</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">listeners</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">callback</span> <span class="o">=&gt;</span> <span class="nx">callback</span><span class="p">());</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Observers: Various providers that react to connection changes</span>
<span class="nx">devMentorClient</span><span class="p">.</span><span class="nx">onConnectionChanged</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">updateConnectionStatus</span><span class="p">();</span>      <span class="c1">// Observer 1</span>
  <span class="nx">suggestionsProvider</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>  <span class="c1">// Observer 2</span>
  <span class="nx">tddProvider</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>          <span class="c1">// Observer 3</span>
  <span class="nx">memoryProvider</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>       <span class="c1">// Observer 4</span>
<span class="p">});</span>

<span class="c1">// Document watching</span>
<span class="nx">vscode</span><span class="p">.</span><span class="nx">workspace</span><span class="p">.</span><span class="nx">onDidChangeTextDocument</span><span class="p">(</span><span class="k">async</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// React to document changes</span>
  <span class="k">await</span> <span class="nx">devMentorClient</span><span class="p">.</span><span class="nx">sendCodeContext</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nb">document</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<hr />

<h3 id="7--command-pattern">7. 📝 Command Pattern</h3>

<p><strong>What is it?</strong>
Encapsulates a request as an object, allowing you to parameterize clients with different requests, queue operations, and support undo operations.</p>

<p><strong>VS Code Extension Commands:</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Each command is an object with its own execute logic</span>
<span class="kd">const</span> <span class="nx">commands</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">devmentor.connect</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">execute</span><span class="p">:</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">await</span> <span class="nx">devMentorClient</span><span class="p">.</span><span class="nx">connect</span><span class="p">();</span>
      <span class="nx">updateConnectionStatus</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">devmentor.startTDD</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">execute</span><span class="p">:</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">taskName</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">vscode</span><span class="p">.</span><span class="nb">window</span><span class="p">.</span><span class="nx">showInputBox</span><span class="p">({</span>
        <span class="na">prompt</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Enter a name for your TDD task</span><span class="dl">'</span>
      <span class="p">});</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">taskName</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">await</span> <span class="nx">devMentorClient</span><span class="p">.</span><span class="nx">startTDDCycle</span><span class="p">(</span><span class="nx">taskName</span><span class="p">,</span> <span class="nx">editor</span><span class="p">.</span><span class="nb">document</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">];</span>

<span class="c1">// Register all commands</span>
<span class="nx">commands</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">cmd</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">vscode</span><span class="p">.</span><span class="nx">commands</span><span class="p">.</span><span class="nx">registerCommand</span><span class="p">(</span><span class="nx">cmd</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">cmd</span><span class="p">.</span><span class="nx">execute</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<hr />

<h3 id="8-️-queue-pattern-with-guardian">8. 🛡️ Queue Pattern with Guardian</h3>

<p><strong>What is it?</strong>
A pattern that manages a queue of items with protection mechanisms (the “guardian” part).</p>

<p><strong>Our Implementation:</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">QueueGuardian</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">queue</span><span class="p">:</span> <span class="nx">QueueItem</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">private</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">maxItems</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>        <span class="c1">// Guardian: Prevents memory overflow</span>
    <span class="na">autoSaveMs</span><span class="p">:</span> <span class="mi">5000</span><span class="p">,</span>     <span class="c1">// Guardian: Auto-persists data</span>
    <span class="na">tokenBudget</span><span class="p">:</span> <span class="mi">2800</span>     <span class="c1">// Guardian: Prevents API overload</span>
  <span class="p">};</span>
  
  <span class="nx">capture</span><span class="p">(</span><span class="nx">item</span><span class="p">:</span> <span class="nx">QueueItem</span><span class="p">):</span> <span class="nx">QueueItem</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
    
    <span class="c1">// Guardian logic: Maintain size limit</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">maxItems</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">maxItems</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="k">return</span> <span class="nx">item</span><span class="p">;</span>
  <span class="p">}</span>
  
  <span class="c1">// Batch processing with token budget</span>
  <span class="k">async</span> <span class="nx">flushToMemoryBank</span><span class="p">(</span><span class="nx">tags</span><span class="p">:</span> <span class="kr">string</span><span class="p">[]):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="kr">number</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="c1">// Guardian: Chunk by token budget to prevent API overload</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">batch</span> <span class="k">of</span> <span class="k">this</span><span class="p">.</span><span class="nx">chunkByTokens</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">tokenBudget</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">sendBatch</span><span class="p">(</span><span class="nx">batch</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  
  <span class="k">private</span> <span class="nx">chunkByTokens</span><span class="p">(</span><span class="nx">items</span><span class="p">:</span> <span class="nx">QueueItem</span><span class="p">[],</span> <span class="nx">budget</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="nx">QueueItem</span><span class="p">[][]</span> <span class="p">{</span>
    <span class="c1">// Smart chunking algorithm</span>
    <span class="kd">const</span> <span class="nx">chunks</span><span class="p">:</span> <span class="nx">QueueItem</span><span class="p">[][]</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">let</span> <span class="nx">current</span><span class="p">:</span> <span class="nx">QueueItem</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">let</span> <span class="nx">tokens</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    
    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">item</span> <span class="k">of</span> <span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">tokenCount</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">approxTokens</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">content</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">tokens</span> <span class="o">+</span> <span class="nx">tokenCount</span> <span class="o">&gt;</span> <span class="nx">budget</span> <span class="o">&amp;&amp;</span> <span class="nx">current</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">current</span><span class="p">);</span>
        <span class="nx">current</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">tokens</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">current</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
      <span class="nx">tokens</span> <span class="o">+=</span> <span class="nx">tokenCount</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="k">return</span> <span class="nx">chunks</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h3 id="9--retry-pattern-with-exponential-backoff">9. 🔄 Retry Pattern with Exponential Backoff</h3>

<p><strong>What is it?</strong>
A pattern that automatically retries failed operations with increasing delays between attempts.</p>

<p><strong>Why use it?</strong></p>
<ul>
  <li>Handles temporary network failures</li>
  <li>Prevents overwhelming servers</li>
  <li>Improves reliability</li>
</ul>

<p><strong>Implementation:</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kd">class</span> <span class="nx">ApiClient</span> <span class="p">{</span>
  <span class="k">async</span> <span class="nx">request</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">method</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">endpoint</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">data</span><span class="p">?:</span> <span class="kr">any</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">maxRetries</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="kd">let</span> <span class="na">lastError</span><span class="p">:</span> <span class="nb">Error</span> <span class="o">|</span> <span class="kc">null</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">attempt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">attempt</span> <span class="o">&lt;=</span> <span class="nx">maxRetries</span><span class="p">;</span> <span class="nx">attempt</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">endpoint</span><span class="p">,</span> <span class="p">{</span> <span class="nx">method</span><span class="p">,</span> <span class="na">body</span><span class="p">:</span> <span class="nx">data</span> <span class="p">});</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
        
        <span class="c1">// Don't retry client errors (except specific ones)</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span> <span class="o">&gt;=</span> <span class="mi">400</span> <span class="o">&amp;&amp;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">status</span> <span class="o">&lt;</span> <span class="mi">500</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">const</span> <span class="nx">retryableStatuses</span> <span class="o">=</span> <span class="p">[</span><span class="mi">408</span><span class="p">,</span> <span class="mi">429</span><span class="p">];</span> <span class="c1">// Timeout, Too Many Requests</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">retryableStatuses</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">`HTTP </span><span class="p">${</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">lastError</span> <span class="o">=</span> <span class="nx">error</span><span class="p">;</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="nx">attempt</span> <span class="o">===</span> <span class="nx">maxRetries</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
        
        <span class="c1">// Exponential backoff: 1s, 2s, 4s, 8s...</span>
        <span class="kd">const</span> <span class="nx">delay</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">1000</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nx">attempt</span><span class="p">),</span> <span class="mi">10000</span><span class="p">);</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Retry </span><span class="p">${</span><span class="nx">attempt</span> <span class="o">+</span> <span class="mi">1</span><span class="p">}</span><span class="s2">/</span><span class="p">${</span><span class="nx">maxRetries</span><span class="p">}</span><span class="s2"> after </span><span class="p">${</span><span class="nx">delay</span><span class="p">}</span><span class="s2">ms`</span><span class="p">);</span>
        <span class="k">await</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">(</span><span class="nx">resolve</span> <span class="o">=&gt;</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">delay</span><span class="p">));</span>
      <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="k">throw</span> <span class="nx">lastError</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h3 id="10--repository-pattern">10. 💾 Repository Pattern</h3>

<p><strong>What is it?</strong>
A pattern that encapsulates data access logic and provides a more object-oriented view of the persistence layer.</p>

<p><strong>Why use it?</strong></p>
<ul>
  <li>Separates business logic from data access</li>
  <li>Makes it easy to switch databases</li>
  <li>Centralizes query logic</li>
</ul>

<p><strong>Implementation:</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Repository Interface</span>
<span class="kr">interface</span> <span class="nx">IProjectRepository</span> <span class="p">{</span>
  <span class="nx">create</span><span class="p">(</span><span class="nx">project</span><span class="p">:</span> <span class="nx">CreateProjectDTO</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Project</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="nx">findById</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Project</span> <span class="o">|</span> <span class="kc">null</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="nx">update</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">data</span><span class="p">:</span> <span class="nx">UpdateProjectDTO</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Project</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="k">delete</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="nx">findByUser</span><span class="p">(</span><span class="nx">userId</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Project</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// PostgreSQL Implementation</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">PostgresProjectRepository</span> <span class="k">implements</span> <span class="nx">IProjectRepository</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">pool</span><span class="p">:</span> <span class="nx">Pool</span><span class="p">)</span> <span class="p">{}</span>
  
  <span class="k">async</span> <span class="nx">create</span><span class="p">(</span><span class="nx">data</span><span class="p">:</span> <span class="nx">CreateProjectDTO</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Project</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="s2">`
      INSERT INTO projects (name, description, user_id, tech_stack)
      VALUES ($1, $2, $3, $4)
      RETURNING *
    `</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">pool</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="p">[</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">description</span><span class="p">,</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">userId</span><span class="p">,</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">techStack</span>
    <span class="p">]);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">mapToProject</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
  <span class="p">}</span>
  
  <span class="k">async</span> <span class="nx">findById</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Project</span> <span class="o">|</span> <span class="kc">null</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">query</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">SELECT * FROM projects WHERE id = $1</span><span class="dl">'</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">pool</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="p">[</span><span class="nx">id</span><span class="p">]);</span>
    <span class="k">return</span> <span class="nx">result</span><span class="p">.</span><span class="nx">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">mapToProject</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">:</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
  
  <span class="c1">// Maps database row to domain object</span>
  <span class="k">private</span> <span class="nx">mapToProject</span><span class="p">(</span><span class="nx">row</span><span class="p">:</span> <span class="kr">any</span><span class="p">):</span> <span class="nx">Project</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="nx">row</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
      <span class="na">name</span><span class="p">:</span> <span class="nx">row</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
      <span class="na">description</span><span class="p">:</span> <span class="nx">row</span><span class="p">.</span><span class="nx">description</span><span class="p">,</span>
      <span class="na">userId</span><span class="p">:</span> <span class="nx">row</span><span class="p">.</span><span class="nx">user_id</span><span class="p">,</span>
      <span class="na">techStack</span><span class="p">:</span> <span class="nx">row</span><span class="p">.</span><span class="nx">tech_stack</span><span class="p">,</span>
      <span class="na">createdAt</span><span class="p">:</span> <span class="nx">row</span><span class="p">.</span><span class="nx">created_at</span><span class="p">,</span>
      <span class="na">updatedAt</span><span class="p">:</span> <span class="nx">row</span><span class="p">.</span><span class="nx">updated_at</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Service uses repository</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">ProjectService</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">repository</span><span class="p">:</span> <span class="nx">IProjectRepository</span><span class="p">)</span> <span class="p">{}</span> <span class="c1">// DI!</span>
  
  <span class="k">async</span> <span class="nx">createProject</span><span class="p">(</span><span class="nx">userId</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">data</span><span class="p">:</span> <span class="nx">CreateProjectDTO</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Project</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="c1">// Business logic</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">name</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Project name must be at least 3 characters</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="c1">// Delegate to repository</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">repository</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span> <span class="p">...</span><span class="nx">data</span><span class="p">,</span> <span class="nx">userId</span> <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h3 id="11--workflow-orchestration-pattern">11. 🎼 Workflow Orchestration Pattern</h3>

<p><strong>What is it?</strong>
A pattern that coordinates multiple services/agents to complete complex tasks.</p>

<p><strong>Our Implementation:</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="kr">interface</span> <span class="nx">IWorkflowOrchestrator</span> <span class="p">{</span>
  <span class="nx">executeWorkflow</span><span class="p">(</span><span class="nx">query</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">context</span><span class="p">:</span> <span class="nx">AgentContext</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">WorkflowResult</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nx">WorkflowOrchestrator</span> <span class="k">implements</span> <span class="nx">IWorkflowOrchestrator</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span>
    <span class="k">private</span> <span class="nx">registry</span><span class="p">:</span> <span class="nx">AgentRegistry</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">taskDecomposer</span><span class="p">:</span> <span class="nx">TaskDecomposer</span>
  <span class="p">)</span> <span class="p">{}</span>
  
  <span class="k">async</span> <span class="nx">executeWorkflow</span><span class="p">(</span><span class="nx">query</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">context</span><span class="p">:</span> <span class="nx">AgentContext</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">WorkflowResult</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="c1">// Step 1: Decompose complex query into tasks</span>
    <span class="kd">const</span> <span class="nx">tasks</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">taskDecomposer</span><span class="p">.</span><span class="nx">decompose</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">context</span><span class="p">);</span>
    
    <span class="c1">// Step 2: Find capable agents for each task</span>
    <span class="kd">const</span> <span class="nx">assignments</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">,</span> <span class="nx">IAgent</span><span class="o">&gt;</span><span class="p">();</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">task</span> <span class="k">of</span> <span class="nx">tasks</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">agent</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">registry</span><span class="p">.</span><span class="nx">findBestAgent</span><span class="p">(</span><span class="nx">task</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">agent</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">`No agent available for task: </span><span class="p">${</span><span class="nx">task</span><span class="p">.</span><span class="kd">type</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
      <span class="nx">assignments</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">task</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">agent</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="c1">// Step 3: Execute tasks (some in parallel, some sequential)</span>
    <span class="kd">const</span> <span class="nx">results</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">executeTasks</span><span class="p">(</span><span class="nx">tasks</span><span class="p">,</span> <span class="nx">assignments</span><span class="p">);</span>
    
    <span class="c1">// Step 4: Synthesize results</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">synthesizeResults</span><span class="p">(</span><span class="nx">results</span><span class="p">);</span>
  <span class="p">}</span>
  
  <span class="k">private</span> <span class="k">async</span> <span class="nx">executeTasks</span><span class="p">(</span>
    <span class="nx">tasks</span><span class="p">:</span> <span class="nx">AgentTask</span><span class="p">[],</span> 
    <span class="nx">assignments</span><span class="p">:</span> <span class="nb">Map</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">,</span> <span class="nx">IAgent</span><span class="o">&gt;</span>
  <span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">AgentResult</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="c1">// Group tasks by dependencies</span>
    <span class="kd">const</span> <span class="nx">taskGraph</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">buildDependencyGraph</span><span class="p">(</span><span class="nx">tasks</span><span class="p">);</span>
    <span class="kd">const</span> <span class="na">results</span><span class="p">:</span> <span class="nx">AgentResult</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[];</span>
    
    <span class="c1">// Execute in topological order</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">const</span> <span class="nx">level</span> <span class="k">of</span> <span class="nx">taskGraph</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Execute all tasks at this level in parallel</span>
      <span class="kd">const</span> <span class="nx">levelResults</span> <span class="o">=</span> <span class="k">await</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span>
        <span class="nx">level</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">task</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="kd">const</span> <span class="nx">agent</span> <span class="o">=</span> <span class="nx">assignments</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">task</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span><span class="o">!</span><span class="p">;</span>
          <span class="k">return</span> <span class="nx">agent</span><span class="p">.</span><span class="nx">execute</span><span class="p">(</span><span class="nx">task</span><span class="p">);</span>
        <span class="p">})</span>
      <span class="p">);</span>
      <span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">(...</span><span class="nx">levelResults</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h3 id="12--component-composition-pattern">12. 🧩 Component Composition Pattern</h3>

<p><strong>What is it?</strong>
Building complex UI components by combining simpler ones.</p>

<p><strong>Our Button Component:</strong></p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Base button with composition of styles</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">Button</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">forwardRef</span><span class="o">&lt;</span><span class="nx">HTMLButtonElement</span><span class="p">,</span> <span class="nx">ButtonProps</span><span class="o">&gt;</span><span class="p">(</span>
  <span class="p">({</span> <span class="nx">variant</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">primary</span><span class="dl">'</span><span class="p">,</span> <span class="nx">size</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">md</span><span class="dl">'</span><span class="p">,</span> <span class="nx">loading</span><span class="p">,</span> <span class="nx">children</span><span class="p">,</span> <span class="p">...</span><span class="nx">props</span> <span class="p">},</span> <span class="nx">ref</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">button</span>
        <span class="nx">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">ref</span><span class="p">}</span>
        <span class="nx">className</span><span class="o">=</span><span class="p">{</span><span class="nx">cn</span><span class="p">(</span>
          <span class="c1">// Base styles (always applied)</span>
          <span class="dl">'</span><span class="s1">inline-flex items-center justify-center rounded-md</span><span class="dl">'</span><span class="p">,</span>
          <span class="dl">'</span><span class="s1">focus:outline-none focus:ring-2</span><span class="dl">'</span><span class="p">,</span>
          
          <span class="c1">// Variant styles (conditional)</span>
          <span class="nx">buttonVariants</span><span class="p">[</span><span class="nx">variant</span><span class="p">],</span>
          
          <span class="c1">// Size styles (conditional)</span>
          <span class="nx">buttonSizes</span><span class="p">[</span><span class="nx">size</span><span class="p">],</span>
          
          <span class="c1">// State styles (conditional)</span>
          <span class="nx">loading</span> <span class="o">&amp;&amp;</span> <span class="dl">'</span><span class="s1">opacity-50 cursor-not-allowed</span><span class="dl">'</span>
        <span class="p">)}</span>
        <span class="nx">disabled</span><span class="o">=</span><span class="p">{</span><span class="nx">loading</span><span class="p">}</span>
        <span class="p">{...</span><span class="nx">props</span><span class="p">}</span>
      <span class="o">&gt;</span>
        <span class="p">{</span><span class="nx">loading</span> <span class="o">&amp;&amp;</span> <span class="o">&lt;</span><span class="nx">Spinner</span> <span class="o">/&gt;</span><span class="p">}</span>
        <span class="p">{</span><span class="nx">children</span><span class="p">}</span>
      <span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">);</span>

<span class="c1">// Usage - composing different variations</span>
<span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">variant</span><span class="o">=</span><span class="dl">"</span><span class="s2">primary</span><span class="dl">"</span> <span class="nx">size</span><span class="o">=</span><span class="dl">"</span><span class="s2">lg</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Submit</span><span class="o">&lt;</span><span class="sr">/Button</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">variant</span><span class="o">=</span><span class="dl">"</span><span class="s2">danger</span><span class="dl">"</span> <span class="nx">size</span><span class="o">=</span><span class="dl">"</span><span class="s2">sm</span><span class="dl">"</span> <span class="nx">loading</span><span class="o">&gt;</span><span class="nx">Delete</span><span class="o">&lt;</span><span class="sr">/Button</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">Button</span> <span class="nx">variant</span><span class="o">=</span><span class="dl">"</span><span class="s2">ghost</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Cancel</span><span class="o">&lt;</span><span class="sr">/Button</span><span class="err">&gt;
</span></code></pre></div></div>

<hr />

<h2 id="technology-stack">Technology Stack</h2>

<h3 id="backend-technologies">Backend Technologies</h3>

<table>
  <thead>
    <tr>
      <th>Technology</th>
      <th>Purpose</th>
      <th>Why We Use It</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Node.js + TypeScript</strong></td>
      <td>Runtime &amp; Language</td>
      <td>Type safety, modern JS features, great ecosystem</td>
    </tr>
    <tr>
      <td><strong>Express.js</strong></td>
      <td>Web Framework</td>
      <td>Simple, flexible, well-documented</td>
    </tr>
    <tr>
      <td><strong>PostgreSQL</strong></td>
      <td>Primary Database</td>
      <td>ACID compliance, complex queries, reliability</td>
    </tr>
    <tr>
      <td><strong>Qdrant</strong></td>
      <td>Vector Database</td>
      <td>Semantic search, embeddings storage for AI</td>
    </tr>
    <tr>
      <td><strong>Redis</strong></td>
      <td>Cache &amp; Pub/Sub</td>
      <td>Fast in-memory operations, message broker</td>
    </tr>
    <tr>
      <td><strong>Docker</strong></td>
      <td>Containerization</td>
      <td>Consistent environments, easy deployment</td>
    </tr>
    <tr>
      <td><strong>Kubernetes/Istio</strong></td>
      <td>Orchestration</td>
      <td>Auto-scaling, service mesh, traffic management</td>
    </tr>
  </tbody>
</table>

<h3 id="frontend-technologies">Frontend Technologies</h3>

<table>
  <thead>
    <tr>
      <th>Technology</th>
      <th>Purpose</th>
      <th>Why We Use It</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Next.js 14</strong></td>
      <td>React Framework</td>
      <td>SSR/SSG, App Router, built-in optimizations</td>
    </tr>
    <tr>
      <td><strong>TypeScript</strong></td>
      <td>Language</td>
      <td>Type safety, better IDE support</td>
    </tr>
    <tr>
      <td><strong>TanStack Query</strong></td>
      <td>Data Fetching</td>
      <td>Caching, synchronization, background updates</td>
    </tr>
    <tr>
      <td><strong>Tailwind CSS</strong></td>
      <td>Styling</td>
      <td>Utility-first, consistent design, fast development</td>
    </tr>
    <tr>
      <td><strong>Radix UI</strong></td>
      <td>Components</td>
      <td>Accessible, unstyled, composable</td>
    </tr>
  </tbody>
</table>

<h3 id="aiml-technologies">AI/ML Technologies</h3>

<table>
  <thead>
    <tr>
      <th>Technology</th>
      <th>Purpose</th>
      <th>Why We Use It</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>OpenAI API</strong></td>
      <td>LLM</td>
      <td>GPT-4 for code generation and analysis</td>
    </tr>
    <tr>
      <td><strong>LangChain</strong></td>
      <td>AI Framework</td>
      <td>Chain LLM calls, manage prompts</td>
    </tr>
    <tr>
      <td><strong>Embeddings</strong></td>
      <td>Semantic Search</td>
      <td>Convert text to vectors for similarity search</td>
    </tr>
    <tr>
      <td><strong>RAG Pattern</strong></td>
      <td>Knowledge Retrieval</td>
      <td>Enhance AI responses with relevant context</td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="frontend-scalability-guide">Frontend Scalability Guide</h2>

<h3 id="-the-art-of-scaling-react-applications">⚡ The Art of Scaling React Applications</h3>

<blockquote>
  <p>“A scalable frontend is like a LEGO set - small pieces that combine to build something amazing!”</p>
</blockquote>

<h3 id="-core-scalability-principles">🎯 Core Scalability Principles</h3>

<h4 id="1-code-splitting--lazy-loading-">1. <strong>Code Splitting &amp; Lazy Loading</strong> 🚀</h4>

<p><strong>The Problem:</strong> Loading your entire app at once = slow initial load
<strong>The Solution:</strong> Load only what users need, when they need it!</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ❌ Before: Everything loads at once</span>
<span class="k">import</span> <span class="nx">Dashboard</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./Dashboard</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Analytics</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./Analytics</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Settings</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./Settings</span><span class="dl">'</span><span class="p">;</span>

<span class="c1">// ✅ After: Dynamic imports with lazy loading</span>
<span class="kd">const</span> <span class="nx">Dashboard</span> <span class="o">=</span> <span class="nx">lazy</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">./Dashboard</span><span class="dl">'</span><span class="p">));</span>
<span class="kd">const</span> <span class="nx">Analytics</span> <span class="o">=</span> <span class="nx">lazy</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">./Analytics</span><span class="dl">'</span><span class="p">));</span>
<span class="kd">const</span> <span class="nx">Settings</span> <span class="o">=</span> <span class="nx">lazy</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">./Settings</span><span class="dl">'</span><span class="p">));</span>

<span class="c1">// In your component</span>
<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Suspense</span> <span class="nx">fallback</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">LoadingSpinner</span> <span class="o">/&gt;</span><span class="p">}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Routes</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/dashboard</span><span class="dl">"</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">Dashboard</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/analytics</span><span class="dl">"</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">Analytics</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">Route</span> <span class="nx">path</span><span class="o">=</span><span class="dl">"</span><span class="s2">/settings</span><span class="dl">"</span> <span class="nx">element</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">Settings</span> <span class="o">/&gt;</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/Routes</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/Suspense</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="2-virtualization-for-large-lists-">2. <strong>Virtualization for Large Lists</strong> 📜</h4>

<p><strong>When you have 10,000 items to render:</strong></p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Using react-window for virtualization</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">FixedSizeList</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-window</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">VirtualizedList</span><span class="p">({</span> <span class="nx">items</span> <span class="p">}:</span> <span class="p">{</span> <span class="nl">items</span><span class="p">:</span> <span class="nx">Item</span><span class="p">[]</span> <span class="p">})</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">Row</span> <span class="o">=</span> <span class="p">({</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">style</span> <span class="p">}:</span> <span class="p">{</span> <span class="nl">index</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span> <span class="nl">style</span><span class="p">:</span> <span class="nx">React</span><span class="p">.</span><span class="nx">CSSProperties</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">style</span><span class="p">}</span><span class="o">&gt;</span>
      <span class="p">{</span><span class="nx">items</span><span class="p">[</span><span class="nx">index</span><span class="p">].</span><span class="nx">name</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
  
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">FixedSizeList</span>
      <span class="nx">height</span><span class="o">=</span><span class="p">{</span><span class="mi">600</span><span class="p">}</span>  <span class="c1">// Viewport height</span>
      <span class="nx">itemCount</span><span class="o">=</span><span class="p">{</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">}</span>
      <span class="nx">itemSize</span><span class="o">=</span><span class="p">{</span><span class="mi">50</span><span class="p">}</span> <span class="c1">// Each row height</span>
      <span class="nx">width</span><span class="o">=</span><span class="dl">"</span><span class="s2">100%</span><span class="dl">"</span>
    <span class="o">&gt;</span>
      <span class="p">{</span><span class="nx">Row</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="sr">/FixedSizeList</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="3-state-management-architecture-️">3. <strong>State Management Architecture</strong> 🏗️</h4>

<p><strong>The Scalability Pyramid:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>         🔺 Global State (Zustand/Redux)
        /  \
       /    \
      /      \
     / Server \
    /  State   \
   / (TanStack) \
  /______________\
 /                \
/   Local State    \
(useState/useReducer)
</code></pre></div></div>

<p><strong>Implementation:</strong></p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 1. Local State - Component-specific</span>
<span class="kd">function</span> <span class="nx">Counter</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">count</span><span class="p">,</span> <span class="nx">setCount</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">setCount</span><span class="p">(</span><span class="nx">c</span> <span class="o">=&gt;</span> <span class="nx">c</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/button&gt;</span><span class="err">;
</span><span class="p">}</span>

<span class="c1">// 2. Server State - TanStack Query</span>
<span class="kd">function</span> <span class="nx">UserProfile</span><span class="p">({</span> <span class="nx">userId</span> <span class="p">}:</span> <span class="p">{</span> <span class="nl">userId</span><span class="p">:</span> <span class="kr">string</span> <span class="p">})</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">isLoading</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useQuery</span><span class="p">({</span>
    <span class="na">queryKey</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">user</span><span class="dl">'</span><span class="p">,</span> <span class="nx">userId</span><span class="p">],</span>
    <span class="na">queryFn</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">fetchUser</span><span class="p">(</span><span class="nx">userId</span><span class="p">),</span>
    <span class="na">staleTime</span><span class="p">:</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span> <span class="c1">// 5 minutes</span>
  <span class="p">});</span>
  
  <span class="k">if</span> <span class="p">(</span><span class="nx">isLoading</span><span class="p">)</span> <span class="k">return</span> <span class="o">&lt;</span><span class="nx">Skeleton</span> <span class="o">/&gt;</span><span class="p">;</span>
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">Profile</span> <span class="nx">user</span><span class="o">=</span><span class="p">{</span><span class="nx">data</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="err">;
</span><span class="p">}</span>

<span class="c1">// 3. Global State - Zustand</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">create</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">zustand</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">useAppStore</span> <span class="o">=</span> <span class="nx">create</span><span class="p">((</span><span class="kd">set</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
  <span class="na">theme</span><span class="p">:</span> <span class="dl">'</span><span class="s1">light</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">toggleTheme</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="kd">set</span><span class="p">((</span><span class="nx">state</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span> 
    <span class="na">theme</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">theme</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">light</span><span class="dl">'</span> <span class="p">?</span> <span class="dl">'</span><span class="s1">dark</span><span class="dl">'</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">light</span><span class="dl">'</span> 
  <span class="p">})),</span>
<span class="p">}));</span>
</code></pre></div></div>

<h4 id="4-micro-frontend-architecture-">4. <strong>Micro-Frontend Architecture</strong> 🧩</h4>

<p><strong>Split your app into independent deployable units:</strong></p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Module Federation with Webpack 5</span>
<span class="c1">// Shell Application (Container)</span>
<span class="kd">const</span> <span class="nx">RemoteButton</span> <span class="o">=</span> <span class="nx">lazy</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">designSystem/Button</span><span class="dl">'</span><span class="p">));</span>
<span class="kd">const</span> <span class="nx">RemoteDashboard</span> <span class="o">=</span> <span class="nx">lazy</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">dashboard/Main</span><span class="dl">'</span><span class="p">));</span>

<span class="kd">function</span> <span class="nx">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">ErrorBoundary</span> <span class="nx">fallback</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">ErrorFallback</span> <span class="o">/&gt;</span><span class="p">}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">Suspense</span> <span class="nx">fallback</span><span class="o">=</span><span class="p">{</span><span class="o">&lt;</span><span class="nx">Loading</span> <span class="o">/&gt;</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">RemoteDashboard</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="nx">RemoteButton</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="p">{}}</span><span class="o">&gt;</span><span class="nx">Click</span> <span class="nx">me</span><span class="o">!&lt;</span><span class="sr">/RemoteButton</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/Suspense</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/ErrorBoundary</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="c1">// webpack.config.js</span>
<span class="kr">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span>
    <span class="k">new</span> <span class="nx">ModuleFederationPlugin</span><span class="p">({</span>
      <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">shell</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">remotes</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">designSystem</span><span class="p">:</span> <span class="dl">'</span><span class="s1">designSystem@http://localhost:3001/remoteEntry.js</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">dashboard</span><span class="p">:</span> <span class="dl">'</span><span class="s1">dashboard@http://localhost:3002/remoteEntry.js</span><span class="dl">'</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">}),</span>
  <span class="p">],</span>
<span class="p">};</span>
</code></pre></div></div>

<h4 id="5-performance-optimization-patterns-️">5. <strong>Performance Optimization Patterns</strong> 🏎️</h4>

<p><strong>a) Memoization Strategy:</strong></p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Expensive computation? Memoize it!</span>
<span class="kd">const</span> <span class="nx">ExpensiveComponent</span> <span class="o">=</span> <span class="nx">memo</span><span class="p">(({</span> <span class="nx">data</span> <span class="p">}:</span> <span class="p">{</span> <span class="nl">data</span><span class="p">:</span> <span class="nx">ComplexData</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">processedData</span> <span class="o">=</span> <span class="nx">useMemo</span><span class="p">(</span>
    <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">expensiveProcessing</span><span class="p">(</span><span class="nx">data</span><span class="p">),</span>
    <span class="p">[</span><span class="nx">data</span><span class="p">]</span> <span class="c1">// Only recompute when data changes</span>
  <span class="p">);</span>
  
  <span class="kd">const</span> <span class="nx">handleClick</span> <span class="o">=</span> <span class="nx">useCallback</span><span class="p">(</span>
    <span class="p">(</span><span class="na">item</span><span class="p">:</span> <span class="nx">Item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="c1">// Handle click with item</span>
    <span class="p">},</span>
    <span class="p">[]</span> <span class="c1">// Never recreate this function</span>
  <span class="p">);</span>
  
  <span class="k">return</span> <span class="o">&lt;</span><span class="nx">DataGrid</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">processedData</span><span class="p">}</span> <span class="nx">onItemClick</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClick</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="err">;
</span><span class="p">});</span>
</code></pre></div></div>

<p><strong>b) Debouncing &amp; Throttling:</strong></p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Custom hooks for performance</span>
<span class="kd">function</span> <span class="nx">useDebounce</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">value</span><span class="p">:</span> <span class="nx">T</span><span class="p">,</span> <span class="nx">delay</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="nx">T</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">debouncedValue</span><span class="p">,</span> <span class="nx">setDebouncedValue</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
  
  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">setDebouncedValue</span><span class="p">(</span><span class="nx">value</span><span class="p">),</span> <span class="nx">delay</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timer</span><span class="p">);</span>
  <span class="p">},</span> <span class="p">[</span><span class="nx">value</span><span class="p">,</span> <span class="nx">delay</span><span class="p">]);</span>
  
  <span class="k">return</span> <span class="nx">debouncedValue</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Usage in search</span>
<span class="kd">function</span> <span class="nx">Search</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">query</span><span class="p">,</span> <span class="nx">setQuery</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">debouncedQuery</span> <span class="o">=</span> <span class="nx">useDebounce</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
  
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useQuery</span><span class="p">({</span>
    <span class="na">queryKey</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">search</span><span class="dl">'</span><span class="p">,</span> <span class="nx">debouncedQuery</span><span class="p">],</span>
    <span class="na">queryFn</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">searchAPI</span><span class="p">(</span><span class="nx">debouncedQuery</span><span class="p">),</span>
    <span class="na">enabled</span><span class="p">:</span> <span class="nx">debouncedQuery</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">,</span>
  <span class="p">});</span>
  
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">input</span>
      <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">query</span><span class="p">}</span>
      <span class="nx">onChange</span><span class="o">=</span><span class="p">{(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">setQuery</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)}</span>
      <span class="nx">placeholder</span><span class="o">=</span><span class="dl">"</span><span class="s2">Search...</span><span class="dl">"</span>
    <span class="o">/&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="6-component-architecture-for-scale-️">6. <strong>Component Architecture for Scale</strong> 🏛️</h4>

<p><strong>The SOLID Components Pattern:</strong></p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 1. Single Responsibility</span>
<span class="c1">// ❌ Bad: Component does too much</span>
<span class="kd">function</span> <span class="nx">UserCard</span><span class="p">({</span> <span class="nx">user</span> <span class="p">})</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">isEditing</span><span class="p">,</span> <span class="nx">setIsEditing</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="na">mutate</span><span class="p">:</span> <span class="nx">updateUser</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useMutation</span><span class="p">(</span><span class="nx">updateUserAPI</span><span class="p">);</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="na">data</span><span class="p">:</span> <span class="nx">posts</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">useQuery</span><span class="p">([</span><span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span> <span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">],</span> <span class="nx">fetchUserPosts</span><span class="p">);</span>
  
  <span class="c1">// Handles display, editing, data fetching... too much!</span>
<span class="p">}</span>

<span class="c1">// ✅ Good: Separated concerns</span>
<span class="kd">function</span> <span class="nx">UserCard</span><span class="p">({</span> <span class="nx">user</span> <span class="p">})</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Card</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">UserInfo</span> <span class="nx">user</span><span class="o">=</span><span class="p">{</span><span class="nx">user</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">UserActions</span> <span class="nx">userId</span><span class="o">=</span><span class="p">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/Card</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">UserInfo</span><span class="p">({</span> <span class="nx">user</span> <span class="p">})</span> <span class="p">{</span>
  <span class="c1">// Only displays user info</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">UserActions</span><span class="p">({</span> <span class="nx">userId</span> <span class="p">})</span> <span class="p">{</span>
  <span class="c1">// Only handles actions</span>
<span class="p">}</span>

<span class="c1">// 2. Composition over Inheritance</span>
<span class="kd">function</span> <span class="nx">Card</span><span class="p">({</span> <span class="nx">children</span><span class="p">,</span> <span class="nx">variant</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">default</span><span class="dl">'</span> <span class="p">})</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="p">{</span><span class="nx">cn</span><span class="p">(</span><span class="dl">'</span><span class="s1">card</span><span class="dl">'</span><span class="p">,</span> <span class="s2">`card--</span><span class="p">${</span><span class="nx">variant</span><span class="p">}</span><span class="s2">`</span><span class="p">)}</span><span class="o">&gt;</span>
      <span class="p">{</span><span class="nx">children</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">ProfileCard</span><span class="p">({</span> <span class="nx">user</span> <span class="p">})</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">Card</span> <span class="nx">variant</span><span class="o">=</span><span class="dl">"</span><span class="s2">profile</span><span class="dl">"</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">CardHeader</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/CardHeader</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">CardBody</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Avatar</span> <span class="nx">src</span><span class="o">=</span><span class="p">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">avatar</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">Bio</span> <span class="nx">text</span><span class="o">=</span><span class="p">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">bio</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/CardBody</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">CardFooter</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">FollowButton</span> <span class="nx">userId</span><span class="o">=</span><span class="p">{</span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/CardFooter</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/Card</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="7-bundle-size-optimization-">7. <strong>Bundle Size Optimization</strong> 📦</h4>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// webpack.config.js - Production optimizations</span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">optimization</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">splitChunks</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">chunks</span><span class="p">:</span> <span class="dl">'</span><span class="s1">all</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">cacheGroups</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">vendor</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">test</span><span class="p">:</span> <span class="sr">/</span><span class="se">[\\/]</span><span class="sr">node_modules</span><span class="se">[\\/]</span><span class="sr">/</span><span class="p">,</span>
          <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">vendors</span><span class="dl">'</span><span class="p">,</span>
          <span class="na">priority</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="na">common</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">minChunks</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
          <span class="na">priority</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
          <span class="na">reuseExistingChunk</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="p">},</span>
      <span class="p">},</span>
    <span class="p">},</span>
    <span class="c1">// Tree shaking</span>
    <span class="na">usedExports</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="c1">// Minification</span>
    <span class="na">minimize</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">minimizer</span><span class="p">:</span> <span class="p">[</span>
      <span class="k">new</span> <span class="nx">TerserPlugin</span><span class="p">({</span>
        <span class="na">terserOptions</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">compress</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">drop_console</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="p">},</span>
        <span class="p">},</span>
      <span class="p">}),</span>
    <span class="p">],</span>
  <span class="p">},</span>
<span class="p">};</span>

<span class="c1">// Use dynamic imports for heavy libraries</span>
<span class="kd">const</span> <span class="nx">loadChart</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">Chart</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="k">import</span><span class="p">(</span><span class="dl">'</span><span class="s1">chart.js</span><span class="dl">'</span><span class="p">);</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nx">Chart</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">config</span><span class="p">);</span>
<span class="p">};</span>
</code></pre></div></div>

<h3 id="-scalability-metrics--monitoring">📊 Scalability Metrics &amp; Monitoring</h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Performance monitoring with Web Vitals</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">getCLS</span><span class="p">,</span> <span class="nx">getFID</span><span class="p">,</span> <span class="nx">getFCP</span><span class="p">,</span> <span class="nx">getLCP</span><span class="p">,</span> <span class="nx">getTTFB</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">web-vitals</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">sendToAnalytics</span><span class="p">(</span><span class="nx">metric</span><span class="p">:</span> <span class="nx">Metric</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Send to your analytics endpoint</span>
  <span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">/analytics</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">metric</span><span class="p">),</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="nx">getCLS</span><span class="p">(</span><span class="nx">sendToAnalytics</span><span class="p">);</span>  <span class="c1">// Cumulative Layout Shift</span>
<span class="nx">getFID</span><span class="p">(</span><span class="nx">sendToAnalytics</span><span class="p">);</span>  <span class="c1">// First Input Delay</span>
<span class="nx">getFCP</span><span class="p">(</span><span class="nx">sendToAnalytics</span><span class="p">);</span>  <span class="c1">// First Contentful Paint</span>
<span class="nx">getLCP</span><span class="p">(</span><span class="nx">sendToAnalytics</span><span class="p">);</span>  <span class="c1">// Largest Contentful Paint</span>
<span class="nx">getTTFB</span><span class="p">(</span><span class="nx">sendToAnalytics</span><span class="p">);</span> <span class="c1">// Time to First Byte</span>
</code></pre></div></div>

<hr />

<h2 id="testing-patterns--strategies">Testing Patterns &amp; Strategies</h2>

<h3 id="-the-testing-trophy-">🧪 The Testing Trophy 🏆</h3>

<blockquote>
  <p>“Write tests. Not too many. Mostly integration.” - Kent C. Dodds</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>       🏆 E2E Tests
      /   \
     /     \
    / Integration \
   /     Tests     \
  /_________________\
 /                   \
/    Unit Tests       \
/_____________________\
     Static Types
</code></pre></div></div>

<h3 id="1-unit-testing-patterns-">1. <strong>Unit Testing Patterns</strong> 🔬</h3>

<h4 id="the-aaa-pattern-arrange-act-assert">The AAA Pattern (Arrange, Act, Assert)</h4>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">UserService</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should create a user with valid data</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Arrange</span>
    <span class="kd">const</span> <span class="nx">mockRepository</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">save</span><span class="p">:</span> <span class="nx">jest</span><span class="p">.</span><span class="nx">fn</span><span class="p">().</span><span class="nx">mockResolvedValue</span><span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">123</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span> <span class="p">})</span>
    <span class="p">};</span>
    <span class="kd">const</span> <span class="nx">service</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">UserService</span><span class="p">(</span><span class="nx">mockRepository</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">userData</span> <span class="o">=</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">,</span> <span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">john@example.com</span><span class="dl">'</span> <span class="p">};</span>
    
    <span class="c1">// Act</span>
    <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">service</span><span class="p">.</span><span class="nx">createUser</span><span class="p">(</span><span class="nx">userData</span><span class="p">);</span>
    
    <span class="c1">// Assert</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">user</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">123</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">John</span><span class="dl">'</span> <span class="p">});</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">mockRepository</span><span class="p">.</span><span class="nx">save</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">(</span><span class="nx">userData</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">mockRepository</span><span class="p">.</span><span class="nx">save</span><span class="p">).</span><span class="nx">toHaveBeenCalledTimes</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<h4 id="testing-hooks">Testing Hooks</h4>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">renderHook</span><span class="p">,</span> <span class="nx">act</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@testing-library/react</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">useCounter</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should increment counter</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">result</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">renderHook</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">useCounter</span><span class="p">());</span>
    
    <span class="nx">expect</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">count</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    
    <span class="nx">act</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">result</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">increment</span><span class="p">();</span>
    <span class="p">});</span>
    
    <span class="nx">expect</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">current</span><span class="p">.</span><span class="nx">count</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="2-integration-testing-">2. <strong>Integration Testing</strong> 🔗</h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Testing React Components with React Testing Library</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">render</span><span class="p">,</span> <span class="nx">screen</span><span class="p">,</span> <span class="nx">waitFor</span><span class="p">,</span> <span class="nx">within</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@testing-library/react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">userEvent</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@testing-library/user-event</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">TodoList Integration</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should add and complete a todo</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">userEvent</span><span class="p">.</span><span class="nx">setup</span><span class="p">();</span>
    
    <span class="nx">render</span><span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">QueryClientProvider</span> <span class="nx">client</span><span class="o">=</span><span class="p">{</span><span class="nx">queryClient</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">TodoList</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="sr">/QueryClientProvider</span><span class="err">&gt;
</span>    <span class="p">);</span>
    
    <span class="c1">// Add a new todo</span>
    <span class="kd">const</span> <span class="nx">input</span> <span class="o">=</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">getByPlaceholderText</span><span class="p">(</span><span class="dl">'</span><span class="s1">What needs to be done?</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="kd">type</span><span class="p">(</span><span class="nx">input</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Write tests</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">keyboard</span><span class="p">(</span><span class="dl">'</span><span class="s1">{Enter}</span><span class="dl">'</span><span class="p">);</span>
    
    <span class="c1">// Verify todo appears</span>
    <span class="kd">const</span> <span class="nx">todoItem</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">findByText</span><span class="p">(</span><span class="dl">'</span><span class="s1">Write tests</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">todoItem</span><span class="p">).</span><span class="nx">toBeInTheDocument</span><span class="p">();</span>
    
    <span class="c1">// Complete the todo</span>
    <span class="kd">const</span> <span class="nx">checkbox</span> <span class="o">=</span> <span class="nx">within</span><span class="p">(</span><span class="nx">todoItem</span><span class="p">.</span><span class="nx">parentElement</span><span class="o">!</span><span class="p">).</span><span class="nx">getByRole</span><span class="p">(</span><span class="dl">'</span><span class="s1">checkbox</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">user</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="nx">checkbox</span><span class="p">);</span>
    
    <span class="c1">// Verify todo is marked complete</span>
    <span class="k">await</span> <span class="nx">waitFor</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">todoItem</span><span class="p">).</span><span class="nx">toHaveClass</span><span class="p">(</span><span class="dl">'</span><span class="s1">completed</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="3-e2e-testing-with-playwright-">3. <strong>E2E Testing with Playwright</strong> 🎭</h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">test</span><span class="p">,</span> <span class="nx">expect</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@playwright/test</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">test</span><span class="p">.</span><span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">User Journey</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">test</span><span class="p">(</span><span class="dl">'</span><span class="s1">complete signup flow</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">({</span> <span class="nx">page</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Navigate to signup</span>
    <span class="k">await</span> <span class="nx">page</span><span class="p">.</span><span class="nx">goto</span><span class="p">(</span><span class="dl">'</span><span class="s1">/signup</span><span class="dl">'</span><span class="p">);</span>
    
    <span class="c1">// Fill form</span>
    <span class="k">await</span> <span class="nx">page</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="dl">'</span><span class="s1">[name="email"]</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">test@example.com</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">page</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="dl">'</span><span class="s1">[name="password"]</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">SecurePass123!</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">page</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="dl">'</span><span class="s1">[name="confirmPassword"]</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">SecurePass123!</span><span class="dl">'</span><span class="p">);</span>
    
    <span class="c1">// Submit</span>
    <span class="k">await</span> <span class="nx">page</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="dl">'</span><span class="s1">button[type="submit"]</span><span class="dl">'</span><span class="p">);</span>
    
    <span class="c1">// Verify redirect to dashboard</span>
    <span class="k">await</span> <span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">).</span><span class="nx">toHaveURL</span><span class="p">(</span><span class="dl">'</span><span class="s1">/dashboard</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">locator</span><span class="p">(</span><span class="dl">'</span><span class="s1">h1</span><span class="dl">'</span><span class="p">)).</span><span class="nx">toContainText</span><span class="p">(</span><span class="dl">'</span><span class="s1">Welcome</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">});</span>
  
  <span class="nx">test</span><span class="p">(</span><span class="dl">'</span><span class="s1">handle API errors gracefully</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">({</span> <span class="nx">page</span><span class="p">,</span> <span class="nx">route</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Mock API failure</span>
    <span class="k">await</span> <span class="nx">route</span><span class="p">(</span><span class="dl">'</span><span class="s1">**/api/signup</span><span class="dl">'</span><span class="p">,</span> <span class="nx">route</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">route</span><span class="p">.</span><span class="nx">fulfill</span><span class="p">({</span>
        <span class="na">status</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
        <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">error</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Server error</span><span class="dl">'</span> <span class="p">})</span>
      <span class="p">});</span>
    <span class="p">});</span>
    
    <span class="k">await</span> <span class="nx">page</span><span class="p">.</span><span class="nx">goto</span><span class="p">(</span><span class="dl">'</span><span class="s1">/signup</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">page</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="dl">'</span><span class="s1">[name="email"]</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">test@example.com</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">await</span> <span class="nx">page</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="dl">'</span><span class="s1">button[type="submit"]</span><span class="dl">'</span><span class="p">);</span>
    
    <span class="c1">// Verify error message</span>
    <span class="k">await</span> <span class="nx">expect</span><span class="p">(</span><span class="nx">page</span><span class="p">.</span><span class="nx">locator</span><span class="p">(</span><span class="dl">'</span><span class="s1">.error-message</span><span class="dl">'</span><span class="p">)).</span><span class="nx">toContainText</span><span class="p">(</span><span class="dl">'</span><span class="s1">Server error</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="4-test-doubles--mocking-strategies-">4. <strong>Test Doubles &amp; Mocking Strategies</strong> 🎪</h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Different types of test doubles</span>
<span class="kd">class</span> <span class="nx">TestDoubles</span> <span class="p">{</span>
  <span class="c1">// 1. Stub - Returns predefined data</span>
  <span class="nx">createStub</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">getUser</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1</span><span class="dl">'</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Test User</span><span class="dl">'</span> <span class="p">})</span>
    <span class="p">};</span>
  <span class="p">}</span>
  
  <span class="c1">// 2. Mock - Verifies interactions</span>
  <span class="nx">createMock</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">mock</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">sendEmail</span><span class="p">:</span> <span class="nx">jest</span><span class="p">.</span><span class="nx">fn</span><span class="p">(),</span>
      <span class="na">calls</span><span class="p">:</span> <span class="p">[]</span> <span class="k">as</span> <span class="kr">string</span><span class="p">[]</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">mock</span><span class="p">;</span>
  <span class="p">}</span>
  
  <span class="c1">// 3. Spy - Records interactions</span>
  <span class="nx">createSpy</span><span class="p">(</span><span class="nx">realService</span><span class="p">:</span> <span class="nx">EmailService</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">spy</span> <span class="o">=</span> <span class="nx">jest</span><span class="p">.</span><span class="nx">spyOn</span><span class="p">(</span><span class="nx">realService</span><span class="p">,</span> <span class="dl">'</span><span class="s1">send</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">spy</span><span class="p">;</span>
  <span class="p">}</span>
  
  <span class="c1">// 4. Fake - Working implementation</span>
  <span class="nx">createFake</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">class</span> <span class="nx">FakeDatabase</span> <span class="p">{</span>
      <span class="k">private</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>
      
      <span class="k">async</span> <span class="nx">save</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">value</span><span class="p">:</span> <span class="kr">any</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
      <span class="p">}</span>
      
      <span class="k">async</span> <span class="nx">find</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">FakeDatabase</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="5-testing-async-code-">5. <strong>Testing Async Code</strong> ⏳</h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Testing promises and async operations</span>
<span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">Async Testing Patterns</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Pattern 1: async/await</span>
  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should fetch user data</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetchUser</span><span class="p">(</span><span class="dl">'</span><span class="s1">123</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">name</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="dl">'</span><span class="s1">John</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">});</span>
  
  <span class="c1">// Pattern 2: Testing rejections</span>
  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should handle errors</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">expect</span><span class="p">(</span><span class="nx">fetchUser</span><span class="p">(</span><span class="dl">'</span><span class="s1">invalid</span><span class="dl">'</span><span class="p">)).</span><span class="nx">rejects</span><span class="p">.</span><span class="nx">toThrow</span><span class="p">(</span><span class="dl">'</span><span class="s1">User not found</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">});</span>
  
  <span class="c1">// Pattern 3: Testing with fake timers</span>
  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should debounce search</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">jest</span><span class="p">.</span><span class="nx">useFakeTimers</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">search</span> <span class="o">=</span> <span class="nx">jest</span><span class="p">.</span><span class="nx">fn</span><span class="p">();</span>
    <span class="kd">const</span> <span class="nx">debouncedSearch</span> <span class="o">=</span> <span class="nx">debounce</span><span class="p">(</span><span class="nx">search</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
    
    <span class="nx">debouncedSearch</span><span class="p">(</span><span class="dl">'</span><span class="s1">query</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">debouncedSearch</span><span class="p">(</span><span class="dl">'</span><span class="s1">query2</span><span class="dl">'</span><span class="p">);</span>
    
    <span class="nx">expect</span><span class="p">(</span><span class="nx">search</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">toHaveBeenCalled</span><span class="p">();</span>
    
    <span class="nx">jest</span><span class="p">.</span><span class="nx">advanceTimersByTime</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span>
    
    <span class="nx">expect</span><span class="p">(</span><span class="nx">search</span><span class="p">).</span><span class="nx">toHaveBeenCalledTimes</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">search</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">(</span><span class="dl">'</span><span class="s1">query2</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="6-testing-best-practices-">6. <strong>Testing Best Practices</strong> 📝</h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 1. Use descriptive test names</span>
<span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">ShoppingCart</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// ❌ Bad</span>
  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">works</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{});</span>
  
  <span class="c1">// ✅ Good</span>
  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should calculate total price including tax when items are added</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{});</span>
<span class="p">});</span>

<span class="c1">// 2. Keep tests independent</span>
<span class="nx">beforeEach</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Reset state before each test</span>
  <span class="nx">jest</span><span class="p">.</span><span class="nx">clearAllMocks</span><span class="p">();</span>
  <span class="nx">localStorage</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
<span class="p">});</span>

<span class="c1">// 3. Test behavior, not implementation</span>
<span class="c1">// ❌ Bad: Testing implementation details</span>
<span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should call setState</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">setState</span> <span class="o">=</span> <span class="nx">jest</span><span class="p">.</span><span class="nx">fn</span><span class="p">();</span>
  <span class="c1">// ...</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">setState</span><span class="p">).</span><span class="nx">toHaveBeenCalled</span><span class="p">();</span>
<span class="p">});</span>

<span class="c1">// ✅ Good: Testing behavior</span>
<span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should display error message when login fails</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">LoginForm</span> <span class="o">/&gt;</span><span class="p">);</span>
  
  <span class="nx">fireEvent</span><span class="p">.</span><span class="nx">submit</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByRole</span><span class="p">(</span><span class="dl">'</span><span class="s1">form</span><span class="dl">'</span><span class="p">));</span>
  
  <span class="k">await</span> <span class="nx">waitFor</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">screen</span><span class="p">.</span><span class="nx">getByText</span><span class="p">(</span><span class="dl">'</span><span class="s1">Invalid credentials</span><span class="dl">'</span><span class="p">)).</span><span class="nx">toBeInTheDocument</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="c1">// 4. Use data-testid for reliable element selection</span>
<span class="o">&lt;</span><span class="nx">button</span> <span class="nx">data</span><span class="o">-</span><span class="nx">testid</span><span class="o">=</span><span class="dl">"</span><span class="s2">submit-button</span><span class="dl">"</span><span class="o">&gt;</span><span class="nx">Submit</span><span class="o">&lt;</span><span class="sr">/button</span><span class="err">&gt;
</span>
<span class="kd">const</span> <span class="nx">button</span> <span class="o">=</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">getByTestId</span><span class="p">(</span><span class="dl">'</span><span class="s1">submit-button</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<hr />

<h2 id="clean-code-principles">Clean Code Principles</h2>

<h3 id="-the-art-of-writing-beautiful-code">✨ The Art of Writing Beautiful Code</h3>

<blockquote>
  <p>“Clean code reads like well-written prose.” - Robert C. Martin</p>
</blockquote>

<h3 id="1-meaningful-names-">1. <strong>Meaningful Names</strong> 📛</h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ❌ Bad: Cryptic names</span>
<span class="kd">const</span> <span class="nx">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">u</span> <span class="o">=</span> <span class="nx">users</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">x</span> <span class="o">=&gt;</span> <span class="nx">x</span><span class="p">.</span><span class="nx">a</span> <span class="o">&gt;</span> <span class="mi">18</span><span class="p">);</span>

<span class="c1">// ✅ Good: Self-documenting names</span>
<span class="kd">const</span> <span class="nx">currentDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">adultUsers</span> <span class="o">=</span> <span class="nx">users</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">user</span> <span class="o">=&gt;</span> <span class="nx">user</span><span class="p">.</span><span class="nx">age</span> <span class="o">&gt;</span> <span class="mi">18</span><span class="p">);</span>

<span class="c1">// ❌ Bad: Misleading names</span>
<span class="kd">const</span> <span class="nx">userList</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span> <span class="c1">// It's a Map, not a List!</span>

<span class="c1">// ✅ Good: Accurate names</span>
<span class="kd">const</span> <span class="nx">userMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">usersByEmail</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>

<span class="c1">// Use searchable names</span>
<span class="kd">const</span> <span class="nx">SECONDS_IN_DAY</span> <span class="o">=</span> <span class="mi">86400</span><span class="p">;</span> <span class="c1">// ✅ Good</span>
<span class="kd">const</span> <span class="mi">86400</span> <span class="o">=</span> <span class="mi">86400</span><span class="p">;</span> <span class="c1">// ❌ Bad: What is this number?</span>
</code></pre></div></div>

<h3 id="2-functions-should-do-one-thing-">2. <strong>Functions Should Do One Thing</strong> 🎯</h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ❌ Bad: Function does multiple things</span>
<span class="kd">function</span> <span class="nx">processUserData</span><span class="p">(</span><span class="nx">users</span><span class="p">:</span> <span class="nx">User</span><span class="p">[])</span> <span class="p">{</span>
  <span class="c1">// Validate users</span>
  <span class="nx">users</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">user</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">.</span><span class="nx">email</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Invalid email</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">});</span>
  
  <span class="c1">// Transform users</span>
  <span class="kd">const</span> <span class="nx">transformed</span> <span class="o">=</span> <span class="nx">users</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">user</span> <span class="o">=&gt;</span> <span class="p">({</span>
    <span class="p">...</span><span class="nx">user</span><span class="p">,</span>
    <span class="na">fullName</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span>
  <span class="p">}));</span>
  
  <span class="c1">// Save to database</span>
  <span class="nx">database</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">transformed</span><span class="p">);</span>
  
  <span class="c1">// Send emails</span>
  <span class="nx">transformed</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">user</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">emailService</span><span class="p">.</span><span class="nx">sendWelcome</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">email</span><span class="p">);</span>
  <span class="p">});</span>
  
  <span class="k">return</span> <span class="nx">transformed</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// ✅ Good: Each function has single responsibility</span>
<span class="kd">function</span> <span class="nx">validateUsers</span><span class="p">(</span><span class="nx">users</span><span class="p">:</span> <span class="nx">User</span><span class="p">[]):</span> <span class="k">void</span> <span class="p">{</span>
  <span class="nx">users</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">user</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">user</span><span class="p">.</span><span class="nx">email</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Invalid email</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">transformUsers</span><span class="p">(</span><span class="nx">users</span><span class="p">:</span> <span class="nx">User</span><span class="p">[]):</span> <span class="nx">TransformedUser</span><span class="p">[]</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">users</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">user</span> <span class="o">=&gt;</span> <span class="p">({</span>
    <span class="p">...</span><span class="nx">user</span><span class="p">,</span>
    <span class="na">fullName</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span><span class="s2"> </span><span class="p">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">lastName</span><span class="p">}</span><span class="s2">`</span>
  <span class="p">}));</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">saveUsers</span><span class="p">(</span><span class="nx">users</span><span class="p">:</span> <span class="nx">TransformedUser</span><span class="p">[]):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">database</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">users</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">sendWelcomeEmails</span><span class="p">(</span><span class="nx">users</span><span class="p">:</span> <span class="nx">TransformedUser</span><span class="p">[]):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span>
    <span class="nx">users</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">user</span> <span class="o">=&gt;</span> <span class="nx">emailService</span><span class="p">.</span><span class="nx">sendWelcome</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">email</span><span class="p">))</span>
  <span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Orchestrate</span>
<span class="k">async</span> <span class="kd">function</span> <span class="nx">processUserData</span><span class="p">(</span><span class="nx">users</span><span class="p">:</span> <span class="nx">User</span><span class="p">[])</span> <span class="p">{</span>
  <span class="nx">validateUsers</span><span class="p">(</span><span class="nx">users</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">transformed</span> <span class="o">=</span> <span class="nx">transformUsers</span><span class="p">(</span><span class="nx">users</span><span class="p">);</span>
  <span class="k">await</span> <span class="nx">saveUsers</span><span class="p">(</span><span class="nx">transformed</span><span class="p">);</span>
  <span class="k">await</span> <span class="nx">sendWelcomeEmails</span><span class="p">(</span><span class="nx">transformed</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">transformed</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="3-the-boy-scout-rule-️">3. <strong>The Boy Scout Rule</strong> 🏕️</h3>

<blockquote>
  <p>“Leave the code cleaner than you found it.”</p>
</blockquote>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Before: Found this in the codebase</span>
<span class="kd">function</span> <span class="nx">calc</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">t</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">add</span><span class="dl">'</span><span class="p">)</span> <span class="k">return</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">t</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">sub</span><span class="dl">'</span><span class="p">)</span> <span class="k">return</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">y</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">t</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">mul</span><span class="dl">'</span><span class="p">)</span> <span class="k">return</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">y</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">t</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">div</span><span class="dl">'</span><span class="p">)</span> <span class="k">return</span> <span class="nx">x</span> <span class="o">/</span> <span class="nx">y</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// After: Refactored while working on feature</span>
<span class="kd">type</span> <span class="nx">Operation</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">add</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">subtract</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">multiply</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">divide</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">calculate</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">operation</span><span class="p">:</span> <span class="nx">Operation</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">operations</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">add</span><span class="p">:</span> <span class="p">(</span><span class="na">x</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span><span class="p">,</span>
    <span class="na">subtract</span><span class="p">:</span> <span class="p">(</span><span class="na">x</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">y</span><span class="p">,</span>
    <span class="na">multiply</span><span class="p">:</span> <span class="p">(</span><span class="na">x</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">y</span><span class="p">,</span>
    <span class="na">divide</span><span class="p">:</span> <span class="p">(</span><span class="na">x</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="na">y</span><span class="p">:</span> <span class="kr">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">y</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Division by zero</span><span class="dl">'</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">x</span> <span class="o">/</span> <span class="nx">y</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
  
  <span class="kd">const</span> <span class="nx">operationFn</span> <span class="o">=</span> <span class="nx">operations</span><span class="p">[</span><span class="nx">operation</span><span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">operationFn</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">`Unknown operation: </span><span class="p">${</span><span class="nx">operation</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">}</span>
  
  <span class="k">return</span> <span class="nx">operationFn</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="4-dry-dont-repeat-yourself-">4. <strong>DRY (Don’t Repeat Yourself)</strong> 🔁</h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ❌ Bad: Duplicated logic</span>
<span class="kd">function</span> <span class="nx">calculateOrderTotal</span><span class="p">(</span><span class="nx">order</span><span class="p">:</span> <span class="nx">Order</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">order</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">total</span> <span class="o">+=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">price</span> <span class="o">*</span> <span class="nx">item</span><span class="p">.</span><span class="nx">quantity</span><span class="p">;</span>
  <span class="p">});</span>
  <span class="kd">const</span> <span class="nx">tax</span> <span class="o">=</span> <span class="nx">total</span> <span class="o">*</span> <span class="mf">0.08</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">shipping</span> <span class="o">=</span> <span class="nx">total</span> <span class="o">&gt;</span> <span class="mi">100</span> <span class="p">?</span> <span class="mi">0</span> <span class="p">:</span> <span class="mi">10</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">total</span> <span class="o">+</span> <span class="nx">tax</span> <span class="o">+</span> <span class="nx">shipping</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">calculateCartTotal</span><span class="p">(</span><span class="nx">cart</span><span class="p">:</span> <span class="nx">Cart</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">cart</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">total</span> <span class="o">+=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">price</span> <span class="o">*</span> <span class="nx">item</span><span class="p">.</span><span class="nx">quantity</span><span class="p">;</span>
  <span class="p">});</span>
  <span class="kd">const</span> <span class="nx">tax</span> <span class="o">=</span> <span class="nx">total</span> <span class="o">*</span> <span class="mf">0.08</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">shipping</span> <span class="o">=</span> <span class="nx">total</span> <span class="o">&gt;</span> <span class="mi">100</span> <span class="p">?</span> <span class="mi">0</span> <span class="p">:</span> <span class="mi">10</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">total</span> <span class="o">+</span> <span class="nx">tax</span> <span class="o">+</span> <span class="nx">shipping</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// ✅ Good: Extracted common logic</span>
<span class="kd">function</span> <span class="nx">calculateSubtotal</span><span class="p">(</span><span class="nx">items</span><span class="p">:</span> <span class="nx">LineItem</span><span class="p">[]):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">items</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">sum</span><span class="p">,</span> <span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">sum</span> <span class="o">+</span> <span class="nx">item</span><span class="p">.</span><span class="nx">price</span> <span class="o">*</span> <span class="nx">item</span><span class="p">.</span><span class="nx">quantity</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">calculateTax</span><span class="p">(</span><span class="nx">subtotal</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">rate</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mf">0.08</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">subtotal</span> <span class="o">*</span> <span class="nx">rate</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">calculateShipping</span><span class="p">(</span><span class="nx">subtotal</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">threshold</span><span class="p">:</span> <span class="kr">number</span> <span class="o">=</span> <span class="mi">100</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">subtotal</span> <span class="o">&gt;</span> <span class="nx">threshold</span> <span class="p">?</span> <span class="mi">0</span> <span class="p">:</span> <span class="mi">10</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">calculateTotal</span><span class="p">(</span><span class="nx">items</span><span class="p">:</span> <span class="nx">LineItem</span><span class="p">[]):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">subtotal</span> <span class="o">=</span> <span class="nx">calculateSubtotal</span><span class="p">(</span><span class="nx">items</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">tax</span> <span class="o">=</span> <span class="nx">calculateTax</span><span class="p">(</span><span class="nx">subtotal</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">shipping</span> <span class="o">=</span> <span class="nx">calculateShipping</span><span class="p">(</span><span class="nx">subtotal</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">subtotal</span> <span class="o">+</span> <span class="nx">tax</span> <span class="o">+</span> <span class="nx">shipping</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="5-comments--documentation-">5. <strong>Comments &amp; Documentation</strong> 📝</h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ❌ Bad: Obvious comments</span>
<span class="c1">// Increment i by 1</span>
<span class="nx">i</span><span class="o">++</span><span class="p">;</span>

<span class="c1">// Check if user is admin</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">role</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">admin</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">}</span>

<span class="c1">// ✅ Good: Explain WHY, not WHAT</span>
<span class="c1">// We need to increment by 2 because the API returns paginated results</span>
<span class="c1">// in pairs for legacy compatibility reasons</span>
<span class="nx">i</span> <span class="o">+=</span> <span class="mi">2</span><span class="p">;</span>

<span class="c1">// Admin users bypass rate limiting to allow bulk operations</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">role</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">admin</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">rateLimiter</span><span class="p">.</span><span class="nx">bypass</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// ✅ Good: Complex business logic documentation</span>
<span class="cm">/**
 * Calculates the customer's loyalty discount based on their purchase history.
 * 
 * Discount tiers:
 * - Bronze (100-499 points): 5% discount
 * - Silver (500-999 points): 10% discount
 * - Gold (1000+ points): 15% discount
 * 
 * Points are calculated as: $1 spent = 1 point
 * Points expire after 365 days
 * 
 * @param customer - The customer object with purchase history
 * @returns The discount percentage to apply
 */</span>
<span class="kd">function</span> <span class="nx">calculateLoyaltyDiscount</span><span class="p">(</span><span class="nx">customer</span><span class="p">:</span> <span class="nx">Customer</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">points</span> <span class="o">=</span> <span class="nx">calculateActivePoints</span><span class="p">(</span><span class="nx">customer</span><span class="p">);</span>
  
  <span class="k">if</span> <span class="p">(</span><span class="nx">points</span> <span class="o">&gt;=</span> <span class="mi">1000</span><span class="p">)</span> <span class="k">return</span> <span class="mf">0.15</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">points</span> <span class="o">&gt;=</span> <span class="mi">500</span><span class="p">)</span> <span class="k">return</span> <span class="mf">0.10</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">points</span> <span class="o">&gt;=</span> <span class="mi">100</span><span class="p">)</span> <span class="k">return</span> <span class="mf">0.05</span><span class="p">;</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="6-error-handling-excellence-️">6. <strong>Error Handling Excellence</strong> ⚠️</h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ❌ Bad: Silent failures</span>
<span class="k">try</span> <span class="p">{</span>
  <span class="nx">processPayment</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Swallowing error</span>
<span class="p">}</span>

<span class="c1">// ❌ Bad: Generic error messages</span>
<span class="k">try</span> <span class="p">{</span>
  <span class="nx">processPayment</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Error occurred</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// ✅ Good: Specific, actionable errors</span>
<span class="kd">class</span> <span class="nx">PaymentError</span> <span class="kd">extends</span> <span class="nb">Error</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span>
    <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
    <span class="k">public</span> <span class="nx">code</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
    <span class="k">public</span> <span class="nx">retryable</span><span class="p">:</span> <span class="nx">boolean</span><span class="p">,</span>
    <span class="k">public</span> <span class="nx">details</span><span class="p">?:</span> <span class="kr">any</span>
  <span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">PaymentError</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="k">await</span> <span class="nx">processPayment</span><span class="p">(</span><span class="nx">payment</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span> <span class="k">instanceof</span> <span class="nx">PaymentError</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">retryable</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">await</span> <span class="nx">retryPayment</span><span class="p">(</span><span class="nx">payment</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">await</span> <span class="nx">notifyUser</span><span class="p">({</span>
        <span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Payment Failed</span><span class="dl">'</span><span class="p">,</span>
        <span class="na">message</span><span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>
        <span class="na">action</span><span class="p">:</span> <span class="nx">getActionForErrorCode</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">code</span><span class="p">)</span>
      <span class="p">});</span>
    <span class="p">}</span>
    
    <span class="c1">// Log for monitoring</span>
    <span class="nx">logger</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Payment processing failed</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">error</span><span class="p">,</span>
      <span class="nx">payment</span><span class="p">,</span>
      <span class="na">userId</span><span class="p">:</span> <span class="nx">payment</span><span class="p">.</span><span class="nx">userId</span><span class="p">,</span>
      <span class="na">timestamp</span><span class="p">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">toISOString</span><span class="p">()</span>
    <span class="p">});</span>
  <span class="p">}</span>
  
  <span class="k">throw</span> <span class="nx">error</span><span class="p">;</span> <span class="c1">// Re-throw for upstream handling</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="7-code-formatting--style-">7. <strong>Code Formatting &amp; Style</strong> 🎨</h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Use consistent formatting (Prettier config)</span>
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">semi</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">singleQuote</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">tabWidth</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">trailingComma</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">es5</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">printWidth</span><span class="dl">"</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">arrowParens</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">always</span><span class="dl">"</span>
<span class="p">}</span>

<span class="c1">// ✅ Good: Consistent structure</span>
<span class="kd">class</span> <span class="nx">UserService</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="nx">repository</span><span class="p">:</span> <span class="nx">UserRepository</span><span class="p">,</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="nx">emailService</span><span class="p">:</span> <span class="nx">EmailService</span><span class="p">,</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="nx">logger</span><span class="p">:</span> <span class="nx">Logger</span>
  <span class="p">)</span> <span class="p">{}</span>
  
  <span class="k">async</span> <span class="nx">createUser</span><span class="p">(</span><span class="nx">data</span><span class="p">:</span> <span class="nx">CreateUserDto</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="dl">'</span><span class="s1">Creating user</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">email</span><span class="p">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">email</span> <span class="p">});</span>
    
    <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">repository</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">emailService</span><span class="p">.</span><span class="nx">sendWelcomeEmail</span><span class="p">(</span><span class="nx">user</span><span class="p">);</span>
    
    <span class="k">this</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="dl">'</span><span class="s1">User created successfully</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">userId</span><span class="p">:</span> <span class="nx">user</span><span class="p">.</span><span class="nx">id</span> <span class="p">});</span>
    <span class="k">return</span> <span class="nx">user</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="8-refactoring-patterns-">8. <strong>Refactoring Patterns</strong> 🔨</h3>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Extract Method</span>
<span class="c1">// Before</span>
<span class="kd">function</span> <span class="nx">printBill</span><span class="p">(</span><span class="nx">order</span><span class="p">:</span> <span class="nx">Order</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Order Details:</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">order</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">: $</span><span class="p">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">price</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="kd">const</span> <span class="nx">subtotal</span> <span class="o">=</span> <span class="nx">order</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">sum</span><span class="p">,</span> <span class="nx">item</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">sum</span> <span class="o">+</span> <span class="nx">item</span><span class="p">.</span><span class="nx">price</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">tax</span> <span class="o">=</span> <span class="nx">subtotal</span> <span class="o">*</span> <span class="mf">0.08</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">total</span> <span class="o">=</span> <span class="nx">subtotal</span> <span class="o">+</span> <span class="nx">tax</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Subtotal: $</span><span class="p">${</span><span class="nx">subtotal</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Tax: $</span><span class="p">${</span><span class="nx">tax</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Total: $</span><span class="p">${</span><span class="nx">total</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// After</span>
<span class="kd">function</span> <span class="nx">printBill</span><span class="p">(</span><span class="nx">order</span><span class="p">:</span> <span class="nx">Order</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">printOrderItems</span><span class="p">(</span><span class="nx">order</span><span class="p">.</span><span class="nx">items</span><span class="p">);</span>
  <span class="nx">printOrderTotals</span><span class="p">(</span><span class="nx">order</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">printOrderItems</span><span class="p">(</span><span class="nx">items</span><span class="p">:</span> <span class="nx">OrderItem</span><span class="p">[])</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Order Details:</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">items</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">item</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">: $</span><span class="p">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">price</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">printOrderTotals</span><span class="p">(</span><span class="nx">order</span><span class="p">:</span> <span class="nx">Order</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">totals</span> <span class="o">=</span> <span class="nx">calculateOrderTotals</span><span class="p">(</span><span class="nx">order</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Subtotal: $</span><span class="p">${</span><span class="nx">totals</span><span class="p">.</span><span class="nx">subtotal</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Tax: $</span><span class="p">${</span><span class="nx">totals</span><span class="p">.</span><span class="nx">tax</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Total: $</span><span class="p">${</span><span class="nx">totals</span><span class="p">.</span><span class="nx">total</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Replace Conditional with Polymorphism</span>
<span class="c1">// Before</span>
<span class="kd">function</span> <span class="nx">calculateDiscount</span><span class="p">(</span><span class="nx">customer</span><span class="p">:</span> <span class="nx">Customer</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">customer</span><span class="p">.</span><span class="kd">type</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">regular</span><span class="dl">'</span><span class="p">)</span> <span class="k">return</span> <span class="mf">0.05</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">customer</span><span class="p">.</span><span class="kd">type</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">premium</span><span class="dl">'</span><span class="p">)</span> <span class="k">return</span> <span class="mf">0.10</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">customer</span><span class="p">.</span><span class="kd">type</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">vip</span><span class="dl">'</span><span class="p">)</span> <span class="k">return</span> <span class="mf">0.20</span><span class="p">;</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// After</span>
<span class="kr">interface</span> <span class="nx">DiscountStrategy</span> <span class="p">{</span>
  <span class="nx">calculate</span><span class="p">(</span><span class="nx">amount</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">RegularDiscount</span> <span class="k">implements</span> <span class="nx">DiscountStrategy</span> <span class="p">{</span>
  <span class="nx">calculate</span><span class="p">(</span><span class="nx">amount</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">amount</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">PremiumDiscount</span> <span class="k">implements</span> <span class="nx">DiscountStrategy</span> <span class="p">{</span>
  <span class="nx">calculate</span><span class="p">(</span><span class="nx">amount</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">amount</span> <span class="o">*</span> <span class="mf">0.10</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">VIPDiscount</span> <span class="k">implements</span> <span class="nx">DiscountStrategy</span> <span class="p">{</span>
  <span class="nx">calculate</span><span class="p">(</span><span class="nx">amount</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">amount</span> <span class="o">*</span> <span class="mf">0.20</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h2 id="interactive-examples">Interactive Examples</h2>

<h3 id="-try-it-yourself">🎮 Try It Yourself!</h3>

<h4 id="challenge-1-implement-a-caching-decorator">Challenge 1: Implement a Caching Decorator</h4>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// TODO: Implement a decorator that caches function results</span>
<span class="kd">function</span> <span class="nx">memoize</span><span class="p">(</span><span class="nx">target</span><span class="p">:</span> <span class="kr">any</span><span class="p">,</span> <span class="nx">propertyName</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">descriptor</span><span class="p">:</span> <span class="nx">PropertyDescriptor</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Your implementation here</span>
  <span class="c1">// Hint: Store results in a Map with arguments as key</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">MathService</span> <span class="p">{</span>
  <span class="p">@</span><span class="nd">memoize</span>
  <span class="nx">fibonacci</span><span class="p">(</span><span class="nx">n</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="nx">n</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">fibonacci</span><span class="p">(</span><span class="nx">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">fibonacci</span><span class="p">(</span><span class="nx">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Test your implementation</span>
<span class="kd">const</span> <span class="nx">math</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MathService</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">time</span><span class="p">(</span><span class="dl">'</span><span class="s1">First call</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">math</span><span class="p">.</span><span class="nx">fibonacci</span><span class="p">(</span><span class="mi">40</span><span class="p">);</span> <span class="c1">// Should be slow</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">timeEnd</span><span class="p">(</span><span class="dl">'</span><span class="s1">First call</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">time</span><span class="p">(</span><span class="dl">'</span><span class="s1">Second call</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">math</span><span class="p">.</span><span class="nx">fibonacci</span><span class="p">(</span><span class="mi">40</span><span class="p">);</span> <span class="c1">// Should be instant!</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">timeEnd</span><span class="p">(</span><span class="dl">'</span><span class="s1">Second call</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<h4 id="challenge-2-build-a-mini-state-management-library">Challenge 2: Build a Mini State Management Library</h4>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// TODO: Create a simple state management solution</span>
<span class="kd">class</span> <span class="nx">Store</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">private</span> <span class="na">state</span><span class="p">:</span> <span class="nx">T</span><span class="p">;</span>
  <span class="k">private</span> <span class="na">listeners</span><span class="p">:</span> <span class="nb">Set</span><span class="o">&lt;</span><span class="p">(</span><span class="na">state</span><span class="p">:</span> <span class="nx">T</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Set</span><span class="p">();</span>
  
  <span class="kd">constructor</span><span class="p">(</span><span class="na">initialState</span><span class="p">:</span> <span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Your implementation</span>
  <span class="p">}</span>
  
  <span class="nx">getState</span><span class="p">():</span> <span class="nx">T</span> <span class="p">{</span>
    <span class="c1">// Your implementation</span>
  <span class="p">}</span>
  
  <span class="nx">setState</span><span class="p">(</span><span class="na">updater</span><span class="p">:</span> <span class="p">(</span><span class="na">state</span><span class="p">:</span> <span class="nx">T</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">T</span><span class="p">):</span> <span class="k">void</span> <span class="p">{</span>
    <span class="c1">// Your implementation</span>
    <span class="c1">// Should notify all listeners</span>
  <span class="p">}</span>
  
  <span class="nx">subscribe</span><span class="p">(</span><span class="na">listener</span><span class="p">:</span> <span class="p">(</span><span class="na">state</span><span class="p">:</span> <span class="nx">T</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">):</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span> <span class="p">{</span>
    <span class="c1">// Your implementation</span>
    <span class="c1">// Should return unsubscribe function</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Test your store</span>
<span class="kd">const</span> <span class="nx">counterStore</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Store</span><span class="p">({</span> <span class="na">count</span><span class="p">:</span> <span class="mi">0</span> <span class="p">});</span>

<span class="kd">const</span> <span class="nx">unsubscribe</span> <span class="o">=</span> <span class="nx">counterStore</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">state</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Count updated:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">state</span><span class="p">.</span><span class="nx">count</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">counterStore</span><span class="p">.</span><span class="nx">setState</span><span class="p">(</span><span class="nx">state</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="na">count</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">}));</span>
</code></pre></div></div>

<hr />

<h2 id="common-pitfalls">Common Pitfalls</h2>

<h3 id="-mistakes-to-avoid-at-all-costs">🚨 Mistakes to Avoid at All Costs!</h3>

<h4 id="1-the-god-object-anti-pattern-">1. <strong>The God Object Anti-Pattern</strong> 👹</h4>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ❌ Bad: One class that does everything</span>
<span class="kd">class</span> <span class="nx">GodManager</span> <span class="p">{</span>
  <span class="nl">users</span><span class="p">:</span> <span class="nx">User</span><span class="p">[];</span>
  <span class="nl">products</span><span class="p">:</span> <span class="nx">Product</span><span class="p">[];</span>
  <span class="nl">orders</span><span class="p">:</span> <span class="nx">Order</span><span class="p">[];</span>
  <span class="nl">database</span><span class="p">:</span> <span class="nx">Database</span><span class="p">;</span>
  <span class="nl">emailService</span><span class="p">:</span> <span class="nx">EmailService</span><span class="p">;</span>
  <span class="nl">paymentGateway</span><span class="p">:</span> <span class="nx">PaymentGateway</span><span class="p">;</span>
  <span class="nl">analytics</span><span class="p">:</span> <span class="nx">Analytics</span><span class="p">;</span>
  <span class="nl">cache</span><span class="p">:</span> <span class="nx">Cache</span><span class="p">;</span>
  <span class="nl">logger</span><span class="p">:</span> <span class="nx">Logger</span><span class="p">;</span>
  
  <span class="nx">createUser</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="nx">deleteUser</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="nx">updateUser</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="nx">createProduct</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="nx">processPayment</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="nx">sendEmail</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="nx">generateReport</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="c1">// ... 100 more methods</span>
<span class="p">}</span>

<span class="c1">// ✅ Good: Separated concerns</span>
<span class="kd">class</span> <span class="nx">UserService</span> <span class="p">{</span> <span class="cm">/* user-related logic */</span> <span class="p">}</span>
<span class="kd">class</span> <span class="nx">ProductService</span> <span class="p">{</span> <span class="cm">/* product-related logic */</span> <span class="p">}</span>
<span class="kd">class</span> <span class="nx">PaymentService</span> <span class="p">{</span> <span class="cm">/* payment-related logic */</span> <span class="p">}</span>
</code></pre></div></div>

<h4 id="2-callback-hell-">2. <strong>Callback Hell</strong> 🔥</h4>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ❌ Bad: Pyramid of doom</span>
<span class="nx">getUser</span><span class="p">(</span><span class="nx">userId</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">user</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="nx">handleError</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="k">else</span> <span class="p">{</span>
    <span class="nx">getOrders</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">orders</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="nx">handleError</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="nx">getProducts</span><span class="p">(</span><span class="nx">orders</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">products</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="nx">handleError</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
          <span class="k">else</span> <span class="p">{</span>
            <span class="c1">// ... more nesting</span>
          <span class="p">}</span>
        <span class="p">});</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// ✅ Good: Async/await</span>
<span class="k">try</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getUser</span><span class="p">(</span><span class="nx">userId</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">orders</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getOrders</span><span class="p">(</span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">products</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getProducts</span><span class="p">(</span><span class="nx">orders</span><span class="p">);</span>
  <span class="c1">// Clean, linear flow</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">handleError</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<h2 id="quiz-yourself">Quiz Yourself</h2>

<h3 id="-test-your-knowledge">🎓 Test Your Knowledge!</h3>

<p>Test your understanding with our interactive quiz system. The quiz covers:</p>

<ol>
  <li><strong>Design Patterns</strong> (25 questions)</li>
  <li><strong>Architecture</strong> (20 questions)</li>
  <li><strong>Frontend Scalability</strong> (15 questions)</li>
  <li><strong>Testing Strategies</strong> (20 questions)</li>
  <li><strong>Clean Code</strong> (20 questions)</li>
</ol>

<p><a href="#">Access the quiz system →</a> <em>(Quiz implementation in separate file)</em></p>

<hr />

<h2 id="building-with-these-patterns">Building with These Patterns</h2>

<h3 id="step-by-step-creating-a-new-service">Step-by-Step: Creating a New Service</h3>

<p>Let’s create a new “Notification Service” using these patterns:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 1. Define the Interface (Contract)</span>
<span class="kr">interface</span> <span class="nx">INotificationService</span> <span class="p">{</span>
  <span class="nx">send</span><span class="p">(</span><span class="nx">notification</span><span class="p">:</span> <span class="nx">Notification</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="nx">getHistory</span><span class="p">(</span><span class="nx">userId</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Notification</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 2. Define Domain Types</span>
<span class="kr">interface</span> <span class="nx">Notification</span> <span class="p">{</span>
  <span class="nl">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">userId</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">email</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">push</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">in-app</span><span class="dl">'</span><span class="p">;</span>
  <span class="nl">title</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
  <span class="nl">metadata</span><span class="p">?:</span> <span class="nb">Record</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">,</span> <span class="kr">any</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="nl">createdAt</span><span class="p">:</span> <span class="nb">Date</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 3. Create Repository Pattern</span>
<span class="kr">interface</span> <span class="nx">INotificationRepository</span> <span class="p">{</span>
  <span class="nx">save</span><span class="p">(</span><span class="nx">notification</span><span class="p">:</span> <span class="nx">Notification</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="nx">findByUser</span><span class="p">(</span><span class="nx">userId</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Notification</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">PostgresNotificationRepository</span> <span class="k">implements</span> <span class="nx">INotificationRepository</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">pool</span><span class="p">:</span> <span class="nx">Pool</span><span class="p">)</span> <span class="p">{}</span> <span class="c1">// DI: Database injected</span>
  
  <span class="k">async</span> <span class="nx">save</span><span class="p">(</span><span class="nx">notification</span><span class="p">:</span> <span class="nx">Notification</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">pool</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span>
      <span class="dl">'</span><span class="s1">INSERT INTO notifications (id, user_id, type, title, message, metadata, created_at) VALUES ($1, $2, $3, $4, $5, $6, $7)</span><span class="dl">'</span><span class="p">,</span>
      <span class="p">[</span><span class="nx">notification</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">notification</span><span class="p">.</span><span class="nx">userId</span><span class="p">,</span> <span class="nx">notification</span><span class="p">.</span><span class="kd">type</span><span class="p">,</span> <span class="nx">notification</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span> <span class="nx">notification</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span> <span class="nx">notification</span><span class="p">.</span><span class="nx">metadata</span><span class="p">,</span> <span class="nx">notification</span><span class="p">.</span><span class="nx">createdAt</span><span class="p">]</span>
    <span class="p">);</span>
  <span class="p">}</span>
  
  <span class="k">async</span> <span class="nx">findByUser</span><span class="p">(</span><span class="nx">userId</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Notification</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">pool</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span>
      <span class="dl">'</span><span class="s1">SELECT * FROM notifications WHERE user_id = $1 ORDER BY created_at DESC</span><span class="dl">'</span><span class="p">,</span>
      <span class="p">[</span><span class="nx">userId</span><span class="p">]</span>
    <span class="p">);</span>
    <span class="k">return</span> <span class="nx">result</span><span class="p">.</span><span class="nx">rows</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">mapToNotification</span><span class="p">);</span>
  <span class="p">}</span>
  
  <span class="k">private</span> <span class="nx">mapToNotification</span><span class="p">(</span><span class="nx">row</span><span class="p">:</span> <span class="kr">any</span><span class="p">):</span> <span class="nx">Notification</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="nx">row</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
      <span class="na">userId</span><span class="p">:</span> <span class="nx">row</span><span class="p">.</span><span class="nx">user_id</span><span class="p">,</span>
      <span class="na">type</span><span class="p">:</span> <span class="nx">row</span><span class="p">.</span><span class="kd">type</span><span class="p">,</span>
      <span class="na">title</span><span class="p">:</span> <span class="nx">row</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span>
      <span class="na">message</span><span class="p">:</span> <span class="nx">row</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>
      <span class="na">metadata</span><span class="p">:</span> <span class="nx">row</span><span class="p">.</span><span class="nx">metadata</span><span class="p">,</span>
      <span class="na">createdAt</span><span class="p">:</span> <span class="nx">row</span><span class="p">.</span><span class="nx">created_at</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 4. Create Service with Strategy Pattern for different notification types</span>
<span class="kr">interface</span> <span class="nx">INotificationStrategy</span> <span class="p">{</span>
  <span class="nx">send</span><span class="p">(</span><span class="nx">notification</span><span class="p">:</span> <span class="nx">Notification</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">EmailStrategy</span> <span class="k">implements</span> <span class="nx">INotificationStrategy</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">emailClient</span><span class="p">:</span> <span class="nx">IEmailClient</span><span class="p">)</span> <span class="p">{}</span> <span class="c1">// DI</span>
  
  <span class="k">async</span> <span class="nx">send</span><span class="p">(</span><span class="nx">notification</span><span class="p">:</span> <span class="nx">Notification</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">emailClient</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
      <span class="na">to</span><span class="p">:</span> <span class="nx">notification</span><span class="p">.</span><span class="nx">userId</span><span class="p">,</span> <span class="c1">// Would need to lookup email</span>
      <span class="na">subject</span><span class="p">:</span> <span class="nx">notification</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span>
      <span class="na">body</span><span class="p">:</span> <span class="nx">notification</span><span class="p">.</span><span class="nx">message</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">PushStrategy</span> <span class="k">implements</span> <span class="nx">INotificationStrategy</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">pushClient</span><span class="p">:</span> <span class="nx">IPushClient</span><span class="p">)</span> <span class="p">{}</span> <span class="c1">// DI</span>
  
  <span class="k">async</span> <span class="nx">send</span><span class="p">(</span><span class="nx">notification</span><span class="p">:</span> <span class="nx">Notification</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushClient</span><span class="p">.</span><span class="nx">send</span><span class="p">({</span>
      <span class="na">token</span><span class="p">:</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">getUserToken</span><span class="p">(</span><span class="nx">notification</span><span class="p">.</span><span class="nx">userId</span><span class="p">),</span>
      <span class="na">title</span><span class="p">:</span> <span class="nx">notification</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span>
      <span class="na">body</span><span class="p">:</span> <span class="nx">notification</span><span class="p">.</span><span class="nx">message</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 5. Main Service Implementation</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nx">NotificationService</span> <span class="k">implements</span> <span class="nx">INotificationService</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">strategies</span><span class="p">:</span> <span class="nb">Map</span><span class="o">&lt;</span><span class="kr">string</span><span class="p">,</span> <span class="nx">INotificationStrategy</span><span class="o">&gt;</span><span class="p">;</span>
  
  <span class="kd">constructor</span><span class="p">(</span>
    <span class="k">private</span> <span class="nx">repository</span><span class="p">:</span> <span class="nx">INotificationRepository</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">emailStrategy</span><span class="p">:</span> <span class="nx">EmailStrategy</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">pushStrategy</span><span class="p">:</span> <span class="nx">PushStrategy</span>
  <span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Strategy Pattern: Map notification types to strategies</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">strategies</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">([</span>
      <span class="p">[</span><span class="dl">'</span><span class="s1">email</span><span class="dl">'</span><span class="p">,</span> <span class="nx">emailStrategy</span><span class="p">],</span>
      <span class="p">[</span><span class="dl">'</span><span class="s1">push</span><span class="dl">'</span><span class="p">,</span> <span class="nx">pushStrategy</span><span class="p">],</span>
      <span class="p">[</span><span class="dl">'</span><span class="s1">in-app</span><span class="dl">'</span><span class="p">,</span> <span class="k">new</span> <span class="nx">InAppStrategy</span><span class="p">()]</span>
    <span class="p">]);</span>
  <span class="p">}</span>
  
  <span class="k">async</span> <span class="nx">send</span><span class="p">(</span><span class="nx">notification</span><span class="p">:</span> <span class="nx">Notification</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="c1">// Save to database</span>
    <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">repository</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">notification</span><span class="p">);</span>
    
    <span class="c1">// Get appropriate strategy</span>
    <span class="kd">const</span> <span class="nx">strategy</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">strategies</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">notification</span><span class="p">.</span><span class="kd">type</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">strategy</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">`Unknown notification type: </span><span class="p">${</span><span class="nx">notification</span><span class="p">.</span><span class="kd">type</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="c1">// Send using strategy</span>
    <span class="k">await</span> <span class="nx">strategy</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">notification</span><span class="p">);</span>
    
    <span class="c1">// Emit event (Observer Pattern)</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="dl">'</span><span class="s1">notification:sent</span><span class="dl">'</span><span class="p">,</span> <span class="nx">notification</span><span class="p">);</span>
  <span class="p">}</span>
  
  <span class="k">async</span> <span class="nx">getHistory</span><span class="p">(</span><span class="nx">userId</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Notification</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">repository</span><span class="p">.</span><span class="nx">findByUser</span><span class="p">(</span><span class="nx">userId</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 6. Factory Pattern for creation</span>
<span class="k">export</span> <span class="kd">function</span> <span class="nx">createNotificationService</span><span class="p">(</span><span class="nx">config</span><span class="p">:</span> <span class="nx">ServiceConfig</span><span class="p">):</span> <span class="nx">NotificationService</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">pool</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Pool</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">database</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">repository</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PostgresNotificationRepository</span><span class="p">(</span><span class="nx">pool</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">emailStrategy</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EmailStrategy</span><span class="p">(</span><span class="k">new</span> <span class="nx">SendGridClient</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">sendgrid</span><span class="p">));</span>
  <span class="kd">const</span> <span class="nx">pushStrategy</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PushStrategy</span><span class="p">(</span><span class="k">new</span> <span class="nx">FCMClient</span><span class="p">(</span><span class="nx">config</span><span class="p">.</span><span class="nx">firebase</span><span class="p">));</span>
  
  <span class="k">return</span> <span class="k">new</span> <span class="nx">NotificationService</span><span class="p">(</span><span class="nx">repository</span><span class="p">,</span> <span class="nx">emailStrategy</span><span class="p">,</span> <span class="nx">pushStrategy</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 7. Express Route Handler</span>
<span class="k">export</span> <span class="kd">function</span> <span class="nx">createNotificationRoutes</span><span class="p">(</span><span class="nx">service</span><span class="p">:</span> <span class="nx">INotificationService</span><span class="p">):</span> <span class="nx">Router</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Router</span><span class="p">();</span>
  
  <span class="nx">router</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/send</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="na">notification</span><span class="p">:</span> <span class="nx">Notification</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">id</span><span class="p">:</span> <span class="nx">uuidv4</span><span class="p">(),</span>
        <span class="na">userId</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="c1">// From auth middleware</span>
        <span class="na">type</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="kd">type</span><span class="p">,</span>
        <span class="na">title</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span>
        <span class="na">message</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">message</span><span class="p">,</span>
        <span class="na">metadata</span><span class="p">:</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">metadata</span><span class="p">,</span>
        <span class="na">createdAt</span><span class="p">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">()</span>
      <span class="p">};</span>
      
      <span class="k">await</span> <span class="nx">service</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">notification</span><span class="p">);</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">({</span> <span class="na">success</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">id</span><span class="p">:</span> <span class="nx">notification</span><span class="p">.</span><span class="nx">id</span> <span class="p">});</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span> <span class="na">error</span><span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span> <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">});</span>
  
  <span class="nx">router</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/history</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">notifications</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">service</span><span class="p">.</span><span class="nx">getHistory</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">(</span><span class="nx">notifications</span><span class="p">);</span>
  <span class="p">});</span>
  
  <span class="k">return</span> <span class="nx">router</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 8. Wire it all together in main app</span>
<span class="kd">const</span> <span class="nx">notificationService</span> <span class="o">=</span> <span class="nx">createNotificationService</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="dl">'</span><span class="s1">/api/notifications</span><span class="dl">'</span><span class="p">,</span> <span class="nx">createNotificationRoutes</span><span class="p">(</span><span class="nx">notificationService</span><span class="p">));</span>
</code></pre></div></div>

<hr />

<h2 id="best-practices">Best Practices</h2>

<h3 id="1-interface-first-design">1. Interface-First Design</h3>
<p>Always define interfaces before implementations:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 1. Define the contract</span>
<span class="kr">interface</span> <span class="nx">IUserService</span> <span class="p">{</span>
  <span class="nx">getUser</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="nx">updateUser</span><span class="p">(</span><span class="nx">id</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span> <span class="nx">data</span><span class="p">:</span> <span class="nb">Partial</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">User</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 2. Then implement</span>
<span class="kd">class</span> <span class="nx">UserService</span> <span class="k">implements</span> <span class="nx">IUserService</span> <span class="p">{</span>
  <span class="c1">// Implementation details</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="2-single-responsibility-principle">2. Single Responsibility Principle</h3>
<p>Each class/module should have one reason to change:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ✅ Good: Each class has one responsibility</span>
<span class="kd">class</span> <span class="nx">UserValidator</span> <span class="p">{</span>
  <span class="nx">validate</span><span class="p">(</span><span class="nx">user</span><span class="p">:</span> <span class="nx">User</span><span class="p">):</span> <span class="nx">ValidationResult</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">UserRepository</span> <span class="p">{</span>
  <span class="nx">save</span><span class="p">(</span><span class="nx">user</span><span class="p">:</span> <span class="nx">User</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nx">UserNotifier</span> <span class="p">{</span>
  <span class="nx">notifyUserCreated</span><span class="p">(</span><span class="nx">user</span><span class="p">:</span> <span class="nx">User</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="c1">// ❌ Bad: Too many responsibilities</span>
<span class="kd">class</span> <span class="nx">UserManager</span> <span class="p">{</span>
  <span class="nx">validate</span><span class="p">(</span><span class="nx">user</span><span class="p">:</span> <span class="nx">User</span><span class="p">):</span> <span class="nx">ValidationResult</span> <span class="p">{}</span>
  <span class="nx">save</span><span class="p">(</span><span class="nx">user</span><span class="p">:</span> <span class="nx">User</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span> <span class="p">{}</span>
  <span class="nx">notifyUserCreated</span><span class="p">(</span><span class="nx">user</span><span class="p">:</span> <span class="nx">User</span><span class="p">):</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="k">void</span><span class="o">&gt;</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="3-dependency-injection">3. Dependency Injection</h3>
<p>Always inject dependencies, don’t create them:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ✅ Good: Dependencies injected</span>
<span class="kd">class</span> <span class="nx">OrderService</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span>
    <span class="k">private</span> <span class="nx">paymentGateway</span><span class="p">:</span> <span class="nx">IPaymentGateway</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">emailService</span><span class="p">:</span> <span class="nx">IEmailService</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">repository</span><span class="p">:</span> <span class="nx">IOrderRepository</span>
  <span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="c1">// ❌ Bad: Creating dependencies internally</span>
<span class="kd">class</span> <span class="nx">OrderService</span> <span class="p">{</span>
  <span class="k">private</span> <span class="nx">paymentGateway</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">StripeGateway</span><span class="p">();</span> <span class="c1">// Hard to test!</span>
  <span class="k">private</span> <span class="nx">emailService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SendGridService</span><span class="p">();</span>  <span class="c1">// Can't mock!</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="4-use-typescript-properly">4. Use TypeScript Properly</h3>
<p>Leverage TypeScript’s type system:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Use union types for state</span>
<span class="kd">type</span> <span class="nx">LoadingState</span> <span class="o">=</span> 
  <span class="o">|</span> <span class="p">{</span> <span class="na">status</span><span class="p">:</span> <span class="dl">'</span><span class="s1">idle</span><span class="dl">'</span> <span class="p">}</span>
  <span class="o">|</span> <span class="p">{</span> <span class="na">status</span><span class="p">:</span> <span class="dl">'</span><span class="s1">loading</span><span class="dl">'</span> <span class="p">}</span>
  <span class="o">|</span> <span class="p">{</span> <span class="na">status</span><span class="p">:</span> <span class="dl">'</span><span class="s1">success</span><span class="dl">'</span><span class="p">;</span> <span class="nl">data</span><span class="p">:</span> <span class="nx">User</span> <span class="p">}</span>
  <span class="o">|</span> <span class="p">{</span> <span class="na">status</span><span class="p">:</span> <span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">;</span> <span class="nl">error</span><span class="p">:</span> <span class="nb">Error</span> <span class="p">};</span>

<span class="c1">// Use generics for reusable components</span>
<span class="kr">interface</span> <span class="nx">ApiResponse</span><span class="o">&lt;</span><span class="nx">T</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="na">data</span><span class="p">:</span> <span class="nx">T</span><span class="p">;</span>
  <span class="nl">status</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="nl">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Use type guards</span>
<span class="kd">function</span> <span class="nx">isUser</span><span class="p">(</span><span class="nx">obj</span><span class="p">:</span> <span class="kr">any</span><span class="p">):</span> <span class="nx">obj</span> <span class="k">is</span> <span class="nx">User</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">obj</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="5-error-handling">5. Error Handling</h3>
<p>Implement proper error handling:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Custom error classes</span>
<span class="kd">class</span> <span class="nx">ServiceError</span> <span class="kd">extends</span> <span class="nb">Error</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span>
    <span class="nx">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
    <span class="k">public</span> <span class="nx">code</span><span class="p">:</span> <span class="kr">string</span><span class="p">,</span>
    <span class="k">public</span> <span class="nx">statusCode</span><span class="p">:</span> <span class="kr">number</span>
  <span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="p">(</span><span class="nx">message</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ServiceError</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Error handling middleware</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">((</span><span class="nx">err</span><span class="p">:</span> <span class="nb">Error</span><span class="p">,</span> <span class="nx">req</span><span class="p">:</span> <span class="nx">Request</span><span class="p">,</span> <span class="nx">res</span><span class="p">:</span> <span class="nx">Response</span><span class="p">,</span> <span class="nx">next</span><span class="p">:</span> <span class="nx">NextFunction</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span> <span class="k">instanceof</span> <span class="nx">ServiceError</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">statusCode</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span>
      <span class="na">error</span><span class="p">:</span> <span class="nx">err</span><span class="p">.</span><span class="nx">code</span><span class="p">,</span>
      <span class="na">message</span><span class="p">:</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span>
    <span class="p">});</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">).</span><span class="nx">json</span><span class="p">({</span>
      <span class="na">error</span><span class="p">:</span> <span class="dl">'</span><span class="s1">INTERNAL_ERROR</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">An unexpected error occurred</span><span class="dl">'</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="6-testing-patterns">6. Testing Patterns</h3>
<p>Write testable code:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Repository interface makes testing easy</span>
<span class="nx">describe</span><span class="p">(</span><span class="dl">'</span><span class="s1">UserService</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should create user</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// Mock repository</span>
    <span class="kd">const</span> <span class="na">mockRepo</span><span class="p">:</span> <span class="nx">IUserRepository</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">save</span><span class="p">:</span> <span class="nx">jest</span><span class="p">.</span><span class="nx">fn</span><span class="p">().</span><span class="nx">mockResolvedValue</span><span class="p">(</span><span class="nx">mockUser</span><span class="p">),</span>
      <span class="na">findById</span><span class="p">:</span> <span class="nx">jest</span><span class="p">.</span><span class="nx">fn</span><span class="p">()</span>
    <span class="p">};</span>
    
    <span class="c1">// Inject mock</span>
    <span class="kd">const</span> <span class="nx">service</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">UserService</span><span class="p">(</span><span class="nx">mockRepo</span><span class="p">);</span>
    
    <span class="c1">// Test</span>
    <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">service</span><span class="p">.</span><span class="nx">createUser</span><span class="p">(</span><span class="nx">userData</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">mockRepo</span><span class="p">.</span><span class="nx">save</span><span class="p">).</span><span class="nx">toHaveBeenCalledWith</span><span class="p">(</span><span class="nx">userData</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">user</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="nx">mockUser</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div></div>

<hr />

<h2 id="common-pitfalls-to-avoid">Common Pitfalls to Avoid</h2>

<h3 id="1-over-engineering">1. Over-Engineering</h3>
<p>Don’t use patterns just because you can:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ❌ Over-engineered for simple case</span>
<span class="kd">class</span> <span class="nx">SimpleCalculatorFactoryBuilderStrategy</span> <span class="p">{</span>
  <span class="c1">// 100 lines of code for adding two numbers</span>
<span class="p">}</span>

<span class="c1">// ✅ Keep it simple when appropriate</span>
<span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">a</span><span class="p">:</span> <span class="kr">number</span><span class="p">,</span> <span class="nx">b</span><span class="p">:</span> <span class="kr">number</span><span class="p">):</span> <span class="kr">number</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="2-tight-coupling">2. Tight Coupling</h3>
<p>Avoid direct dependencies between modules:</p>
<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ❌ Tight coupling</span>
<span class="kd">class</span> <span class="nx">EmailService</span> <span class="p">{</span>
  <span class="nx">sendWelcomeEmail</span><span class="p">(</span><span class="nx">user</span><span class="p">:</span> <span class="nx">User</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">db</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Database</span><span class="p">();</span> <span class="c1">// Direct dependency!</span>
    <span class="kd">const</span> <span class="nx">template</span> <span class="o">=</span> <span class="nx">db</span><span class="p">.</span><span class="nx">getTemplate</span><span class="p">(</span><span class="dl">'</span><span class="s1">welcome</span><span class="dl">'</span><span class="p">);</span>
    <span class="c1">// ...</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// ✅ Loose coupling</span>
<span class="kd">class</span> <span class="nx">EmailService</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">templateService</span><span class="p">:</span> <span class="nx">ITemplateService</span><span class="p">)</span> <span class="p">{}</span>
  
  <span class="nx">sendWelcomeEmail</span><span class="p">(</span><span class="nx">user</span><span class="p">:</span> <span class="nx">User</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">template</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">templateService</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">welcome</span><span class="dl">'</span><span class="p">);</span>
    <span class="c1">// ...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="3-ignoring-solid-principles">3. Ignoring SOLID Principles</h3>
<ul>
  <li><strong>S</strong>ingle Responsibility</li>
  <li><strong>O</strong>pen/Closed (open for extension, closed for modification)</li>
  <li><strong>L</strong>iskov Substitution (derived classes must be substitutable)</li>
  <li><strong>I</strong>nterface Segregation (many specific interfaces &gt; one general)</li>
  <li><strong>D</strong>ependency Inversion (depend on abstractions, not concretions)</li>
</ul>

<hr />

<h2 id="conclusion">Conclusion</h2>

<p>These design patterns aren’t just theoretical concepts - they solve real problems:</p>

<ul>
  <li><strong>Microservices</strong> → Scale different parts independently</li>
  <li><strong>Agent Architecture</strong> → Handle complex AI workflows</li>
  <li><strong>Registry Pattern</strong> → Manage dynamic service discovery</li>
  <li><strong>Repository Pattern</strong> → Abstract database operations</li>
  <li><strong>Factory Pattern</strong> → Centralize object creation</li>
  <li><strong>Observer Pattern</strong> → Decouple event producers and consumers</li>
  <li><strong>Retry Pattern</strong> → Handle network failures gracefully</li>
  <li><strong>DI Pattern</strong> → Make code testable and flexible</li>
</ul>

<p>Remember:</p>
<ol>
  <li><strong>Patterns are tools</strong>, not rules - use them when they solve a problem</li>
  <li><strong>Start simple</strong>, refactor to patterns when complexity grows</li>
  <li><strong>Consistency matters</strong> - use patterns consistently across the codebase</li>
  <li><strong>Document your decisions</strong> - explain why you chose specific patterns</li>
</ol>

<p>The key to mastering these patterns is <strong>practice</strong>. Start by identifying them in existing code, then try implementing them in new features. Over time, you’ll develop an intuition for when and how to apply each pattern effectively.</p>

<hr />

<h2 id="further-learning-resources">Further Learning Resources</h2>

<ul>
  <li><strong>Books:</strong>
    <ul>
      <li>“Design Patterns” by Gang of Four (classic)</li>
      <li>“Clean Architecture” by Robert C. Martin</li>
      <li>“Domain-Driven Design” by Eric Evans</li>
    </ul>
  </li>
  <li><strong>Online:</strong>
    <ul>
      <li><a href="https://refactoring.guru/design-patterns">Refactoring Guru</a></li>
      <li><a href="https://www.patterns.dev/">Patterns.dev</a></li>
      <li><a href="https://www.typescriptlang.org/docs/handbook/2/classes.html">TypeScript Design Patterns</a></li>
    </ul>
  </li>
  <li><strong>Practice:</strong>
    <ul>
      <li>Implement each pattern in a small project</li>
      <li>Refactor existing code to use patterns</li>
      <li>Contribute to open source projects</li>
    </ul>
  </li>
</ul>

<p>Happy coding! 🚀</p>



<div style="margin-top: 3rem; padding: 1rem; background: #f6f8fa; border-radius: 5px;">
  <p style="margin: 0; color: #666; font-size: 0.9em;">
    📁 Source: DevMentor / designpatterns/DESIGN_PATTERNS_GUIDE.md
  </p>
</div>

  </main>

  <footer>
    <p>&copy; 2024 NatureQuest. Documentation Hub v1.0.0</p>
  </footer>

  <script>
    (function() {
      const html = document.documentElement;
      const buttons = [];
      function setActive(theme) {
        buttons.forEach(b => {
          const active = b.dataset.theme === theme;
          b.classList.toggle('active', active);
          b.setAttribute('aria-pressed', active ? 'true' : 'false');
        });
      }
      function applyTheme(theme) {
        if (theme === 'auto') {
          html.removeAttribute('data-theme');
          localStorage.removeItem('theme');
        } else {
          html.setAttribute('data-theme', theme);
          localStorage.setItem('theme', theme);
        }
        setActive(theme);
      }
      document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.theme-btn').forEach(btn => {
          buttons.push(btn);
          btn.addEventListener('click', () => applyTheme(btn.dataset.theme));
        });
        const saved = localStorage.getItem('theme');
        if (saved === 'light' || saved === 'dark') {
          applyTheme(saved);
        } else {
          applyTheme('auto');
        }
      });
    })();
  </script>
</body>
</html>
