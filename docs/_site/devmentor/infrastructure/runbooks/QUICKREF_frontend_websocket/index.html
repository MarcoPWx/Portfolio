<!DOCTYPE html>
<html lang="en" data-theme="auto">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUICKREF frontend websocket</title>
    
    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    
    <style>
    /* Light mode variables */
    :root {
      --primary: #007AFF;
      --primary-hover: #0051D5;
      --success: #34C759;
      --warning: #FF9500;
      --danger: #FF3B30;
      --text-primary: #000000;
      --text-secondary: #3C3C43;
      --text-tertiary: #8E8E93;
      --bg-primary: #FFFFFF;
      --bg-secondary: #F2F2F7;
      --bg-tertiary: #FFFFFF;
      --bg-elevated: #FFFFFF;
      --border: rgba(0, 0, 0, 0.1);
      --border-subtle: rgba(0, 0, 0, 0.04);
      --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.06), 0 1px 2px rgba(0, 0, 0, 0.12);
      --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07), 0 2px 4px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.1), 0 4px 10px rgba(0, 0, 0, 0.08);
      --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.15);
      --backdrop: rgba(255, 255, 255, 0.8);
      --code-bg: #F7F7FA;
      --code-border: rgba(0, 0, 0, 0.06);
      --nav-bg: rgba(255, 255, 255, 0.72);
      --card-bg: #FFFFFF;
      --hover-bg: rgba(0, 122, 255, 0.08);
    }
    
    /* Dark mode variables */
    [data-theme="dark"] {
      --primary: #0A84FF;
      --primary-hover: #409CFF;
      --success: #32D74B;
      --warning: #FF9F0A;
      --danger: #FF453A;
      --text-primary: #FFFFFF;
      --text-secondary: #EBEBF5;
      --text-tertiary: #8E8E93;
      --bg-primary: #000000;
      --bg-secondary: #1C1C1E;
      --bg-tertiary: #2C2C2E;
      --bg-elevated: #1C1C1E;
      --border: rgba(255, 255, 255, 0.15);
      --border-subtle: rgba(255, 255, 255, 0.06);
      --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.4);
      --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4), 0 2px 4px rgba(0, 0, 0, 0.3);
      --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.5), 0 4px 10px rgba(0, 0, 0, 0.4);
      --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.6);
      --backdrop: rgba(28, 28, 30, 0.8);
      --code-bg: #1C1C1E;
      --code-border: rgba(255, 255, 255, 0.08);
      --nav-bg: rgba(28, 28, 30, 0.72);
      --card-bg: #1C1C1E;
      --hover-bg: rgba(10, 132, 255, 0.15);
    }
    
    /* Auto theme based on system preference */
    @media (prefers-color-scheme: dark) {
      :root:not([data-theme="light"]) {
        --primary: #0A84FF;
        --primary-hover: #409CFF;
        --success: #32D74B;
        --warning: #FF9F0A;
        --danger: #FF453A;
        --text-primary: #FFFFFF;
        --text-secondary: #EBEBF5;
        --text-tertiary: #8E8E93;
        --bg-primary: #000000;
        --bg-secondary: #1C1C1E;
        --bg-tertiary: #2C2C2E;
        --bg-elevated: #1C1C1E;
        --border: rgba(255, 255, 255, 0.15);
        --border-subtle: rgba(255, 255, 255, 0.06);
        --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.4);
        --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4), 0 2px 4px rgba(0, 0, 0, 0.3);
        --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.5), 0 4px 10px rgba(0, 0, 0, 0.4);
        --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.6);
        --backdrop: rgba(28, 28, 30, 0.8);
        --code-bg: #1C1C1E;
        --code-border: rgba(255, 255, 255, 0.08);
        --nav-bg: rgba(28, 28, 30, 0.72);
        --card-bg: #1C1C1E;
        --hover-bg: rgba(10, 132, 255, 0.15);
      }
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    html {
      scroll-behavior: smooth;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
      font-size: 17px;
      line-height: 1.6;
      color: var(--text-primary);
      background: var(--bg-primary);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 24px;
    }
    
    /* Typography */
    p {
      margin: 1.2rem 0;
      color: var(--text-secondary);
      letter-spacing: -0.011em;
    }
    
    a {
      color: var(--primary);
      text-decoration: none;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: 2px;
    }
    
    a:hover {
      color: var(--primary-hover);
      text-decoration: none;
    }
    
    a:focus {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
    }
    
    /* Headings */
    h1, h2, h3, h4, h5, h6 {
      font-weight: 600;
      line-height: 1.2;
      margin-top: 2.5rem;
      margin-bottom: 1rem;
      letter-spacing: -0.02em;
      color: var(--text-primary);
    }
    
    h1 {
      font-size: 3rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-hover) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-top: 0;
      margin-bottom: 1.5rem;
    }
    
    h2 {
      font-size: 2rem;
      font-weight: 600;
      color: var(--text-primary);
      border-bottom: 1px solid var(--border-subtle);
      padding-bottom: 0.75rem;
      margin-top: 3rem;
    }
    
    h3 {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--text-primary);
    }
    
    h4 {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text-secondary);
    }
    
    /* Lists */
    ul, ol {
      padding-left: 2rem;
      margin: 1.5rem 0;
      color: var(--text-secondary);
    }
    
    li {
      margin: 0.75rem 0;
      line-height: 1.6;
    }
    
    /* Strong text */
    strong, b {
      font-weight: 600;
      color: var(--text-primary);
    }
    
    /* Navigation */
    .nav-wrapper {
      position: sticky;
      top: 0;
      z-index: 100;
      background: var(--nav-bg);
      backdrop-filter: saturate(180%) blur(20px);
      -webkit-backdrop-filter: saturate(180%) blur(20px);
      border-bottom: 1px solid var(--border);
      margin-bottom: 2rem;
    }
    
    nav {
      padding: 1rem 0;
    }
    
    .nav-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    nav ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }
    
    nav li {
      margin: 0;
    }
    
    nav a {
      color: var(--text-secondary);
      text-decoration: none;
      font-weight: 500;
      font-size: 0.95rem;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    nav a:hover {
      background: var(--hover-bg);
      color: var(--primary);
    }
    
    nav a:focus {
      outline: none;
    }
    
    /* Theme Switcher */
    .theme-switcher {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.375rem;
      background: var(--bg-secondary);
      border-radius: 10px;
      border: 1px solid var(--border-subtle);
    }
    
    .theme-btn {
      padding: 0.375rem 0.625rem;
      background: transparent;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      color: var(--text-tertiary);
      font-size: 0.875rem;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }
    
    .theme-btn:hover {
      color: var(--text-secondary);
    }
    
    .theme-btn.active {
      background: var(--card-bg);
      color: var(--text-primary);
      box-shadow: var(--shadow-sm);
    }
    
    /* Code blocks */
    pre {
      background: var(--code-bg);
      padding: 1.5rem;
      border-radius: 12px;
      overflow-x: auto;
      border: 1px solid var(--code-border);
      margin: 2rem 0;
      font-size: 0.875rem;
      box-shadow: var(--shadow-sm);
    }
    
    code {
      font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
      background: var(--code-bg);
      padding: 0.125rem 0.375rem;
      border-radius: 4px;
      font-size: 0.875em;
      border: 1px solid var(--code-border);
    }
    
    pre code {
      background: none;
      padding: 0;
      border: none;
      font-size: 0.875rem;
    }
    
    /* Tables */
    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      margin: 2rem 0;
      font-size: 0.95rem;
      background: var(--card-bg);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: var(--shadow-md);
    }
    
    th, td {
      padding: 1rem;
      text-align: left;
      border-bottom: 1px solid var(--border-subtle);
    }
    
    th {
      background: var(--bg-secondary);
      font-weight: 600;
      font-size: 0.875rem;
      color: var(--text-secondary);
    }
    
    td {
      color: var(--text-secondary);
    }
    
    tr:last-child td {
      border-bottom: none;
    }
    
    tr:hover {
      background: var(--hover-bg);
    }
    
    /* Blockquotes */
    blockquote {
      margin: 2rem 0;
      padding: 1.25rem;
      border-left: 4px solid var(--primary);
      background: var(--bg-secondary);
      border-radius: 0 12px 12px 0;
      color: var(--text-secondary);
      font-style: normal;
    }
    
    blockquote p {
      margin: 0.5rem 0;
    }
    
    /* Horizontal rules */
    hr {
      border: none;
      height: 1px;
      background: var(--border);
      margin: 3rem 0;
    }
    
    /* Cards */
    .card {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
      margin: 1rem 0;
      box-shadow: var(--shadow-sm);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .card:hover {
      box-shadow: var(--shadow-lg);
      transform: translateY(-2px);
    }
    
    /* Main content */
    main {
      min-height: calc(100vh - 200px);
      padding: 2rem 0;
    }
    
    /* Footer */
    footer {
      margin-top: 4rem;
      padding: 2rem 0;
      border-top: 1px solid var(--border);
      color: var(--text-tertiary);
      font-size: 0.875rem;
      text-align: center;
    }
    
    /* Grid for cards */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      h1 { font-size: 2.5rem; }
      h2 { font-size: 1.75rem; }
      h3 { font-size: 1.375rem; }
      
      .nav-content {
        flex-direction: column;
        gap: 1rem;
      }
      
      nav ul {
        flex-wrap: wrap;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div class="nav-wrapper">
    <div class="container">
      <nav class="nav-content">
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/architecture/">Architecture</a></li>
          <li><a href="/all-docs/">All Docs</a></li>
          <li><a href="/learning-roadmap/">Learning Roadmaps</a></li>
          <li><a href="/devmentor/">DevMentor</a></li>
          <li><a href="/quizmentor/">QuizMentor</a></li>
          <li><a href="/harvest/">Harvest.ai</a></li>
          <li><a href="/naturequest-auth/">Auth</a></li>
          <li><a href="/infrastructure/">Infrastructure</a></li>
        </ul>
        <div class="theme-switcher" aria-label="Theme Switcher">
          <button class="theme-btn" data-theme="light" aria-pressed="false" title="Light mode">üåû Light</button>
          <button class="theme-btn active" data-theme="auto" aria-pressed="true" title="Auto mode">üß≠ Auto</button>
          <button class="theme-btn" data-theme="dark" aria-pressed="false" title="Dark mode">üåô Dark</button>
        </div>
      </nav>
    </div>
  </div>

  <main class="container">
    <div class="product-header" style="background: #f6f8fa; padding: 1rem; border-radius: 5px; margin-bottom: 2rem;">
  <span style="color: #666;">DevMentor</span> / 
  <span style="color: #999;">infrastructure/runbooks/QUICKREF_frontend_websocket.md</span>
</div>

<h1>QUICKREF frontend websocket</h1>


<h1 id="quick-reference-frontend--websocket-operations">Quick Reference: Frontend &amp; WebSocket Operations</h1>

<table>
  <tbody>
    <tr>
      <td><strong>For on-call engineers</strong></td>
      <td><strong>Print this page</strong></td>
      <td><strong>Keep it handy</strong></td>
    </tr>
  </tbody>
</table>

<h2 id="-emergency-commands-copy--paste">üö® Emergency Commands (Copy &amp; Paste)</h2>

<h3 id="websocket-down---switch-to-polling-2-min-fix">WebSocket Down - Switch to Polling (2 min fix)</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl <span class="nb">set env </span>deployment/frontend <span class="nv">NEXT_PUBLIC_ENABLE_REALTIME</span><span class="o">=</span><span class="nb">false</span> <span class="nt">-n</span> devmentor-app
kubectl rollout restart deployment/frontend <span class="nt">-n</span> devmentor-app
</code></pre></div></div>

<h3 id="frontend-not-loading---quick-rollback-3-min-fix">Frontend Not Loading - Quick Rollback (3 min fix)</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl rollout undo deployment/frontend <span class="nt">-n</span> devmentor-app
kubectl rollout status deployment/frontend <span class="nt">-n</span> devmentor-app
</code></pre></div></div>

<h3 id="high-error-rate---enable-debug-mode">High Error Rate - Enable Debug Mode</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl <span class="nb">set env </span>deployment/frontend <span class="nv">NEXT_PUBLIC_DEBUG</span><span class="o">=</span><span class="nb">true</span> <span class="nt">-n</span> devmentor-app
kubectl logs deployment/frontend <span class="nt">-n</span> devmentor-app <span class="nt">--tail</span><span class="o">=</span>500 | <span class="nb">grep </span>ERROR
</code></pre></div></div>

<h3 id="performance-issues---scale-up">Performance Issues - Scale Up</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl scale deployment/frontend <span class="nt">--replicas</span><span class="o">=</span>5 <span class="nt">-n</span> devmentor-app
kubectl scale deployment/websocket-gateway <span class="nt">--replicas</span><span class="o">=</span>3 <span class="nt">-n</span> devmentor-app
</code></pre></div></div>

<h2 id="-health-check-urls">üìä Health Check URLs</h2>

<table>
  <thead>
    <tr>
      <th>Service</th>
      <th>Health Check</th>
      <th>Expected</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Frontend Dev</td>
      <td><code class="language-plaintext highlighter-rouge">curl http://localhost:3001/api/health</code></td>
      <td>200 OK</td>
    </tr>
    <tr>
      <td>Frontend Prod</td>
      <td><code class="language-plaintext highlighter-rouge">curl https://devmentor.io/api/health</code></td>
      <td>200 OK</td>
    </tr>
    <tr>
      <td>WebSocket Dev</td>
      <td><code class="language-plaintext highlighter-rouge">curl http://localhost:8002/health</code></td>
      <td><code class="language-plaintext highlighter-rouge">{"status":"healthy"}</code></td>
    </tr>
    <tr>
      <td>WebSocket Prod</td>
      <td><code class="language-plaintext highlighter-rouge">curl https://ws.devmentor.io/health</code></td>
      <td><code class="language-plaintext highlighter-rouge">{"status":"healthy"}</code></td>
    </tr>
  </tbody>
</table>

<h2 id="-quick-diagnostics">üîç Quick Diagnostics</h2>

<h3 id="is-websocket-working">Is WebSocket Working?</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check connection count</span>
curl http://websocket-gateway:8002/metrics | <span class="nb">grep </span>connections

<span class="c"># Check logs for errors</span>
kubectl logs deployment/websocket-gateway <span class="nt">-n</span> devmentor-app <span class="nt">--tail</span><span class="o">=</span>50 | <span class="nb">grep </span>ERROR

<span class="c"># Test from browser console</span>
websocketService.getConnectionStatus<span class="o">()</span>  // Should <span class="k">return </span><span class="nb">true</span>
</code></pre></div></div>

<h3 id="is-frontend-healthy">Is Frontend Healthy?</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check pod status</span>
kubectl get pods <span class="nt">-n</span> devmentor-app | <span class="nb">grep </span>frontend

<span class="c"># Check recent errors</span>
kubectl logs deployment/frontend <span class="nt">-n</span> devmentor-app <span class="nt">--tail</span><span class="o">=</span>100 | <span class="nb">grep</span> <span class="nt">-E</span> <span class="s2">"ERROR|CRASH"</span>

<span class="c"># Check memory usage</span>
kubectl top pod <span class="nt">-n</span> devmentor-app | <span class="nb">grep </span>frontend
</code></pre></div></div>

<h2 id="-common-fixes">üîß Common Fixes</h2>

<h3 id="problem-polling-badge-instead-of-live">Problem: ‚ÄúPolling‚Äù badge instead of ‚ÄúLive‚Äù</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Fix 1: Restart WebSocket gateway</span>
kubectl rollout restart deployment/websocket-gateway <span class="nt">-n</span> devmentor-app

<span class="c"># Fix 2: Check WebSocket URL config</span>
kubectl get deployment frontend <span class="nt">-o</span> yaml | <span class="nb">grep </span>WEBSOCKET_URL

<span class="c"># Fix 3: Check CORS settings</span>
kubectl <span class="nb">exec </span>deployment/websocket-gateway <span class="nt">--</span> <span class="nb">cat </span>config.json | <span class="nb">grep </span>cors
</code></pre></div></div>

<h3 id="problem-tasks-not-updating-in-real-time">Problem: Tasks not updating in real-time</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Fix 1: Clear Redis cache</span>
kubectl <span class="nb">exec </span>deployment/redis <span class="nt">--</span> redis-cli FLUSHDB

<span class="c"># Fix 2: Restart both services</span>
kubectl rollout restart deployment/websocket-gateway deployment/frontend <span class="nt">-n</span> devmentor-app

<span class="c"># Fix 3: Check room subscriptions (browser console)</span>
websocketService.joinProject<span class="o">(</span><span class="s1">'project-id'</span><span class="o">)</span>
</code></pre></div></div>

<h3 id="problem-high-memory-usage">Problem: High memory usage</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Fix 1: Restart with limits</span>
kubectl <span class="nb">set </span>resources deployment/websocket-gateway <span class="nt">--limits</span><span class="o">=</span><span class="nv">memory</span><span class="o">=</span>512Mi <span class="nt">-n</span> devmentor-app

<span class="c"># Fix 2: Clean connections</span>
kubectl <span class="nb">exec </span>deployment/websocket-gateway <span class="nt">--</span> node scripts/cleanup-connections.js

<span class="c"># Fix 3: Scale horizontally instead</span>
kubectl scale deployment/websocket-gateway <span class="nt">--replicas</span><span class="o">=</span>3 <span class="nt">-n</span> devmentor-app
</code></pre></div></div>

<h2 id="-who-to-call">üì± Who to Call</h2>

<table>
  <thead>
    <tr>
      <th>Issue</th>
      <th>Primary</th>
      <th>Backup</th>
      <th>Escalation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Frontend Down</td>
      <td>Frontend On-call</td>
      <td>Platform On-call</td>
      <td>CTO</td>
    </tr>
    <tr>
      <td>WebSocket Down</td>
      <td>Platform On-call</td>
      <td>Frontend On-call</td>
      <td>CTO</td>
    </tr>
    <tr>
      <td>Data Loss</td>
      <td>Backend On-call</td>
      <td>Database Admin</td>
      <td>CTO</td>
    </tr>
    <tr>
      <td>Security</td>
      <td>Security On-call</td>
      <td>Platform Lead</td>
      <td>CISO</td>
    </tr>
  </tbody>
</table>

<p><strong>PagerDuty</strong>: +1-555-DEVMENT<br />
<strong>Slack</strong>: #incident-response<br />
<strong>Status Page</strong>: https://status.devmentor.io</p>

<h2 id="-decision-tree">üéØ Decision Tree</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Frontend Issue?
‚îú‚îÄ Loading at all?
‚îÇ  ‚îú‚îÄ No ‚Üí Rollback deployment
‚îÇ  ‚îî‚îÄ Yes ‚Üí Check console errors
‚îÇ     ‚îú‚îÄ API errors ‚Üí Check backend services
‚îÇ     ‚îî‚îÄ JS errors ‚Üí Check recent commits
‚îî‚îÄ Performance issue?
   ‚îú‚îÄ Slow loading ‚Üí Check bundle size, CDN
   ‚îî‚îÄ Slow updates ‚Üí Check WebSocket
      ‚îú‚îÄ Not connected ‚Üí Switch to polling
      ‚îî‚îÄ Connected ‚Üí Check server load
</code></pre></div></div>

<h2 id="-monitoring-dashboard-links">üìù Monitoring Dashboard Links</h2>

<ul>
  <li><strong>Grafana</strong>: https://grafana.devmentor.io/d/frontend</li>
  <li><strong>WebSocket Metrics</strong>: https://grafana.devmentor.io/d/websocket</li>
  <li><strong>Error Tracking</strong>: https://sentry.devmentor.io/projects/frontend</li>
  <li><strong>Uptime</strong>: https://uptime.devmentor.io</li>
</ul>

<h2 id="-performance-thresholds">‚ö° Performance Thresholds</h2>

<table>
  <thead>
    <tr>
      <th>Metric</th>
      <th>Good</th>
      <th>Warning</th>
      <th>Critical</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Page Load</td>
      <td>&lt;3s</td>
      <td>3-5s</td>
      <td>&gt;5s</td>
      <td>Check CDN, bundle size</td>
    </tr>
    <tr>
      <td>WebSocket Latency</td>
      <td>&lt;100ms</td>
      <td>100-500ms</td>
      <td>&gt;500ms</td>
      <td>Scale WebSocket servers</td>
    </tr>
    <tr>
      <td>Error Rate</td>
      <td>&lt;1%</td>
      <td>1-5%</td>
      <td>&gt;5%</td>
      <td>Check logs, rollback</td>
    </tr>
    <tr>
      <td>Memory Usage</td>
      <td>&lt;70%</td>
      <td>70-85%</td>
      <td>&gt;85%</td>
      <td>Restart pods</td>
    </tr>
    <tr>
      <td>CPU Usage</td>
      <td>&lt;60%</td>
      <td>60-80%</td>
      <td>&gt;80%</td>
      <td>Scale horizontally</td>
    </tr>
  </tbody>
</table>

<h2 id="-rollback-procedures">üîÑ Rollback Procedures</h2>

<h3 id="frontend-rollback">Frontend Rollback</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># List versions</span>
kubectl rollout <span class="nb">history </span>deployment/frontend <span class="nt">-n</span> devmentor-app

<span class="c"># Rollback to previous</span>
kubectl rollout undo deployment/frontend <span class="nt">-n</span> devmentor-app

<span class="c"># Rollback to specific version</span>
kubectl rollout undo deployment/frontend <span class="nt">--to-revision</span><span class="o">=</span>5 <span class="nt">-n</span> devmentor-app
</code></pre></div></div>

<h3 id="websocket-rollback">WebSocket Rollback</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Quick rollback</span>
kubectl rollout undo deployment/websocket-gateway <span class="nt">-n</span> devmentor-app

<span class="c"># Verify</span>
kubectl rollout status deployment/websocket-gateway <span class="nt">-n</span> devmentor-app
</code></pre></div></div>

<h2 id="Ô∏è-useful-browser-console-commands">üõ†Ô∏è Useful Browser Console Commands</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Check WebSocket status</span>
<span class="nx">websocketService</span><span class="p">.</span><span class="nx">getConnectionStatus</span><span class="p">()</span>

<span class="c1">// Manually reconnect</span>
<span class="nx">websocketService</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">()</span>
<span class="nx">websocketService</span><span class="p">.</span><span class="nx">connect</span><span class="p">()</span>

<span class="c1">// Join project room</span>
<span class="nx">websocketService</span><span class="p">.</span><span class="nx">joinProject</span><span class="p">(</span><span class="dl">'</span><span class="s1">project-123</span><span class="dl">'</span><span class="p">)</span>

<span class="c1">// Enable debug logging</span>
<span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">'</span><span class="s1">DEBUG</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">socket.io-client:*</span><span class="dl">'</span><span class="p">)</span>

<span class="c1">// Check environment</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NEXT_PUBLIC_ENABLE_REALTIME</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NEXT_PUBLIC_WEBSOCKET_URL</span><span class="p">)</span>

<span class="c1">// Force refresh data</span>
<span class="nx">location</span><span class="p">.</span><span class="nx">reload</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="-pre-incident-checklist">üìã Pre-incident Checklist</h2>

<p>Before declaring an incident:</p>
<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Check status page for known issues</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Verify from multiple locations (VPN on/off)</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Check recent deployments (last 2 hours)</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Test in incognito mode</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Check monitoring dashboards</li>
</ul>

<h2 id="-incident-response-steps">üî¥ Incident Response Steps</h2>

<ol>
  <li><strong>Acknowledge</strong> (2 min)
    <ul>
      <li>Respond in #incident-response</li>
      <li>Create incident channel #inc-YYYYMMDD-description</li>
    </ul>
  </li>
  <li><strong>Assess</strong> (5 min)
    <ul>
      <li>Impact: How many users affected?</li>
      <li>Scope: Which features broken?</li>
      <li>Severity: P1/P2/P3?</li>
    </ul>
  </li>
  <li><strong>Mitigate</strong> (10 min)
    <ul>
      <li>Try quick fixes first</li>
      <li>Consider rollback</li>
      <li>Enable degraded mode if needed</li>
    </ul>
  </li>
  <li><strong>Communicate</strong> (ongoing)
    <ul>
      <li>Update status page</li>
      <li>Post in #general every 30 min</li>
      <li>Email for P1 incidents</li>
    </ul>
  </li>
  <li><strong>Resolve</strong> (varies)
    <ul>
      <li>Fix root cause</li>
      <li>Verify resolution</li>
      <li>Monitor for 30 min</li>
    </ul>
  </li>
  <li><strong>Review</strong> (next day)
    <ul>
      <li>Schedule post-mortem</li>
      <li>Document lessons learned</li>
      <li>Update runbooks</li>
    </ul>
  </li>
</ol>

<hr />

<p><strong>Remember</strong>:</p>
<ul>
  <li>üöÄ <strong>Fast mitigation &gt; perfect fix</strong></li>
  <li>üì¢ <strong>Over-communicate during incidents</strong></li>
  <li>üîÑ <strong>When in doubt, rollback</strong></li>
  <li>üìù <strong>Document everything</strong></li>
</ul>

<table>
  <tbody>
    <tr>
      <td><strong>Last Updated</strong>: 2025-08-25</td>
      <td><strong>Version</strong>: 1.0</td>
    </tr>
  </tbody>
</table>



<div style="margin-top: 3rem; padding: 1rem; background: #f6f8fa; border-radius: 5px;">
  <p style="margin: 0; color: #666; font-size: 0.9em;">
    üìÅ Source: DevMentor / infrastructure/runbooks/QUICKREF_frontend_websocket.md
  </p>
</div>

  </main>

  <footer>
    <p>&copy; 2024 NatureQuest. Documentation Hub v1.0.0</p>
  </footer>

  <script>
    (function() {
      const html = document.documentElement;
      const buttons = [];
      function setActive(theme) {
        buttons.forEach(b => {
          const active = b.dataset.theme === theme;
          b.classList.toggle('active', active);
          b.setAttribute('aria-pressed', active ? 'true' : 'false');
        });
      }
      function applyTheme(theme) {
        if (theme === 'auto') {
          html.removeAttribute('data-theme');
          localStorage.removeItem('theme');
        } else {
          html.setAttribute('data-theme', theme);
          localStorage.setItem('theme', theme);
        }
        setActive(theme);
      }
      document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.theme-btn').forEach(btn => {
          buttons.push(btn);
          btn.addEventListener('click', () => applyTheme(btn.dataset.theme));
        });
        const saved = localStorage.getItem('theme');
        if (saved === 'light' || saved === 'dark') {
          applyTheme(saved);
        } else {
          applyTheme('auto');
        }
      });
    })();
  </script>
</body>
</html>
