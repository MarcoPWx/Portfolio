---
layout: product
title: SYSTEM DESIGN BLUEPRINT
product: DevMentor
source: designpatterns/SYSTEM_DESIGN_BLUEPRINT.md
---

{% raw %}
CURRENT_ARCHITECTURE

# DevMentor System Design Blueprint

## System Overview

DevMentor is a comprehensive AI-powered development assistant with these key capabilities:
- ğŸ¤– AI-powered code analysis and assistance
- ğŸ“ Project management and organization
- ğŸ§  Long-term memory and context awareness
- ğŸ”„ Integration with development tools

## Diagram Annotations

1. **Next.js Web App**: Functions as the primary user interface, providing interactive components and server-side rendering support. Integrated with APIs for seamless data exchange.

2. **VS Code Extension**: Embeds DevMentor functionalities directly within the coding environment, offering assistance like code suggestions, project management, and real-time collaboration tools.

3. **CLI Tool**: Provides command-line access to DevMentorâ€™s features, suitable for automation and quick task execution without a graphical interface.

4. **Load Balancer**: Helps in distributing incoming requests across multiple servers, ensuring efficient resource use and high availability.

5. **API Gateway**: Acts as a central hub, managing API requests, performing security checks, managing rate limits, and directing traffic to appropriate services.

6. **Auth Middleware**: Manages authentication routines, facilitating user identity verification, session handling, and integration with third-party identity providers through OAuth.

7. **AI Gateway (3001)**: Central to orchestrating AI functionalities, including task management, integration with AI models, and coordination of AI service responses.

8. **LLM Orchestrator**: Responsible for managing interactions with language models, ensuring efficient context management, and generating responses accurately and swiftly.

9. **Memory Service**: Manages vector storage, crucial for maintaining long-term contextual memory across sessions, enhancing AIâ€™s responses based on past interactions.

10. **PostgreSQL**: Serves as the main relational database, hosting user data, project configurations, and relational mappings.

11. **Redis**: Functions as a real-time data cache and message broker, enabling fast data retrievals and managing task queues efficiently.

12. **Qdrant**: Dedicated to storing high-dimensional vector data, enabling advanced semantic searches and maintaining context for AI functionalities.

These annotations provide a comprehensive foundation for understanding the system's architecture and main functionalities, equipping you to address a variety of inquiries about DevMentorâ€™s design.

## High-Level Architecture

```
+----------------------------------------------------------------------------------------+
|                                    CLIENT LAYER                                          |
|                                                                                         |
|   +-------------+               +-----------------+              +------------+          |
|   |  Next.js    |               |    VS Code      |              |   CLI      |          |
|   |  Web App    |               |   Extension     |              |   Tool     |          |
|   +------+------+               +--------+--------+              +-----+------+          |
|          |                              |                              |                 |
+----------|------------------------------ | ------------------------------|-----------------+
           |                              |                              |
           +------------------------------+------------------------------+
                                         |
+------------------------------------ GATEWAY ----------------------------------------+
|                                         |                                            |
|                              +----------v----------+                                 |
|                              |    Load Balancer    |                                 |
|                              +----------+----------+                                 |
|                                         |                                            |
|                              +----------v----------+      +-----------------+        |
|                              |    API Gateway     |<---->| Rate Limiter    |        |
|                              |     (Port 8080)    |      +-----------------+        |
|                              +----------+----------+                                 |
|                                         |                                            |
|   +------------------+   +--------------+-------------+    +------------------+      |
|   | Auth Middleware  |<->|    Request Router         |<-->| Error Handler    |      |
|   +------------------+   +--------------------------+    +------------------+      |
|                                         |                                            |
+----------------------------------------|--------------------------------------------+
                                          |
+------------------+   +------------------v-----------------+   +-------------------+
|   AI Gateway     |   |          Core Services            |   |  Storage Layer    |
|   (Port 3001)    |   |                                   |   |                   |
| +-------------+  |   | +-------------+  +-------------+  |   | +--------------+ |
| |    LLM      |  |   | |    Auth     |  |   Memory    |  |   | |  PostgreSQL   | |
| | Orchestrator|  |   | |  (Port 3002)|  | (Port 3003) |  |   | |  (Primary DB) | |
| +-------------+ <-----> +-------------+  +-------------+  |   | +--------------+ |
|                 |   |         ^              ^          |   |         ^         |
| +-------------+ |   |         |              |          |   | +--------------+ |
| |   Agent     | |   |         |              |          |   | |    Redis     | |
| |   System    | |   | +-------------+  +-------------+  |   | |  (Cache/MQ)  | |
| +-------------+ |   | |  Project    |  |    Code     |  |   | +--------------+ |
|        ^        |   | | (Port 3005) |  |  Analysis   |  |   |         ^         |
|        |        |   | +-------------+  +-------------+  |   | +--------------+ |
| +-------------+ |   |         ^              ^          |   | |   Qdrant     | |
| |   Memory    |<-----------------------------+----------+----->|  (Vector DB) | |
| |    Bank     | |   |                                   |   | +--------------+ |
| +-------------+ |   |                                   |   |                   |
+------------------+   +-----------------------------------+   +-------------------+
```

## Component Details

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ CLIENT LAYER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                    â”‚
â”‚     [Next.js Web App]          [VS Code Extension]           [CLI Tool]           â”‚
â”‚           â”‚                           â”‚                          â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                           â”‚                          â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ GATEWAY LAYER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                â”‚
â”‚                              [Load Balancer]                                   â”‚
â”‚                                    â”‚                                           â”‚
â”‚                              [API Gateway]                                     â”‚
â”‚                                    â”‚                                           â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   [Auth Middleware] [Rate Limiter] [Request Logger] [Error Handler]           â”‚
â”‚                                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚           â”‚            â”‚             â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â–¼            â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ CORE SERVICES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚ AI Gateway  â”‚    â”‚Auth Service  â”‚    â”‚Memory Serviceâ”‚    â”‚Project Serviceâ”‚ â”‚
â”‚   â”‚  (3001)    â”‚    â”‚   (3002)     â”‚    â”‚   (3003)     â”‚    â”‚    (3005)     â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                   â”‚                    â”‚                    â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                   â”‚                    â”‚                    â”‚
          â–¼                   â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ AI SERVICES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                               â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚    â”‚LLM Orchestratorâ”‚   â”‚  Agent System  â”‚   â”‚ Code Analyzer  â”‚              â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚             â”‚                    â”‚                    â”‚                        â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                       â”‚                     â”‚                                 â”‚
â”‚                       â–¼                     â–¼                                 â”‚
â”‚                 [Memory Bank]         [Code Context]                          â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                   â”‚                    â”‚                    â”‚
          â–¼                   â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ STORAGE LAYER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚  PostgreSQL â”‚    â”‚    Redis     â”‚    â”‚    Qdrant    â”‚                   â”‚
â”‚   â”‚  (Primary)  â”‚    â”‚(Cache/Stream)â”‚    â”‚   (Vector)   â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Details

### 1. Client Layer
- **Next.js Web App**: Main web interface
  - React components
  - Server-side rendering
  - API integration

- **VS Code Extension**: IDE integration
  - Code analysis
  - AI assistance
  - Project management

- **CLI Tool**: Command-line interface
  - Quick commands
  - System management
  - Development tools

### 2. Gateway Layer
- **Load Balancer**: Request distribution
  - Health checks
  - Traffic routing
  - Failover handling

- **API Gateway (8080)**: Central entry point
  - Request routing
  - Protocol translation
  - Rate limiting
  - Authentication

### 3. Core Services
- **AI Gateway (3001)**
  - AI model orchestration
  - Agent management
  - Response generation
  - Code analysis coordination

- **Auth Service (3002)**
  - User authentication
  - Session management
  - Permission control
  - OAuth integration

- **Memory Service (3003)**
  - Vector storage management
  - Embedding generation
  - Context retrieval
  - RAG operations

- **Project Service (3005)**
  - Project management
  - Code repository integration
  - Analysis coordination
  - Progress tracking

### 4. AI Services
- **LLM Orchestrator**
  - Model selection
  - Context management
  - Response generation
  - Performance optimization

- **Agent System**
  - Task distribution
  - Agent coordination
  - Context sharing
  - Result aggregation

- **Code Analyzer**
  - Static analysis
  - Pattern recognition
  - Suggestion generation
  - Quality assessment

### 5. Storage Layer
- **PostgreSQL**
  - User data
  - Project information
  - System configuration
  - Relationship management

- **Redis**
  - Session cache
  - Message streams
  - Real-time data
  - Task queues

- **Qdrant**
  - Vector embeddings
  - Semantic search
  - Context storage
  - Similarity matching

## Data Flow Examples

### 1. Code Analysis Request
```
User (VS Code) â†’ API Gateway â†’ AI Gateway â†’ Code Analyzer
                                 â†“
                             Memory Bank â† Qdrant
                                 â†“
                             Response â†’ User
```

### 2. Authentication Flow
```
User â†’ API Gateway â†’ Auth Service â†’ PostgreSQL
                         â†“
                      Redis (Session)
                         â†“
                    JWT â†’ User
```

### 3. Project Analysis
```
User â†’ API Gateway â†’ Project Service â†’ GitHub API
                         â†“
                    AI Gateway â†’ LLM Orchestrator
                         â†“
                    Memory Service â†’ Qdrant
                         â†“
                    Response â†’ User
```

## Scaling Points

### Horizontal Scaling
- API Gateway instances
- Core service replicas
- Database read replicas

### Vertical Scaling
- Database resources
- AI processing power
- Memory allocation

### Caching Strategy
- Client-side caching
- API response cache
- Database query cache
- Vector embedding cache

## Security Measures

### Authentication
- JWT tokens
- OAuth integration
- Session management

### Authorization
- Role-based access
- Resource permissions
- Service-level auth

### Data Protection
- Encryption at rest
- Secure communications
- Rate limiting
- Input validation

## Monitoring Points

### System Health
- Service status
- Resource usage
- Error rates
- Response times

### Performance
- Request latency
- Cache hit rates
- Database performance
- AI model performance

### Security
- Authentication attempts
- Rate limit breaches
- Error patterns
- Access logs

This blueprint provides a clear view of DevMentor's architecture, making it easy to:
1. Understand component relationships
2. Identify data flows
3. Plan scaling strategies
4. Implement security measures
5. Set up monitoring
## Infrastructure Layer (DNS & Load Balancing)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        INFRASTRUCTURE LAYER                         â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚  â”‚       DNS       â”‚                                               â”‚
â”‚  â”‚   Management    â”‚                                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚           â”‚                                                         â”‚
â”‚           â–¼                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚  â”‚      CDN /      â”‚                                               â”‚
â”‚  â”‚   Edge Cache    â”‚                                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚           â”‚                                                         â”‚
â”‚           â–¼                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚  â”‚  Load Balancer  â”‚                                               â”‚
â”‚  â”‚                 â”‚                                               â”‚
â”‚  â”‚  â€¢ Round-robin  â”‚                                               â”‚
â”‚  â”‚  â€¢ Health check â”‚                                               â”‚
â”‚  â”‚  â€¢ Failover     â”‚                                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚           â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
```

## API Gateway Layer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          API GATEWAY LAYER                          â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    API Gateway (Port 8080)                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                             â”‚                                       â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚         â”‚                   â”‚                   â”‚                  â”‚
â”‚         â–¼                   â–¼                   â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚     Auth     â”‚  â”‚    Rate      â”‚  â”‚   Request    â”‚            â”‚
â”‚  â”‚  Middleware  â”‚  â”‚   Limiter    â”‚  â”‚    Logger    â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Core Services Layer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              CORE SERVICES LAYER                             â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   AI Gateway     â”‚  â”‚   Auth Service   â”‚  â”‚  Memory Service  â”‚          â”‚
â”‚  â”‚   Port: 3001     â”‚  â”‚   Port: 3002     â”‚  â”‚   Port: 3003     â”‚          â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚          â”‚
â”‚  â”‚ â€¢ AI Orchestr.   â”‚  â”‚ â€¢ User Auth      â”‚  â”‚ â€¢ Vector Storage â”‚          â”‚
â”‚  â”‚ â€¢ Agent Mgmt     â”‚  â”‚ â€¢ JWT Tokens     â”‚  â”‚ â€¢ RAG Operations â”‚          â”‚
â”‚  â”‚ â€¢ Response Gen   â”‚  â”‚ â€¢ OAuth          â”‚  â”‚ â€¢ Embeddings     â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                              â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚                        â”‚  Project Service â”‚                                 â”‚
â”‚                        â”‚   Port: 3005     â”‚                                 â”‚
â”‚                        â”‚                  â”‚                                 â”‚
â”‚                        â”‚ â€¢ Project Mgmt   â”‚                                 â”‚
â”‚                        â”‚ â€¢ Code Repo Int. â”‚                                 â”‚
â”‚                        â”‚ â€¢ Analysis Coord â”‚                                 â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## AI Services Layer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                               AI SERVICES LAYER                               â”‚
â”‚                                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚   LLM Orchestrator  â”‚              â”‚    Agent System     â”‚               â”‚
â”‚   â”‚                     â”‚              â”‚                     â”‚               â”‚
â”‚   â”‚ â€¢ Model Selection   â”‚              â”‚ â€¢ Task Distribution â”‚               â”‚
â”‚   â”‚ â€¢ Context Mgmt      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ Agent Coordinationâ”‚               â”‚
â”‚   â”‚ â€¢ Response Gen      â”‚              â”‚ â€¢ Result Aggregationâ”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚              â”‚                                     â”‚                          â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                            â”‚                                                  â”‚
â”‚                            â–¼                                                  â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚              â”‚      Memory Bank         â”‚                                    â”‚
â”‚              â”‚                          â”‚                                    â”‚
â”‚              â”‚ â€¢ Long-term Context      â”‚                                    â”‚
â”‚              â”‚ â€¢ Shared Knowledge       â”‚                                    â”‚
â”‚              â”‚ â€¢ Context Persistence    â”‚                                    â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                            â–²                                                  â”‚
â”‚                            â”‚                                                  â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚              â”‚     Code Analyzer        â”‚                                    â”‚
â”‚              â”‚                          â”‚                                    â”‚
â”‚              â”‚ â€¢ Static Analysis        â”‚                                    â”‚
â”‚              â”‚ â€¢ Pattern Recognition    â”‚                                    â”‚
â”‚              â”‚ â€¢ Quality Assessment     â”‚                                    â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Storage Layer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              STORAGE LAYER                                    â”‚
â”‚                                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚     PostgreSQL       â”‚  â”‚        Redis         â”‚  â”‚      Qdrant       â”‚  â”‚
â”‚   â”‚   Primary Database   â”‚  â”‚   Cache & Streams    â”‚  â”‚  Vector Database  â”‚  â”‚
â”‚   â”‚                      â”‚  â”‚                      â”‚  â”‚                   â”‚  â”‚
â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚   â”‚ â”‚   User Data      â”‚ â”‚  â”‚ â”‚  Session Cache   â”‚ â”‚  â”‚ â”‚ Vector        â”‚ â”‚  â”‚
â”‚   â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚ â”‚ Embeddings    â”‚ â”‚  â”‚
â”‚   â”‚ â”‚   Project Info   â”‚ â”‚  â”‚ â”‚  Message Streams â”‚ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚
â”‚   â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚ â”‚ Semantic      â”‚ â”‚  â”‚
â”‚   â”‚ â”‚   System Config  â”‚ â”‚  â”‚ â”‚  Real-time Data  â”‚ â”‚  â”‚ â”‚ Search        â”‚ â”‚  â”‚
â”‚   â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚
â”‚   â”‚ â”‚   Relationships  â”‚ â”‚  â”‚ â”‚  Task Queues     â”‚ â”‚  â”‚ â”‚ Context Store â”‚ â”‚  â”‚
â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## User Interfaces Layer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           USER INTERFACES LAYER                               â”‚
â”‚                                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚   Next.js Web App    â”‚  â”‚  VS Code Extension   â”‚  â”‚     CLI Tool      â”‚  â”‚
â”‚   â”‚                      â”‚  â”‚                      â”‚  â”‚                   â”‚  â”‚
â”‚   â”‚ â€¢ React Components   â”‚  â”‚ â€¢ Code Analysis      â”‚  â”‚ â€¢ Quick Commands  â”‚  â”‚
â”‚   â”‚ â€¢ Server-side Render â”‚  â”‚ â€¢ AI Assistance      â”‚  â”‚ â€¢ System Mgmt     â”‚  â”‚
â”‚   â”‚ â€¢ API Integration    â”‚  â”‚ â€¢ Project Management â”‚  â”‚ â€¢ Dev Tools       â”‚  â”‚
â”‚   â”‚                      â”‚  â”‚                      â”‚  â”‚                   â”‚  â”‚
â”‚   â”‚  [Browser-based UI]  â”‚  â”‚   [IDE Integration]  â”‚  â”‚  [Terminal App]   â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚               â”‚                          â”‚                        â”‚           â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                         â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
                                    [API Gateway]
```

## Key Components

### 1. DNS & Load Balancing
- DNS management
- CDN/Edge caching for static assets
- Load balancer for request distribution

### 2. API Gateway (Port 8080)
- Central entry point for all requests
- Authentication middleware
- Rate limiting
- Request logging
- Route distribution

### 3. Core Services
- **AI Gateway (3001)**: AI orchestration and agent management
- **Auth Service (3002)**: User authentication and authorization
- **Memory Service (3003)**: Vector storage and RAG operations
- **Project Service (3005)**: Project management and analysis

### 4. AI Services
- LLM Orchestrator: Manages AI model interactions
- Agent System: Autonomous AI agents for different tasks
- Memory Bank: Long-term context storage
- Code Analyzer: Code analysis and suggestions

### 5. Storage Layer
- **PostgreSQL**: Primary relational database
- **Redis**: Caching and message streams
- **Qdrant**: Vector database for embeddings

### 6. User Interfaces
- Next.js Web Application
- VS Code Extension
- CLI Tool

## Key Features

### Load Balancing
- Round-robin distribution
- Health checks
- Automatic failover
- Session persistence

### Caching Strategy
- CDN for static assets
- Redis for application cache
- Distributed caching
- Cache invalidation protocols

### Security
- JWT authentication
- Role-based access control
- Rate limiting
- Request validation
- SSL/TLS encryption

### Scalability
- Horizontal scaling of services
- Message queues for async operations
- Distributed caching
- Load balancing

### Monitoring
- Request logging
- Performance metrics
- Error tracking
- System health monitoring

## Data Flow

1. **Request Initiation**
   - Client makes request through DNS
   - Request routed through CDN/Load Balancer
   - API Gateway receives request

2. **Request Processing**
   - Authentication/Authorization check
   - Rate limiting verification
   - Route to appropriate service

3. **Service Execution**
   - Service processes request
   - Interacts with databases/cache
   - Returns response

4. **Response Delivery**
   - Response processed through API Gateway
   - Delivered back to client
   - Cached if applicable

## Scaling Considerations

### Horizontal Scaling
- Services can be scaled independently
- Container orchestration ready
- Stateless design

### Vertical Scaling
- Database optimization
- Cache utilization
- Resource allocation

### Bottleneck Prevention
- Rate limiting
- Cache strategies
- Async processing
- Load distribution

## Deployment Architecture

### Development
- Local Docker environment
- Mock services
- Development databases

### Staging
- Kubernetes cluster
- Reduced replicas
- Test data

### Production
- Full Kubernetes deployment
- Multiple replicas
- High availability
- Disaster recovery

## Future Considerations

1. **Service Mesh Integration**
   - Enhanced service discovery
   - Better traffic management
   - Advanced monitoring

2. **Additional AI Capabilities**
   - More specialized agents
   - Enhanced code analysis
   - Improved context understanding

3. **Enhanced Scalability**
   - Global distribution
   - More edge locations
   - Enhanced caching strategies

4. **Advanced Monitoring**
   - APM integration
   - Enhanced logging
   - Better analytics
{% endraw %}
